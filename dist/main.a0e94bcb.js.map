{"version":3,"sources":["../node_modules/smoothscroll-polyfill/dist/smoothscroll.js","../node_modules/@glidejs/glide/dist/glide.esm.js","../node_modules/baguettebox.js/dist/baguetteBox.min.js","../src/imask.js","../src/core/utils.js","../src/core/action-details.js","../src/core/change-details.js","../src/core/continuous-tail-details.js","../src/masked/base.js","../src/masked/factory.js","../src/masked/pattern/input-definition.js","../src/masked/pattern/fixed-definition.js","../src/masked/pattern/chunk-tail-details.js","../src/masked/pattern.js","../src/masked/range.js","../src/masked/date.js","../src/controls/mask-element.js","../src/controls/html-mask-element.js","../src/controls/input.js","../src/masked/enum.js","../src/masked/number.js","../src/masked/regexp.js","../src/masked/function.js","../src/masked/dynamic.js","main.js"],"names":["Glide$1","defaults","type","startAt","perView","focusAt","gap","autoplay","hoverpause","keyboard","bound","swipeThreshold","dragThreshold","perTouch","touchRatio","touchAngle","animationDuration","rewind","rewindDuration","animationTimingFunc","throttle","direction","peek","breakpoints","classes","ltr","rtl","slider","carousel","swipeable","dragging","cloneSlide","activeNav","activeSlide","disabledArrow","warn","msg","console","error","_typeof","Symbol","iterator","obj","constructor","prototype","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","_extends","assign","arguments","source","hasOwnProperty","call","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","undefined","parent","getPrototypeOf","value","getter","inherits","subClass","superClass","create","setPrototypeOf","__proto__","possibleConstructorReturn","self","ReferenceError","toInt","parseInt","toFloat","parseFloat","isString","isObject","isNumber","isFunction","isUndefined","isArray","Array","mount","glide","extensions","events","components","name","_name","define","prop","definition","sortKeys","keys","sort","reduce","r","k","mergeOptions","settings","options","EventsBus","hop","event","handler","on","index","push","remove","context","emit","forEach","item","Glide","selector","_c","_t","_e","disabled","transformers","pattern","Run","make","distance","Transition","disable","Move","interval","_o","set","o","_i","_d","status","Components","Events","move","_this","calculate","after","isStart","isEnd","isOffset","enable","steps","countableSteps","isType","Math","min","_m","step","substr","Html","slides","now","Date","getTime","func","wait","timeout","args","result","previous","later","leading","apply","throttled","at","remaining","clearTimeout","trailing","setTimeout","cancel","MARGIN_TYPE","Gaps","len","style","Direction","marginLeft","marginRight","Sizes","wrapper","children","siblings","node","parentNode","n","firstChild","matched","nextSibling","nodeType","exist","window","HTMLElement","TRACK_SELECTOR","root","track","querySelector","slice","filter","slide","classList","contains","_r","document","t","Peek","_v","before","offset","movement","slideWidth","translate","is","setupSlides","width","setupWrapper","dimention","wrapperSize","offsetWidth","grow","Clones","reductor","Build","typeClass","activeClass","add","sibling","removeClasses","items","collect","_Glide$settings","part","start","end","max","floor","clone","cloneNode","_clone","unshift","append","_Components$Html","half","prepend","reverse","appendChild","_i2","insertBefore","_i3","removeChild","EventsBinder","listeners","el","closure","capture","addEventListener","removeEventListener","Resize","Binder","bind","unbind","off","destroy","VALID_DIRECTIONS","FLIPED_MOVEMENTS","resolve","token","split","join","addClass","removeClass","indexOf","Rtl","modify","Gap","Grow","Peeking","Focusing","mutator","TRANSFORMERS","concat","mutate","transformer","Translate","transform","compose","duration","transition","callback","supportsPassive","opts","e","supportsPassive$1","START_EVENTS","MOVE_EVENTS","END_EVENTS","MOUSE_EVENTS","Swipe","swipeSin","swipeStartX","swipeStartY","passive","bindSwipeStart","swipe","touches","pageX","pageY","bindSwipeMove","bindSwipeEnd","subExSx","subEySy","powEX","abs","powEY","swipeHypotenuse","sqrt","swipeCathetus","asin","PI","stopPropagation","threshold","swipeDistance","swipeDeg","round","unbindSwipeMove","unbindSwipeEnd","unbindSwipeStart","_this2","_this3","changedTouches","Images","dragstart","preventDefault","Anchors","detached","prevented","_a","querySelectorAll","click","detach","draggable","setAttribute","getAttribute","removeAttribute","attach","NAV_SELECTOR","CONTROLS_SELECTOR","Controls","_n","addBindings","setActive","removeActive","controls","removeBindings","elements","currentTarget","Keyboard","press","keyCode","Autoplay","setInterval","stop","time","clearInterval","sortBreakpoints","points","Breakpoints","match","matchMedia","point","matches","COMPONENTS","_Core","Glide$$1","g","str","String","DIRECTION","NONE","LEFT","FORCE_LEFT","RIGHT","FORCE_RIGHT","forceDirection","escapeRegExp","replace","objectIncludes","b","a","arrA","arrB","dateA","dateB","regexpA","RegExp","regexpB","toString","global","ActionDetails","cursorPos","oldValue","oldSelection","startChangePos","insertedCount","removedCount","substring","ChangeDetails","details","inserted","rawInserted","skip","tailShift","ContinuousTailDetails","from","tail","masked","aggregate","_appendPlaceholder","pos","shiftChar","state","Masked","_value","_update","isInitialized","withValueRefresh","reset","input","doCommit","fromPos","toPos","extractInput","appendTo","ch","flags","doPrepare","checkTail","consistentState","_appendCharRaw","consistentTail","appended","doValidate","beforeTailState","overwrite","shiftBefore","tailDetails","appendTail","Error","_beforeTailState","ci","_appendChar","fn","_refreshing","unmasked","unmaskedValue","ret","prepare","validate","commit","deleteCount","removeDirection","tailPos","extractTail","nearestInputPos","changeDetails","raw","maskedClass","mask","IMask","MaskedRegExp","MaskedPattern","MaskedDate","Number","MaskedNumber","MaskedDynamic","MaskedFunction","createMask","DEFAULT_INPUT_DEFINITIONS","PatternInputDefinition","blockOpts","_isFilled","isOptional","lazy","placeholderChar","Boolean","maxPos","boundPos","isComplete","PatternFixedDefinition","_isRawInput","minPos","isResolved","char","isUnmasking","ChunksTailDetails","chunks","map","tailChunk","lastChunk","extendLast","extend","firstTailChunk","shift","blockIndex","chunk","lastBlockIter","_mapPosToBlock","chunkBlock","_stops","_blocks","remainChars","chunkShiftPos","splice","c","cstate","definitions","DEFAULTS","_rebuildMask","defs","_maskedBlocks","unmaskingBlock","optionalBlock","blocks","p","bNames","bName","maskedBlock","isInput","STOP_CHAR","ESCAPE_CHAR","def","blockIter","bi","block","blockDetails","chunkTail","_forEachBlocksInRange","bFromPos","bToPos","blockChunk","_findStopBefore","_blockStartPos","_","stopBefore","si","toBlockIndex","startBlockIter","startBlockIndex","endBlockIndex","bDetails","accVal","blockStartPos","fromBlockIter","toBlockIter","isSameBlock","fromBlockStartPos","fromBlockEndPos","removeDetails","beginBlockData","beginBlockOffset","beginBlockIndex","beginBlock","beginBlockCursorPos","cursorAtRight","searchBlockIndex","blockIndexAtLeft","blockAtLeft","blockInputPos","firstInputAtRight","blockAtRight","firstFilledBlockIndexAtRight","filledBlock","firstFilledInputBlockIndex","firstEmptyInputBlockIndex","blockAlignedPos","firstInputBlockAlignedIndex","firstInputBlockAlignedPos","alignedPos","maskedBlocks","indices","gi","maskedState","every","InputDefinition","FixedDefinition","MaskedRange","to","maxLength","sameCharsCount","fromStr","padStart","toStr","repeat","minstr","maxstr","placeholder","num","padEnd","autofix","val","prepStr","nextVal","boundaries","firstNonZero","search","_matchFrom","GET_DEFAULT_BLOCKS","Y","getFullYear","m","getMonth","d","getDate","bk","date","isDateExist","format","parse","day","month","year","MaskElement","selectionStart","selectionEnd","_unsafeSelect","handlers","_unsafeSelectionStart","_unsafeSelectionEnd","HTMLMaskElement","_handlers","setSelectionRange","_toggleEventHandler","EVENTS_MAP","activeElement","selectionChange","drop","focus","InputMask","_listeners","_unmaskedValue","_saveSelection","_onInput","_onChange","_onDrop","_onFocus","alignCursor","alignCursorFriendly","_bindEvents","updateValue","bindEvents","unbindEvents","ev","l","_selection","newUnmaskedValue","newValue","isChanged","_fireChangeEvents","restOpts","updateMask","maskEquals","updateOpts","updateOptions","updateControl","_delayUpdateCursor","_abortUpdateCursor","_changingCursorPos","_cursorChanging","_fireEvent","hIndex","oldRawValue","rawInputValue","removed","updateCursor","_unbindEvents","typedValue","isActive","select","MaskedEnum","enum","some","_updateRegExps","allowNegative","scale","radix","_numberRegExpInput","_numberRegExp","_mapToRadixRegExp","mapToRadix","_thousandsSeparatorRegExp","thousandsSeparator","parts","_removeThousandsSeparators","extendOnSeparators","count","_separatorsCount","_adjustRangeWithSeparators","prevBeforeTailValue","prevBeforeTailSeparatorsCount","_separatorsCountFromSlice","appendDetails","_insertThousandsSeparators","beforeTailValue","beforeTailSeparatorsCount","searchFrom","separatorPos","separatorAroundFromPos","_findSeparatorAround","separatorAroundToPos","valueBeforePos","valueAfterPos","separatorAtLeftPos","separatorAtLeftEndPos","separatorAtRightPos","regexp","valid","test","number","isNaN","validnum","formatted","normalizeZeros","_normalizeZeros","padFractionalZeros","_padFractionalZeros","sign","zeros","signed","currentMask","compiledMasks","_applyDispatch","prevValueBeforeTail","inputValue","insertValue","_rawInputValue","tailValue","prevMask","prevMaskState","doDispatch","dispatch","currentMaskRef","mi","inputs","weight","i1","i2","phoneMask","baguetteBox","run","toggle","menuToggle","menu","backButton","showMenu","scrollY","pageYOffset","body","position","top","closeMenu","scrollTo","smoothscroll","polyfill","smoothScrollTo","anchor","yCoordinate","getBoundingClientRect","behavior","scrollLinks","link","history","pushState","button","form","submit","tel","data","FormData","fetch","method","then","res","json","alert"],"mappings":"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","file":"main.a0e94bcb.js","sourceRoot":"../src","sourcesContent":["/* smoothscroll v0.4.4 - 2019 - Dustan Kasten, Jeremias Menichelli - MIT License */\n(function () {\n  'use strict';\n\n  // polyfill\n  function polyfill() {\n    // aliases\n    var w = window;\n    var d = document;\n\n    // return if scroll behavior is supported and polyfill is not forced\n    if (\n      'scrollBehavior' in d.documentElement.style &&\n      w.__forceSmoothScrollPolyfill__ !== true\n    ) {\n      return;\n    }\n\n    // globals\n    var Element = w.HTMLElement || w.Element;\n    var SCROLL_TIME = 468;\n\n    // object gathering original scroll methods\n    var original = {\n      scroll: w.scroll || w.scrollTo,\n      scrollBy: w.scrollBy,\n      elementScroll: Element.prototype.scroll || scrollElement,\n      scrollIntoView: Element.prototype.scrollIntoView\n    };\n\n    // define timing method\n    var now =\n      w.performance && w.performance.now\n        ? w.performance.now.bind(w.performance)\n        : Date.now;\n\n    /**\n     * indicates if a the current browser is made by Microsoft\n     * @method isMicrosoftBrowser\n     * @param {String} userAgent\n     * @returns {Boolean}\n     */\n    function isMicrosoftBrowser(userAgent) {\n      var userAgentPatterns = ['MSIE ', 'Trident/', 'Edge/'];\n\n      return new RegExp(userAgentPatterns.join('|')).test(userAgent);\n    }\n\n    /*\n     * IE has rounding bug rounding down clientHeight and clientWidth and\n     * rounding up scrollHeight and scrollWidth causing false positives\n     * on hasScrollableSpace\n     */\n    var ROUNDING_TOLERANCE = isMicrosoftBrowser(w.navigator.userAgent) ? 1 : 0;\n\n    /**\n     * changes scroll position inside an element\n     * @method scrollElement\n     * @param {Number} x\n     * @param {Number} y\n     * @returns {undefined}\n     */\n    function scrollElement(x, y) {\n      this.scrollLeft = x;\n      this.scrollTop = y;\n    }\n\n    /**\n     * returns result of applying ease math function to a number\n     * @method ease\n     * @param {Number} k\n     * @returns {Number}\n     */\n    function ease(k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k));\n    }\n\n    /**\n     * indicates if a smooth behavior should be applied\n     * @method shouldBailOut\n     * @param {Number|Object} firstArg\n     * @returns {Boolean}\n     */\n    function shouldBailOut(firstArg) {\n      if (\n        firstArg === null ||\n        typeof firstArg !== 'object' ||\n        firstArg.behavior === undefined ||\n        firstArg.behavior === 'auto' ||\n        firstArg.behavior === 'instant'\n      ) {\n        // first argument is not an object/null\n        // or behavior is auto, instant or undefined\n        return true;\n      }\n\n      if (typeof firstArg === 'object' && firstArg.behavior === 'smooth') {\n        // first argument is an object and behavior is smooth\n        return false;\n      }\n\n      // throw error when behavior is not supported\n      throw new TypeError(\n        'behavior member of ScrollOptions ' +\n          firstArg.behavior +\n          ' is not a valid value for enumeration ScrollBehavior.'\n      );\n    }\n\n    /**\n     * indicates if an element has scrollable space in the provided axis\n     * @method hasScrollableSpace\n     * @param {Node} el\n     * @param {String} axis\n     * @returns {Boolean}\n     */\n    function hasScrollableSpace(el, axis) {\n      if (axis === 'Y') {\n        return el.clientHeight + ROUNDING_TOLERANCE < el.scrollHeight;\n      }\n\n      if (axis === 'X') {\n        return el.clientWidth + ROUNDING_TOLERANCE < el.scrollWidth;\n      }\n    }\n\n    /**\n     * indicates if an element has a scrollable overflow property in the axis\n     * @method canOverflow\n     * @param {Node} el\n     * @param {String} axis\n     * @returns {Boolean}\n     */\n    function canOverflow(el, axis) {\n      var overflowValue = w.getComputedStyle(el, null)['overflow' + axis];\n\n      return overflowValue === 'auto' || overflowValue === 'scroll';\n    }\n\n    /**\n     * indicates if an element can be scrolled in either axis\n     * @method isScrollable\n     * @param {Node} el\n     * @param {String} axis\n     * @returns {Boolean}\n     */\n    function isScrollable(el) {\n      var isScrollableY = hasScrollableSpace(el, 'Y') && canOverflow(el, 'Y');\n      var isScrollableX = hasScrollableSpace(el, 'X') && canOverflow(el, 'X');\n\n      return isScrollableY || isScrollableX;\n    }\n\n    /**\n     * finds scrollable parent of an element\n     * @method findScrollableParent\n     * @param {Node} el\n     * @returns {Node} el\n     */\n    function findScrollableParent(el) {\n      while (el !== d.body && isScrollable(el) === false) {\n        el = el.parentNode || el.host;\n      }\n\n      return el;\n    }\n\n    /**\n     * self invoked function that, given a context, steps through scrolling\n     * @method step\n     * @param {Object} context\n     * @returns {undefined}\n     */\n    function step(context) {\n      var time = now();\n      var value;\n      var currentX;\n      var currentY;\n      var elapsed = (time - context.startTime) / SCROLL_TIME;\n\n      // avoid elapsed times higher than one\n      elapsed = elapsed > 1 ? 1 : elapsed;\n\n      // apply easing to elapsed time\n      value = ease(elapsed);\n\n      currentX = context.startX + (context.x - context.startX) * value;\n      currentY = context.startY + (context.y - context.startY) * value;\n\n      context.method.call(context.scrollable, currentX, currentY);\n\n      // scroll more if we have not reached our destination\n      if (currentX !== context.x || currentY !== context.y) {\n        w.requestAnimationFrame(step.bind(w, context));\n      }\n    }\n\n    /**\n     * scrolls window or element with a smooth behavior\n     * @method smoothScroll\n     * @param {Object|Node} el\n     * @param {Number} x\n     * @param {Number} y\n     * @returns {undefined}\n     */\n    function smoothScroll(el, x, y) {\n      var scrollable;\n      var startX;\n      var startY;\n      var method;\n      var startTime = now();\n\n      // define scroll context\n      if (el === d.body) {\n        scrollable = w;\n        startX = w.scrollX || w.pageXOffset;\n        startY = w.scrollY || w.pageYOffset;\n        method = original.scroll;\n      } else {\n        scrollable = el;\n        startX = el.scrollLeft;\n        startY = el.scrollTop;\n        method = scrollElement;\n      }\n\n      // scroll looping over a frame\n      step({\n        scrollable: scrollable,\n        method: method,\n        startTime: startTime,\n        startX: startX,\n        startY: startY,\n        x: x,\n        y: y\n      });\n    }\n\n    // ORIGINAL METHODS OVERRIDES\n    // w.scroll and w.scrollTo\n    w.scroll = w.scrollTo = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        original.scroll.call(\n          w,\n          arguments[0].left !== undefined\n            ? arguments[0].left\n            : typeof arguments[0] !== 'object'\n              ? arguments[0]\n              : w.scrollX || w.pageXOffset,\n          // use top prop, second argument if present or fallback to scrollY\n          arguments[0].top !== undefined\n            ? arguments[0].top\n            : arguments[1] !== undefined\n              ? arguments[1]\n              : w.scrollY || w.pageYOffset\n        );\n\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        w,\n        d.body,\n        arguments[0].left !== undefined\n          ? ~~arguments[0].left\n          : w.scrollX || w.pageXOffset,\n        arguments[0].top !== undefined\n          ? ~~arguments[0].top\n          : w.scrollY || w.pageYOffset\n      );\n    };\n\n    // w.scrollBy\n    w.scrollBy = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0])) {\n        original.scrollBy.call(\n          w,\n          arguments[0].left !== undefined\n            ? arguments[0].left\n            : typeof arguments[0] !== 'object' ? arguments[0] : 0,\n          arguments[0].top !== undefined\n            ? arguments[0].top\n            : arguments[1] !== undefined ? arguments[1] : 0\n        );\n\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        w,\n        d.body,\n        ~~arguments[0].left + (w.scrollX || w.pageXOffset),\n        ~~arguments[0].top + (w.scrollY || w.pageYOffset)\n      );\n    };\n\n    // Element.prototype.scroll and Element.prototype.scrollTo\n    Element.prototype.scroll = Element.prototype.scrollTo = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        // if one number is passed, throw error to match Firefox implementation\n        if (typeof arguments[0] === 'number' && arguments[1] === undefined) {\n          throw new SyntaxError('Value could not be converted');\n        }\n\n        original.elementScroll.call(\n          this,\n          // use left prop, first number argument or fallback to scrollLeft\n          arguments[0].left !== undefined\n            ? ~~arguments[0].left\n            : typeof arguments[0] !== 'object' ? ~~arguments[0] : this.scrollLeft,\n          // use top prop, second argument or fallback to scrollTop\n          arguments[0].top !== undefined\n            ? ~~arguments[0].top\n            : arguments[1] !== undefined ? ~~arguments[1] : this.scrollTop\n        );\n\n        return;\n      }\n\n      var left = arguments[0].left;\n      var top = arguments[0].top;\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        this,\n        this,\n        typeof left === 'undefined' ? this.scrollLeft : ~~left,\n        typeof top === 'undefined' ? this.scrollTop : ~~top\n      );\n    };\n\n    // Element.prototype.scrollBy\n    Element.prototype.scrollBy = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        original.elementScroll.call(\n          this,\n          arguments[0].left !== undefined\n            ? ~~arguments[0].left + this.scrollLeft\n            : ~~arguments[0] + this.scrollLeft,\n          arguments[0].top !== undefined\n            ? ~~arguments[0].top + this.scrollTop\n            : ~~arguments[1] + this.scrollTop\n        );\n\n        return;\n      }\n\n      this.scroll({\n        left: ~~arguments[0].left + this.scrollLeft,\n        top: ~~arguments[0].top + this.scrollTop,\n        behavior: arguments[0].behavior\n      });\n    };\n\n    // Element.prototype.scrollIntoView\n    Element.prototype.scrollIntoView = function() {\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        original.scrollIntoView.call(\n          this,\n          arguments[0] === undefined ? true : arguments[0]\n        );\n\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      var scrollableParent = findScrollableParent(this);\n      var parentRects = scrollableParent.getBoundingClientRect();\n      var clientRects = this.getBoundingClientRect();\n\n      if (scrollableParent !== d.body) {\n        // reveal element inside parent\n        smoothScroll.call(\n          this,\n          scrollableParent,\n          scrollableParent.scrollLeft + clientRects.left - parentRects.left,\n          scrollableParent.scrollTop + clientRects.top - parentRects.top\n        );\n\n        // reveal parent in viewport unless is fixed\n        if (w.getComputedStyle(scrollableParent).position !== 'fixed') {\n          w.scrollBy({\n            left: parentRects.left,\n            top: parentRects.top,\n            behavior: 'smooth'\n          });\n        }\n      } else {\n        // reveal element in viewport\n        w.scrollBy({\n          left: clientRects.left,\n          top: clientRects.top,\n          behavior: 'smooth'\n        });\n      }\n    };\n  }\n\n  if (typeof exports === 'object' && typeof module !== 'undefined') {\n    // commonjs\n    module.exports = { polyfill: polyfill };\n  } else {\n    // global\n    polyfill();\n  }\n\n}());\n","/*!\n * Glide.js v3.3.0\n * (c) 2013-2019 Jędrzej Chałubek <jedrzej.chalubek@gmail.com> (http://jedrzejchalubek.com/)\n * Released under the MIT License.\n */\n\nvar defaults = {\n  /**\n   * Type of the movement.\n   *\n   * Available types:\n   * `slider` - Rewinds slider to the start/end when it reaches the first or last slide.\n   * `carousel` - Changes slides without starting over when it reaches the first or last slide.\n   *\n   * @type {String}\n   */\n  type: 'slider',\n\n  /**\n   * Start at specific slide number defined with zero-based index.\n   *\n   * @type {Number}\n   */\n  startAt: 0,\n\n  /**\n   * A number of slides visible on the single viewport.\n   *\n   * @type {Number}\n   */\n  perView: 1,\n\n  /**\n   * Focus currently active slide at a specified position in the track.\n   *\n   * Available inputs:\n   * `center` - Current slide will be always focused at the center of a track.\n   * `0,1,2,3...` - Current slide will be focused on the specified zero-based index.\n   *\n   * @type {String|Number}\n   */\n  focusAt: 0,\n\n  /**\n   * A size of the gap added between slides.\n   *\n   * @type {Number}\n   */\n  gap: 10,\n\n  /**\n   * Change slides after a specified interval. Use `false` for turning off autoplay.\n   *\n   * @type {Number|Boolean}\n   */\n  autoplay: false,\n\n  /**\n   * Stop autoplay on mouseover event.\n   *\n   * @type {Boolean}\n   */\n  hoverpause: true,\n\n  /**\n   * Allow for changing slides with left and right keyboard arrows.\n   *\n   * @type {Boolean}\n   */\n  keyboard: true,\n\n  /**\n   * Stop running `perView` number of slides from the end. Use this\n   * option if you don't want to have an empty space after\n   * a slider. Works only with `slider` type and a\n   * non-centered `focusAt` setting.\n   *\n   * @type {Boolean}\n   */\n  bound: false,\n\n  /**\n   * Minimal swipe distance needed to change the slide. Use `false` for turning off a swiping.\n   *\n   * @type {Number|Boolean}\n   */\n  swipeThreshold: 80,\n\n  /**\n   * Minimal mouse drag distance needed to change the slide. Use `false` for turning off a dragging.\n   *\n   * @type {Number|Boolean}\n   */\n  dragThreshold: 120,\n\n  /**\n   * A maximum number of slides to which movement will be made on swiping or dragging. Use `false` for unlimited.\n   *\n   * @type {Number|Boolean}\n   */\n  perTouch: false,\n\n  /**\n   * Moving distance ratio of the slides on a swiping and dragging.\n   *\n   * @type {Number}\n   */\n  touchRatio: 0.5,\n\n  /**\n   * Angle required to activate slides moving on swiping or dragging.\n   *\n   * @type {Number}\n   */\n  touchAngle: 45,\n\n  /**\n   * Duration of the animation in milliseconds.\n   *\n   * @type {Number}\n   */\n  animationDuration: 400,\n\n  /**\n   * Allows looping the `slider` type. Slider will rewind to the first/last slide when it's at the start/end.\n   *\n   * @type {Boolean}\n   */\n  rewind: true,\n\n  /**\n   * Duration of the rewinding animation of the `slider` type in milliseconds.\n   *\n   * @type {Number}\n   */\n  rewindDuration: 800,\n\n  /**\n   * Easing function for the animation.\n   *\n   * @type {String}\n   */\n  animationTimingFunc: 'cubic-bezier(.165, .840, .440, 1)',\n\n  /**\n   * Throttle costly events at most once per every wait milliseconds.\n   *\n   * @type {Number}\n   */\n  throttle: 10,\n\n  /**\n   * Moving direction mode.\n   *\n   * Available inputs:\n   * - 'ltr' - left to right movement,\n   * - 'rtl' - right to left movement.\n   *\n   * @type {String}\n   */\n  direction: 'ltr',\n\n  /**\n   * The distance value of the next and previous viewports which\n   * have to peek in the current view. Accepts number and\n   * pixels as a string. Left and right peeking can be\n   * set up separately with a directions object.\n   *\n   * For example:\n   * `100` - Peek 100px on the both sides.\n   * { before: 100, after: 50 }` - Peek 100px on the left side and 50px on the right side.\n   *\n   * @type {Number|String|Object}\n   */\n  peek: 0,\n\n  /**\n   * Collection of options applied at specified media breakpoints.\n   * For example: display two slides per view under 800px.\n   * `{\n   *   '800px': {\n   *     perView: 2\n   *   }\n   * }`\n   */\n  breakpoints: {},\n\n  /**\n   * Collection of internally used HTML classes.\n   *\n   * @todo Refactor `slider` and `carousel` properties to single `type: { slider: '', carousel: '' }` object\n   * @type {Object}\n   */\n  classes: {\n    direction: {\n      ltr: 'glide--ltr',\n      rtl: 'glide--rtl'\n    },\n    slider: 'glide--slider',\n    carousel: 'glide--carousel',\n    swipeable: 'glide--swipeable',\n    dragging: 'glide--dragging',\n    cloneSlide: 'glide__slide--clone',\n    activeNav: 'glide__bullet--active',\n    activeSlide: 'glide__slide--active',\n    disabledArrow: 'glide__arrow--disabled'\n  }\n};\n\n/**\n * Outputs warning message to the bowser console.\n *\n * @param  {String} msg\n * @return {Void}\n */\nfunction warn(msg) {\n  console.error(\"[Glide warn]: \" + msg);\n}\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n/**\n * Converts value entered as number\n * or string to integer value.\n *\n * @param {String} value\n * @returns {Number}\n */\nfunction toInt(value) {\n  return parseInt(value);\n}\n\n/**\n * Converts value entered as number\n * or string to flat value.\n *\n * @param {String} value\n * @returns {Number}\n */\nfunction toFloat(value) {\n  return parseFloat(value);\n}\n\n/**\n * Indicates whether the specified value is a string.\n *\n * @param  {*}   value\n * @return {Boolean}\n */\nfunction isString(value) {\n  return typeof value === 'string';\n}\n\n/**\n * Indicates whether the specified value is an object.\n *\n * @param  {*} value\n * @return {Boolean}\n *\n * @see https://github.com/jashkenas/underscore\n */\nfunction isObject(value) {\n  var type = typeof value === 'undefined' ? 'undefined' : _typeof(value);\n\n  return type === 'function' || type === 'object' && !!value; // eslint-disable-line no-mixed-operators\n}\n\n/**\n * Indicates whether the specified value is a number.\n *\n * @param  {*} value\n * @return {Boolean}\n */\nfunction isNumber(value) {\n  return typeof value === 'number';\n}\n\n/**\n * Indicates whether the specified value is a function.\n *\n * @param  {*} value\n * @return {Boolean}\n */\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\n/**\n * Indicates whether the specified value is undefined.\n *\n * @param  {*} value\n * @return {Boolean}\n */\nfunction isUndefined(value) {\n  return typeof value === 'undefined';\n}\n\n/**\n * Indicates whether the specified value is an array.\n *\n * @param  {*} value\n * @return {Boolean}\n */\nfunction isArray(value) {\n  return value.constructor === Array;\n}\n\n/**\n * Creates and initializes specified collection of extensions.\n * Each extension receives access to instance of glide and rest of components.\n *\n * @param {Object} glide\n * @param {Object} extensions\n *\n * @returns {Object}\n */\nfunction mount(glide, extensions, events) {\n  var components = {};\n\n  for (var name in extensions) {\n    if (isFunction(extensions[name])) {\n      components[name] = extensions[name](glide, components, events);\n    } else {\n      warn('Extension must be a function');\n    }\n  }\n\n  for (var _name in components) {\n    if (isFunction(components[_name].mount)) {\n      components[_name].mount();\n    }\n  }\n\n  return components;\n}\n\n/**\n * Defines getter and setter property on the specified object.\n *\n * @param  {Object} obj         Object where property has to be defined.\n * @param  {String} prop        Name of the defined property.\n * @param  {Object} definition  Get and set definitions for the property.\n * @return {Void}\n */\nfunction define(obj, prop, definition) {\n  Object.defineProperty(obj, prop, definition);\n}\n\n/**\n * Sorts aphabetically object keys.\n *\n * @param  {Object} obj\n * @return {Object}\n */\nfunction sortKeys(obj) {\n  return Object.keys(obj).sort().reduce(function (r, k) {\n    r[k] = obj[k];\n\n    return r[k], r;\n  }, {});\n}\n\n/**\n * Merges passed settings object with default options.\n *\n * @param  {Object} defaults\n * @param  {Object} settings\n * @return {Object}\n */\nfunction mergeOptions(defaults, settings) {\n  var options = _extends({}, defaults, settings);\n\n  // `Object.assign` do not deeply merge objects, so we\n  // have to do it manually for every nested object\n  // in options. Although it does not look smart,\n  // it's smaller and faster than some fancy\n  // merging deep-merge algorithm script.\n  if (settings.hasOwnProperty('classes')) {\n    options.classes = _extends({}, defaults.classes, settings.classes);\n\n    if (settings.classes.hasOwnProperty('direction')) {\n      options.classes.direction = _extends({}, defaults.classes.direction, settings.classes.direction);\n    }\n  }\n\n  if (settings.hasOwnProperty('breakpoints')) {\n    options.breakpoints = _extends({}, defaults.breakpoints, settings.breakpoints);\n  }\n\n  return options;\n}\n\nvar EventsBus = function () {\n  /**\n   * Construct a EventBus instance.\n   *\n   * @param {Object} events\n   */\n  function EventsBus() {\n    var events = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    classCallCheck(this, EventsBus);\n\n    this.events = events;\n    this.hop = events.hasOwnProperty;\n  }\n\n  /**\n   * Adds listener to the specifed event.\n   *\n   * @param {String|Array} event\n   * @param {Function} handler\n   */\n\n\n  createClass(EventsBus, [{\n    key: 'on',\n    value: function on(event, handler) {\n      if (isArray(event)) {\n        for (var i = 0; i < event.length; i++) {\n          this.on(event[i], handler);\n        }\n      }\n\n      // Create the event's object if not yet created\n      if (!this.hop.call(this.events, event)) {\n        this.events[event] = [];\n      }\n\n      // Add the handler to queue\n      var index = this.events[event].push(handler) - 1;\n\n      // Provide handle back for removal of event\n      return {\n        remove: function remove() {\n          delete this.events[event][index];\n        }\n      };\n    }\n\n    /**\n     * Runs registered handlers for specified event.\n     *\n     * @param {String|Array} event\n     * @param {Object=} context\n     */\n\n  }, {\n    key: 'emit',\n    value: function emit(event, context) {\n      if (isArray(event)) {\n        for (var i = 0; i < event.length; i++) {\n          this.emit(event[i], context);\n        }\n      }\n\n      // If the event doesn't exist, or there's no handlers in queue, just leave\n      if (!this.hop.call(this.events, event)) {\n        return;\n      }\n\n      // Cycle through events queue, fire!\n      this.events[event].forEach(function (item) {\n        item(context || {});\n      });\n    }\n  }]);\n  return EventsBus;\n}();\n\nvar Glide = function () {\n  /**\r\n   * Construct glide.\r\n   *\r\n   * @param  {String} selector\r\n   * @param  {Object} options\r\n   */\n  function Glide(selector) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    classCallCheck(this, Glide);\n\n    this._c = {};\n    this._t = [];\n    this._e = new EventsBus();\n\n    this.disabled = false;\n    this.selector = selector;\n    this.settings = mergeOptions(defaults, options);\n    this.index = this.settings.startAt;\n  }\n\n  /**\r\n   * Initializes glide.\r\n   *\r\n   * @param {Object} extensions Collection of extensions to initialize.\r\n   * @return {Glide}\r\n   */\n\n\n  createClass(Glide, [{\n    key: 'mount',\n    value: function mount$$1() {\n      var extensions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._e.emit('mount.before');\n\n      if (isObject(extensions)) {\n        this._c = mount(this, extensions, this._e);\n      } else {\n        warn('You need to provide a object on `mount()`');\n      }\n\n      this._e.emit('mount.after');\n\n      return this;\n    }\n\n    /**\r\n     * Collects an instance `translate` transformers.\r\n     *\r\n     * @param  {Array} transformers Collection of transformers.\r\n     * @return {Void}\r\n     */\n\n  }, {\n    key: 'mutate',\n    value: function mutate() {\n      var transformers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      if (isArray(transformers)) {\n        this._t = transformers;\n      } else {\n        warn('You need to provide a array on `mutate()`');\n      }\n\n      return this;\n    }\n\n    /**\r\n     * Updates glide with specified settings.\r\n     *\r\n     * @param {Object} settings\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'update',\n    value: function update() {\n      var settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this.settings = mergeOptions(this.settings, settings);\n\n      if (settings.hasOwnProperty('startAt')) {\n        this.index = settings.startAt;\n      }\n\n      this._e.emit('update');\n\n      return this;\n    }\n\n    /**\r\n     * Change slide with specified pattern. A pattern must be in the special format:\r\n     * `>` - Move one forward\r\n     * `<` - Move one backward\r\n     * `={i}` - Go to {i} zero-based slide (eq. '=1', will go to second slide)\r\n     * `>>` - Rewinds to end (last slide)\r\n     * `<<` - Rewinds to start (first slide)\r\n     *\r\n     * @param {String} pattern\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'go',\n    value: function go(pattern) {\n      this._c.Run.make(pattern);\n\n      return this;\n    }\n\n    /**\r\n     * Move track by specified distance.\r\n     *\r\n     * @param {String} distance\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'move',\n    value: function move(distance) {\n      this._c.Transition.disable();\n      this._c.Move.make(distance);\n\n      return this;\n    }\n\n    /**\r\n     * Destroy instance and revert all changes done by this._c.\r\n     *\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      this._e.emit('destroy');\n\n      return this;\n    }\n\n    /**\r\n     * Start instance autoplaying.\r\n     *\r\n     * @param {Boolean|Number} interval Run autoplaying with passed interval regardless of `autoplay` settings\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'play',\n    value: function play() {\n      var interval = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (interval) {\n        this.settings.autoplay = interval;\n      }\n\n      this._e.emit('play');\n\n      return this;\n    }\n\n    /**\r\n     * Stop instance autoplaying.\r\n     *\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'pause',\n    value: function pause() {\n      this._e.emit('pause');\n\n      return this;\n    }\n\n    /**\r\n     * Sets glide into a idle status.\r\n     *\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'disable',\n    value: function disable() {\n      this.disabled = true;\n\n      return this;\n    }\n\n    /**\r\n     * Sets glide into a active status.\r\n     *\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'enable',\n    value: function enable() {\n      this.disabled = false;\n\n      return this;\n    }\n\n    /**\r\n     * Adds cuutom event listener with handler.\r\n     *\r\n     * @param  {String|Array} event\r\n     * @param  {Function} handler\r\n     * @return {Glide}\r\n     */\n\n  }, {\n    key: 'on',\n    value: function on(event, handler) {\n      this._e.on(event, handler);\n\n      return this;\n    }\n\n    /**\r\n     * Checks if glide is a precised type.\r\n     *\r\n     * @param  {String} name\r\n     * @return {Boolean}\r\n     */\n\n  }, {\n    key: 'isType',\n    value: function isType(name) {\n      return this.settings.type === name;\n    }\n\n    /**\r\n     * Gets value of the core options.\r\n     *\r\n     * @return {Object}\r\n     */\n\n  }, {\n    key: 'settings',\n    get: function get$$1() {\n      return this._o;\n    }\n\n    /**\r\n     * Sets value of the core options.\r\n     *\r\n     * @param  {Object} o\r\n     * @return {Void}\r\n     */\n    ,\n    set: function set$$1(o) {\n      if (isObject(o)) {\n        this._o = o;\n      } else {\n        warn('Options must be an `object` instance.');\n      }\n    }\n\n    /**\r\n     * Gets current index of the slider.\r\n     *\r\n     * @return {Object}\r\n     */\n\n  }, {\n    key: 'index',\n    get: function get$$1() {\n      return this._i;\n    }\n\n    /**\r\n     * Sets current index a slider.\r\n     *\r\n     * @return {Object}\r\n     */\n    ,\n    set: function set$$1(i) {\n      this._i = toInt(i);\n    }\n\n    /**\r\n     * Gets type name of the slider.\r\n     *\r\n     * @return {String}\r\n     */\n\n  }, {\n    key: 'type',\n    get: function get$$1() {\n      return this.settings.type;\n    }\n\n    /**\r\n     * Gets value of the idle status.\r\n     *\r\n     * @return {Boolean}\r\n     */\n\n  }, {\n    key: 'disabled',\n    get: function get$$1() {\n      return this._d;\n    }\n\n    /**\r\n     * Sets value of the idle status.\r\n     *\r\n     * @return {Boolean}\r\n     */\n    ,\n    set: function set$$1(status) {\n      this._d = !!status;\n    }\n  }]);\n  return Glide;\n}();\n\nfunction Run (Glide, Components, Events) {\n  var Run = {\n    /**\n     * Initializes autorunning of the glide.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      this._o = false;\n    },\n\n\n    /**\n     * Makes glides running based on the passed moving schema.\n     *\n     * @param {String} move\n     */\n    make: function make(move) {\n      var _this = this;\n\n      if (!Glide.disabled) {\n        Glide.disable();\n\n        this.move = move;\n\n        Events.emit('run.before', this.move);\n\n        this.calculate();\n\n        Events.emit('run', this.move);\n\n        Components.Transition.after(function () {\n          if (_this.isStart()) {\n            Events.emit('run.start', _this.move);\n          }\n\n          if (_this.isEnd()) {\n            Events.emit('run.end', _this.move);\n          }\n\n          if (_this.isOffset('<') || _this.isOffset('>')) {\n            _this._o = false;\n\n            Events.emit('run.offset', _this.move);\n          }\n\n          Events.emit('run.after', _this.move);\n\n          Glide.enable();\n        });\n      }\n    },\n\n\n    /**\n     * Calculates current index based on defined move.\n     *\n     * @return {Void}\n     */\n    calculate: function calculate() {\n      var move = this.move,\n          length = this.length;\n      var steps = move.steps,\n          direction = move.direction;\n\n\n      var countableSteps = isNumber(toInt(steps)) && toInt(steps) !== 0;\n\n      switch (direction) {\n        case '>':\n          if (steps === '>') {\n            Glide.index = length;\n          } else if (this.isEnd()) {\n            if (!(Glide.isType('slider') && !Glide.settings.rewind)) {\n              this._o = true;\n\n              Glide.index = 0;\n            }\n          } else if (countableSteps) {\n            Glide.index += Math.min(length - Glide.index, -toInt(steps));\n          } else {\n            Glide.index++;\n          }\n          break;\n\n        case '<':\n          if (steps === '<') {\n            Glide.index = 0;\n          } else if (this.isStart()) {\n            if (!(Glide.isType('slider') && !Glide.settings.rewind)) {\n              this._o = true;\n\n              Glide.index = length;\n            }\n          } else if (countableSteps) {\n            Glide.index -= Math.min(Glide.index, toInt(steps));\n          } else {\n            Glide.index--;\n          }\n          break;\n\n        case '=':\n          Glide.index = steps;\n          break;\n\n        default:\n          warn('Invalid direction pattern [' + direction + steps + '] has been used');\n          break;\n      }\n    },\n\n\n    /**\n     * Checks if we are on the first slide.\n     *\n     * @return {Boolean}\n     */\n    isStart: function isStart() {\n      return Glide.index === 0;\n    },\n\n\n    /**\n     * Checks if we are on the last slide.\n     *\n     * @return {Boolean}\n     */\n    isEnd: function isEnd() {\n      return Glide.index === this.length;\n    },\n\n\n    /**\n     * Checks if we are making a offset run.\n     *\n     * @param {String} direction\n     * @return {Boolean}\n     */\n    isOffset: function isOffset(direction) {\n      return this._o && this.move.direction === direction;\n    }\n  };\n\n  define(Run, 'move', {\n    /**\n     * Gets value of the move schema.\n     *\n     * @returns {Object}\n     */\n    get: function get() {\n      return this._m;\n    },\n\n\n    /**\n     * Sets value of the move schema.\n     *\n     * @returns {Object}\n     */\n    set: function set(value) {\n      var step = value.substr(1);\n\n      this._m = {\n        direction: value.substr(0, 1),\n        steps: step ? toInt(step) ? toInt(step) : step : 0\n      };\n    }\n  });\n\n  define(Run, 'length', {\n    /**\n     * Gets value of the running distance based\n     * on zero-indexing number of slides.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      var settings = Glide.settings;\n      var length = Components.Html.slides.length;\n\n      // If the `bound` option is acitve, a maximum running distance should be\n      // reduced by `perView` and `focusAt` settings. Running distance\n      // should end before creating an empty space after instance.\n\n      if (Glide.isType('slider') && settings.focusAt !== 'center' && settings.bound) {\n        return length - 1 - (toInt(settings.perView) - 1) + toInt(settings.focusAt);\n      }\n\n      return length - 1;\n    }\n  });\n\n  define(Run, 'offset', {\n    /**\n     * Gets status of the offsetting flag.\n     *\n     * @return {Boolean}\n     */\n    get: function get() {\n      return this._o;\n    }\n  });\n\n  return Run;\n}\n\n/**\n * Returns a current time.\n *\n * @return {Number}\n */\nfunction now() {\n  return new Date().getTime();\n}\n\n/**\n * Returns a function, that, when invoked, will only be triggered\n * at most once during a given window of time.\n *\n * @param {Function} func\n * @param {Number} wait\n * @param {Object=} options\n * @return {Function}\n *\n * @see https://github.com/jashkenas/underscore\n */\nfunction throttle(func, wait, options) {\n  var timeout = void 0,\n      context = void 0,\n      args = void 0,\n      result = void 0;\n  var previous = 0;\n  if (!options) options = {};\n\n  var later = function later() {\n    previous = options.leading === false ? 0 : now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n\n  var throttled = function throttled() {\n    var at = now();\n    if (!previous && options.leading === false) previous = at;\n    var remaining = wait - (at - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = at;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n\n  throttled.cancel = function () {\n    clearTimeout(timeout);\n    previous = 0;\n    timeout = context = args = null;\n  };\n\n  return throttled;\n}\n\nvar MARGIN_TYPE = {\n  ltr: ['marginLeft', 'marginRight'],\n  rtl: ['marginRight', 'marginLeft']\n};\n\nfunction Gaps (Glide, Components, Events) {\n  var Gaps = {\n    /**\n     * Applies gaps between slides. First and last\n     * slides do not receive it's edge margins.\n     *\n     * @param {HTMLCollection} slides\n     * @return {Void}\n     */\n    apply: function apply(slides) {\n      for (var i = 0, len = slides.length; i < len; i++) {\n        var style = slides[i].style;\n        var direction = Components.Direction.value;\n\n        if (i !== 0) {\n          style[MARGIN_TYPE[direction][0]] = this.value / 2 + 'px';\n        } else {\n          style[MARGIN_TYPE[direction][0]] = '';\n        }\n\n        if (i !== slides.length - 1) {\n          style[MARGIN_TYPE[direction][1]] = this.value / 2 + 'px';\n        } else {\n          style[MARGIN_TYPE[direction][1]] = '';\n        }\n      }\n    },\n\n\n    /**\n     * Removes gaps from the slides.\n     *\n     * @param {HTMLCollection} slides\n     * @returns {Void}\n    */\n    remove: function remove(slides) {\n      for (var i = 0, len = slides.length; i < len; i++) {\n        var style = slides[i].style;\n\n        style.marginLeft = '';\n        style.marginRight = '';\n      }\n    }\n  };\n\n  define(Gaps, 'value', {\n    /**\n     * Gets value of the gap.\n     *\n     * @returns {Number}\n     */\n    get: function get() {\n      return toInt(Glide.settings.gap);\n    }\n  });\n\n  define(Gaps, 'grow', {\n    /**\n     * Gets additional dimentions value caused by gaps.\n     * Used to increase width of the slides wrapper.\n     *\n     * @returns {Number}\n     */\n    get: function get() {\n      return Gaps.value * (Components.Sizes.length - 1);\n    }\n  });\n\n  define(Gaps, 'reductor', {\n    /**\n     * Gets reduction value caused by gaps.\n     * Used to subtract width of the slides.\n     *\n     * @returns {Number}\n     */\n    get: function get() {\n      var perView = Glide.settings.perView;\n\n      return Gaps.value * (perView - 1) / perView;\n    }\n  });\n\n  /**\n   * Apply calculated gaps:\n   * - after building, so slides (including clones) will receive proper margins\n   * - on updating via API, to recalculate gaps with new options\n   */\n  Events.on(['build.after', 'update'], throttle(function () {\n    Gaps.apply(Components.Html.wrapper.children);\n  }, 30));\n\n  /**\n   * Remove gaps:\n   * - on destroying to bring markup to its inital state\n   */\n  Events.on('destroy', function () {\n    Gaps.remove(Components.Html.wrapper.children);\n  });\n\n  return Gaps;\n}\n\n/**\n * Finds siblings nodes of the passed node.\n *\n * @param  {Element} node\n * @return {Array}\n */\nfunction siblings(node) {\n  if (node && node.parentNode) {\n    var n = node.parentNode.firstChild;\n    var matched = [];\n\n    for (; n; n = n.nextSibling) {\n      if (n.nodeType === 1 && n !== node) {\n        matched.push(n);\n      }\n    }\n\n    return matched;\n  }\n\n  return [];\n}\n\n/**\n * Checks if passed node exist and is a valid element.\n *\n * @param  {Element} node\n * @return {Boolean}\n */\nfunction exist(node) {\n  if (node && node instanceof window.HTMLElement) {\n    return true;\n  }\n\n  return false;\n}\n\nvar TRACK_SELECTOR = '[data-glide-el=\"track\"]';\n\nfunction Html (Glide, Components) {\n  var Html = {\n    /**\n     * Setup slider HTML nodes.\n     *\n     * @param {Glide} glide\n     */\n    mount: function mount() {\n      this.root = Glide.selector;\n      this.track = this.root.querySelector(TRACK_SELECTOR);\n      this.slides = Array.prototype.slice.call(this.wrapper.children).filter(function (slide) {\n        return !slide.classList.contains(Glide.settings.classes.cloneSlide);\n      });\n    }\n  };\n\n  define(Html, 'root', {\n    /**\n     * Gets node of the glide main element.\n     *\n     * @return {Object}\n     */\n    get: function get() {\n      return Html._r;\n    },\n\n\n    /**\n     * Sets node of the glide main element.\n     *\n     * @return {Object}\n     */\n    set: function set(r) {\n      if (isString(r)) {\n        r = document.querySelector(r);\n      }\n\n      if (exist(r)) {\n        Html._r = r;\n      } else {\n        warn('Root element must be a existing Html node');\n      }\n    }\n  });\n\n  define(Html, 'track', {\n    /**\n     * Gets node of the glide track with slides.\n     *\n     * @return {Object}\n     */\n    get: function get() {\n      return Html._t;\n    },\n\n\n    /**\n     * Sets node of the glide track with slides.\n     *\n     * @return {Object}\n     */\n    set: function set(t) {\n      if (exist(t)) {\n        Html._t = t;\n      } else {\n        warn('Could not find track element. Please use ' + TRACK_SELECTOR + ' attribute.');\n      }\n    }\n  });\n\n  define(Html, 'wrapper', {\n    /**\n     * Gets node of the slides wrapper.\n     *\n     * @return {Object}\n     */\n    get: function get() {\n      return Html.track.children[0];\n    }\n  });\n\n  return Html;\n}\n\nfunction Peek (Glide, Components, Events) {\n  var Peek = {\n    /**\n     * Setups how much to peek based on settings.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      this.value = Glide.settings.peek;\n    }\n  };\n\n  define(Peek, 'value', {\n    /**\n     * Gets value of the peek.\n     *\n     * @returns {Number|Object}\n     */\n    get: function get() {\n      return Peek._v;\n    },\n\n\n    /**\n     * Sets value of the peek.\n     *\n     * @param {Number|Object} value\n     * @return {Void}\n     */\n    set: function set(value) {\n      if (isObject(value)) {\n        value.before = toInt(value.before);\n        value.after = toInt(value.after);\n      } else {\n        value = toInt(value);\n      }\n\n      Peek._v = value;\n    }\n  });\n\n  define(Peek, 'reductor', {\n    /**\n     * Gets reduction value caused by peek.\n     *\n     * @returns {Number}\n     */\n    get: function get() {\n      var value = Peek.value;\n      var perView = Glide.settings.perView;\n\n      if (isObject(value)) {\n        return value.before / perView + value.after / perView;\n      }\n\n      return value * 2 / perView;\n    }\n  });\n\n  /**\n   * Recalculate peeking sizes on:\n   * - when resizing window to update to proper percents\n   */\n  Events.on(['resize', 'update'], function () {\n    Peek.mount();\n  });\n\n  return Peek;\n}\n\nfunction Move (Glide, Components, Events) {\n  var Move = {\n    /**\n     * Constructs move component.\n     *\n     * @returns {Void}\n     */\n    mount: function mount() {\n      this._o = 0;\n    },\n\n\n    /**\n     * Calculates a movement value based on passed offset and currently active index.\n     *\n     * @param  {Number} offset\n     * @return {Void}\n     */\n    make: function make() {\n      var _this = this;\n\n      var offset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      this.offset = offset;\n\n      Events.emit('move', {\n        movement: this.value\n      });\n\n      Components.Transition.after(function () {\n        Events.emit('move.after', {\n          movement: _this.value\n        });\n      });\n    }\n  };\n\n  define(Move, 'offset', {\n    /**\n     * Gets an offset value used to modify current translate.\n     *\n     * @return {Object}\n     */\n    get: function get() {\n      return Move._o;\n    },\n\n\n    /**\n     * Sets an offset value used to modify current translate.\n     *\n     * @return {Object}\n     */\n    set: function set(value) {\n      Move._o = !isUndefined(value) ? toInt(value) : 0;\n    }\n  });\n\n  define(Move, 'translate', {\n    /**\n     * Gets a raw movement value.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      return Components.Sizes.slideWidth * Glide.index;\n    }\n  });\n\n  define(Move, 'value', {\n    /**\n     * Gets an actual movement value corrected by offset.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      var offset = this.offset;\n      var translate = this.translate;\n\n      if (Components.Direction.is('rtl')) {\n        return translate + offset;\n      }\n\n      return translate - offset;\n    }\n  });\n\n  /**\n   * Make movement to proper slide on:\n   * - before build, so glide will start at `startAt` index\n   * - on each standard run to move to newly calculated index\n   */\n  Events.on(['build.before', 'run'], function () {\n    Move.make();\n  });\n\n  return Move;\n}\n\nfunction Sizes (Glide, Components, Events) {\n  var Sizes = {\n    /**\n     * Setups dimentions of slides.\n     *\n     * @return {Void}\n     */\n    setupSlides: function setupSlides() {\n      var width = this.slideWidth + 'px';\n      var slides = Components.Html.slides;\n\n      for (var i = 0; i < slides.length; i++) {\n        slides[i].style.width = width;\n      }\n    },\n\n\n    /**\n     * Setups dimentions of slides wrapper.\n     *\n     * @return {Void}\n     */\n    setupWrapper: function setupWrapper(dimention) {\n      Components.Html.wrapper.style.width = this.wrapperSize + 'px';\n    },\n\n\n    /**\n     * Removes applied styles from HTML elements.\n     *\n     * @returns {Void}\n     */\n    remove: function remove() {\n      var slides = Components.Html.slides;\n\n      for (var i = 0; i < slides.length; i++) {\n        slides[i].style.width = '';\n      }\n\n      Components.Html.wrapper.style.width = '';\n    }\n  };\n\n  define(Sizes, 'length', {\n    /**\n     * Gets count number of the slides.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      return Components.Html.slides.length;\n    }\n  });\n\n  define(Sizes, 'width', {\n    /**\n     * Gets width value of the glide.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      return Components.Html.root.offsetWidth;\n    }\n  });\n\n  define(Sizes, 'wrapperSize', {\n    /**\n     * Gets size of the slides wrapper.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      return Sizes.slideWidth * Sizes.length + Components.Gaps.grow + Components.Clones.grow;\n    }\n  });\n\n  define(Sizes, 'slideWidth', {\n    /**\n     * Gets width value of the single slide.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      return Sizes.width / Glide.settings.perView - Components.Peek.reductor - Components.Gaps.reductor;\n    }\n  });\n\n  /**\n   * Apply calculated glide's dimensions:\n   * - before building, so other dimentions (e.g. translate) will be calculated propertly\n   * - when resizing window to recalculate sildes dimensions\n   * - on updating via API, to calculate dimensions based on new options\n   */\n  Events.on(['build.before', 'resize', 'update'], function () {\n    Sizes.setupSlides();\n    Sizes.setupWrapper();\n  });\n\n  /**\n   * Remove calculated glide's dimensions:\n   * - on destoting to bring markup to its inital state\n   */\n  Events.on('destroy', function () {\n    Sizes.remove();\n  });\n\n  return Sizes;\n}\n\nfunction Build (Glide, Components, Events) {\n  var Build = {\n    /**\n     * Init glide building. Adds classes, sets\n     * dimensions and setups initial state.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      Events.emit('build.before');\n\n      this.typeClass();\n      this.activeClass();\n\n      Events.emit('build.after');\n    },\n\n\n    /**\n     * Adds `type` class to the glide element.\n     *\n     * @return {Void}\n     */\n    typeClass: function typeClass() {\n      Components.Html.root.classList.add(Glide.settings.classes[Glide.settings.type]);\n    },\n\n\n    /**\n     * Sets active class to current slide.\n     *\n     * @return {Void}\n     */\n    activeClass: function activeClass() {\n      var classes = Glide.settings.classes;\n      var slide = Components.Html.slides[Glide.index];\n\n      if (slide) {\n        slide.classList.add(classes.activeSlide);\n\n        siblings(slide).forEach(function (sibling) {\n          sibling.classList.remove(classes.activeSlide);\n        });\n      }\n    },\n\n\n    /**\n     * Removes HTML classes applied at building.\n     *\n     * @return {Void}\n     */\n    removeClasses: function removeClasses() {\n      var classes = Glide.settings.classes;\n\n      Components.Html.root.classList.remove(classes[Glide.settings.type]);\n\n      Components.Html.slides.forEach(function (sibling) {\n        sibling.classList.remove(classes.activeSlide);\n      });\n    }\n  };\n\n  /**\n   * Clear building classes:\n   * - on destroying to bring HTML to its initial state\n   * - on updating to remove classes before remounting component\n   */\n  Events.on(['destroy', 'update'], function () {\n    Build.removeClasses();\n  });\n\n  /**\n   * Remount component:\n   * - on resizing of the window to calculate new dimentions\n   * - on updating settings via API\n   */\n  Events.on(['resize', 'update'], function () {\n    Build.mount();\n  });\n\n  /**\n   * Swap active class of current slide:\n   * - after each move to the new index\n   */\n  Events.on('move.after', function () {\n    Build.activeClass();\n  });\n\n  return Build;\n}\n\nfunction Clones (Glide, Components, Events) {\n  var Clones = {\n    /**\n     * Create pattern map and collect slides to be cloned.\n     */\n    mount: function mount() {\n      this.items = [];\n\n      if (Glide.isType('carousel')) {\n        this.items = this.collect();\n      }\n    },\n\n\n    /**\n     * Collect clones with pattern.\n     *\n     * @return {Void}\n     */\n    collect: function collect() {\n      var items = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var slides = Components.Html.slides;\n      var _Glide$settings = Glide.settings,\n          perView = _Glide$settings.perView,\n          classes = _Glide$settings.classes;\n\n\n      var peekIncrementer = +!!Glide.settings.peek;\n      var part = perView + peekIncrementer;\n      var start = slides.slice(0, part);\n      var end = slides.slice(-part);\n\n      for (var r = 0; r < Math.max(1, Math.floor(perView / slides.length)); r++) {\n        for (var i = 0; i < start.length; i++) {\n          var clone = start[i].cloneNode(true);\n\n          clone.classList.add(classes.cloneSlide);\n\n          items.push(clone);\n        }\n\n        for (var _i = 0; _i < end.length; _i++) {\n          var _clone = end[_i].cloneNode(true);\n\n          _clone.classList.add(classes.cloneSlide);\n\n          items.unshift(_clone);\n        }\n      }\n\n      return items;\n    },\n\n\n    /**\n     * Append cloned slides with generated pattern.\n     *\n     * @return {Void}\n     */\n    append: function append() {\n      var items = this.items;\n      var _Components$Html = Components.Html,\n          wrapper = _Components$Html.wrapper,\n          slides = _Components$Html.slides;\n\n\n      var half = Math.floor(items.length / 2);\n      var prepend = items.slice(0, half).reverse();\n      var append = items.slice(half, items.length);\n      var width = Components.Sizes.slideWidth + 'px';\n\n      for (var i = 0; i < append.length; i++) {\n        wrapper.appendChild(append[i]);\n      }\n\n      for (var _i2 = 0; _i2 < prepend.length; _i2++) {\n        wrapper.insertBefore(prepend[_i2], slides[0]);\n      }\n\n      for (var _i3 = 0; _i3 < items.length; _i3++) {\n        items[_i3].style.width = width;\n      }\n    },\n\n\n    /**\n     * Remove all cloned slides.\n     *\n     * @return {Void}\n     */\n    remove: function remove() {\n      var items = this.items;\n\n\n      for (var i = 0; i < items.length; i++) {\n        Components.Html.wrapper.removeChild(items[i]);\n      }\n    }\n  };\n\n  define(Clones, 'grow', {\n    /**\n     * Gets additional dimentions value caused by clones.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      return (Components.Sizes.slideWidth + Components.Gaps.value) * Clones.items.length;\n    }\n  });\n\n  /**\n   * Append additional slide's clones:\n   * - while glide's type is `carousel`\n   */\n  Events.on('update', function () {\n    Clones.remove();\n    Clones.mount();\n    Clones.append();\n  });\n\n  /**\n   * Append additional slide's clones:\n   * - while glide's type is `carousel`\n   */\n  Events.on('build.before', function () {\n    if (Glide.isType('carousel')) {\n      Clones.append();\n    }\n  });\n\n  /**\n   * Remove clones HTMLElements:\n   * - on destroying, to bring HTML to its initial state\n   */\n  Events.on('destroy', function () {\n    Clones.remove();\n  });\n\n  return Clones;\n}\n\nvar EventsBinder = function () {\n  /**\n   * Construct a EventsBinder instance.\n   */\n  function EventsBinder() {\n    var listeners = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    classCallCheck(this, EventsBinder);\n\n    this.listeners = listeners;\n  }\n\n  /**\n   * Adds events listeners to arrows HTML elements.\n   *\n   * @param  {String|Array} events\n   * @param  {Element|Window|Document} el\n   * @param  {Function} closure\n   * @param  {Boolean|Object} capture\n   * @return {Void}\n   */\n\n\n  createClass(EventsBinder, [{\n    key: 'on',\n    value: function on(events, el, closure) {\n      var capture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      if (isString(events)) {\n        events = [events];\n      }\n\n      for (var i = 0; i < events.length; i++) {\n        this.listeners[events[i]] = closure;\n\n        el.addEventListener(events[i], this.listeners[events[i]], capture);\n      }\n    }\n\n    /**\n     * Removes event listeners from arrows HTML elements.\n     *\n     * @param  {String|Array} events\n     * @param  {Element|Window|Document} el\n     * @param  {Boolean|Object} capture\n     * @return {Void}\n     */\n\n  }, {\n    key: 'off',\n    value: function off(events, el) {\n      var capture = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (isString(events)) {\n        events = [events];\n      }\n\n      for (var i = 0; i < events.length; i++) {\n        el.removeEventListener(events[i], this.listeners[events[i]], capture);\n      }\n    }\n\n    /**\n     * Destroy collected listeners.\n     *\n     * @returns {Void}\n     */\n\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      delete this.listeners;\n    }\n  }]);\n  return EventsBinder;\n}();\n\nfunction Resize (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  var Resize = {\n    /**\n     * Initializes window bindings.\n     */\n    mount: function mount() {\n      this.bind();\n    },\n\n\n    /**\n     * Binds `rezsize` listener to the window.\n     * It's a costly event, so we are debouncing it.\n     *\n     * @return {Void}\n     */\n    bind: function bind() {\n      Binder.on('resize', window, throttle(function () {\n        Events.emit('resize');\n      }, Glide.settings.throttle));\n    },\n\n\n    /**\n     * Unbinds listeners from the window.\n     *\n     * @return {Void}\n     */\n    unbind: function unbind() {\n      Binder.off('resize', window);\n    }\n  };\n\n  /**\n   * Remove bindings from window:\n   * - on destroying, to remove added EventListener\n   */\n  Events.on('destroy', function () {\n    Resize.unbind();\n    Binder.destroy();\n  });\n\n  return Resize;\n}\n\nvar VALID_DIRECTIONS = ['ltr', 'rtl'];\nvar FLIPED_MOVEMENTS = {\n  '>': '<',\n  '<': '>',\n  '=': '='\n};\n\nfunction Direction (Glide, Components, Events) {\n  var Direction = {\n    /**\n     * Setups gap value based on settings.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      this.value = Glide.settings.direction;\n    },\n\n\n    /**\n     * Resolves pattern based on direction value\n     *\n     * @param {String} pattern\n     * @returns {String}\n     */\n    resolve: function resolve(pattern) {\n      var token = pattern.slice(0, 1);\n\n      if (this.is('rtl')) {\n        return pattern.split(token).join(FLIPED_MOVEMENTS[token]);\n      }\n\n      return pattern;\n    },\n\n\n    /**\n     * Checks value of direction mode.\n     *\n     * @param {String} direction\n     * @returns {Boolean}\n     */\n    is: function is(direction) {\n      return this.value === direction;\n    },\n\n\n    /**\n     * Applies direction class to the root HTML element.\n     *\n     * @return {Void}\n     */\n    addClass: function addClass() {\n      Components.Html.root.classList.add(Glide.settings.classes.direction[this.value]);\n    },\n\n\n    /**\n     * Removes direction class from the root HTML element.\n     *\n     * @return {Void}\n     */\n    removeClass: function removeClass() {\n      Components.Html.root.classList.remove(Glide.settings.classes.direction[this.value]);\n    }\n  };\n\n  define(Direction, 'value', {\n    /**\n     * Gets value of the direction.\n     *\n     * @returns {Number}\n     */\n    get: function get() {\n      return Direction._v;\n    },\n\n\n    /**\n     * Sets value of the direction.\n     *\n     * @param {String} value\n     * @return {Void}\n     */\n    set: function set(value) {\n      if (VALID_DIRECTIONS.indexOf(value) > -1) {\n        Direction._v = value;\n      } else {\n        warn('Direction value must be `ltr` or `rtl`');\n      }\n    }\n  });\n\n  /**\n   * Clear direction class:\n   * - on destroy to bring HTML to its initial state\n   * - on update to remove class before reappling bellow\n   */\n  Events.on(['destroy', 'update'], function () {\n    Direction.removeClass();\n  });\n\n  /**\n   * Remount component:\n   * - on update to reflect changes in direction value\n   */\n  Events.on('update', function () {\n    Direction.mount();\n  });\n\n  /**\n   * Apply direction class:\n   * - before building to apply class for the first time\n   * - on updating to reapply direction class that may changed\n   */\n  Events.on(['build.before', 'update'], function () {\n    Direction.addClass();\n  });\n\n  return Direction;\n}\n\n/**\n * Reflects value of glide movement.\n *\n * @param  {Object} Glide\n * @param  {Object} Components\n * @return {Object}\n */\nfunction Rtl (Glide, Components) {\n  return {\n    /**\n     * Negates the passed translate if glide is in RTL option.\n     *\n     * @param  {Number} translate\n     * @return {Number}\n     */\n    modify: function modify(translate) {\n      if (Components.Direction.is('rtl')) {\n        return -translate;\n      }\n\n      return translate;\n    }\n  };\n}\n\n/**\n * Updates glide movement with a `gap` settings.\n *\n * @param  {Object} Glide\n * @param  {Object} Components\n * @return {Object}\n */\nfunction Gap (Glide, Components) {\n  return {\n    /**\n     * Modifies passed translate value with number in the `gap` settings.\n     *\n     * @param  {Number} translate\n     * @return {Number}\n     */\n    modify: function modify(translate) {\n      return translate + Components.Gaps.value * Glide.index;\n    }\n  };\n}\n\n/**\n * Updates glide movement with width of additional clones width.\n *\n * @param  {Object} Glide\n * @param  {Object} Components\n * @return {Object}\n */\nfunction Grow (Glide, Components) {\n  return {\n    /**\n     * Adds to the passed translate width of the half of clones.\n     *\n     * @param  {Number} translate\n     * @return {Number}\n     */\n    modify: function modify(translate) {\n      return translate + Components.Clones.grow / 2;\n    }\n  };\n}\n\n/**\n * Updates glide movement with a `peek` settings.\n *\n * @param  {Object} Glide\n * @param  {Object} Components\n * @return {Object}\n */\nfunction Peeking (Glide, Components) {\n  return {\n    /**\n     * Modifies passed translate value with a `peek` setting.\n     *\n     * @param  {Number} translate\n     * @return {Number}\n     */\n    modify: function modify(translate) {\n      if (Glide.settings.focusAt >= 0) {\n        var peek = Components.Peek.value;\n\n        if (isObject(peek)) {\n          return translate - peek.before;\n        }\n\n        return translate - peek;\n      }\n\n      return translate;\n    }\n  };\n}\n\n/**\n * Updates glide movement with a `focusAt` settings.\n *\n * @param  {Object} Glide\n * @param  {Object} Components\n * @return {Object}\n */\nfunction Focusing (Glide, Components) {\n  return {\n    /**\n     * Modifies passed translate value with index in the `focusAt` setting.\n     *\n     * @param  {Number} translate\n     * @return {Number}\n     */\n    modify: function modify(translate) {\n      var gap = Components.Gaps.value;\n      var width = Components.Sizes.width;\n      var focusAt = Glide.settings.focusAt;\n      var slideWidth = Components.Sizes.slideWidth;\n\n      if (focusAt === 'center') {\n        return translate - (width / 2 - slideWidth / 2);\n      }\n\n      return translate - slideWidth * focusAt - gap * focusAt;\n    }\n  };\n}\n\n/**\n * Applies diffrent transformers on translate value.\n *\n * @param  {Object} Glide\n * @param  {Object} Components\n * @return {Object}\n */\nfunction mutator (Glide, Components, Events) {\n  /**\n   * Merge instance transformers with collection of default transformers.\n   * It's important that the Rtl component be last on the list,\n   * so it reflects all previous transformations.\n   *\n   * @type {Array}\n   */\n  var TRANSFORMERS = [Gap, Grow, Peeking, Focusing].concat(Glide._t, [Rtl]);\n\n  return {\n    /**\n     * Piplines translate value with registered transformers.\n     *\n     * @param  {Number} translate\n     * @return {Number}\n     */\n    mutate: function mutate(translate) {\n      for (var i = 0; i < TRANSFORMERS.length; i++) {\n        var transformer = TRANSFORMERS[i];\n\n        if (isFunction(transformer) && isFunction(transformer().modify)) {\n          translate = transformer(Glide, Components, Events).modify(translate);\n        } else {\n          warn('Transformer should be a function that returns an object with `modify()` method');\n        }\n      }\n\n      return translate;\n    }\n  };\n}\n\nfunction Translate (Glide, Components, Events) {\n  var Translate = {\n    /**\n     * Sets value of translate on HTML element.\n     *\n     * @param {Number} value\n     * @return {Void}\n     */\n    set: function set(value) {\n      var transform = mutator(Glide, Components).mutate(value);\n\n      Components.Html.wrapper.style.transform = 'translate3d(' + -1 * transform + 'px, 0px, 0px)';\n    },\n\n\n    /**\n     * Removes value of translate from HTML element.\n     *\n     * @return {Void}\n     */\n    remove: function remove() {\n      Components.Html.wrapper.style.transform = '';\n    }\n  };\n\n  /**\n   * Set new translate value:\n   * - on move to reflect index change\n   * - on updating via API to reflect possible changes in options\n   */\n  Events.on('move', function (context) {\n    var gap = Components.Gaps.value;\n    var length = Components.Sizes.length;\n    var width = Components.Sizes.slideWidth;\n\n    if (Glide.isType('carousel') && Components.Run.isOffset('<')) {\n      Components.Transition.after(function () {\n        Events.emit('translate.jump');\n\n        Translate.set(width * (length - 1));\n      });\n\n      return Translate.set(-width - gap * length);\n    }\n\n    if (Glide.isType('carousel') && Components.Run.isOffset('>')) {\n      Components.Transition.after(function () {\n        Events.emit('translate.jump');\n\n        Translate.set(0);\n      });\n\n      return Translate.set(width * length + gap * length);\n    }\n\n    return Translate.set(context.movement);\n  });\n\n  /**\n   * Remove translate:\n   * - on destroying to bring markup to its inital state\n   */\n  Events.on('destroy', function () {\n    Translate.remove();\n  });\n\n  return Translate;\n}\n\nfunction Transition (Glide, Components, Events) {\n  /**\n   * Holds inactivity status of transition.\n   * When true transition is not applied.\n   *\n   * @type {Boolean}\n   */\n  var disabled = false;\n\n  var Transition = {\n    /**\n     * Composes string of the CSS transition.\n     *\n     * @param {String} property\n     * @return {String}\n     */\n    compose: function compose(property) {\n      var settings = Glide.settings;\n\n      if (!disabled) {\n        return property + ' ' + this.duration + 'ms ' + settings.animationTimingFunc;\n      }\n\n      return property + ' 0ms ' + settings.animationTimingFunc;\n    },\n\n\n    /**\n     * Sets value of transition on HTML element.\n     *\n     * @param {String=} property\n     * @return {Void}\n     */\n    set: function set() {\n      var property = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'transform';\n\n      Components.Html.wrapper.style.transition = this.compose(property);\n    },\n\n\n    /**\n     * Removes value of transition from HTML element.\n     *\n     * @return {Void}\n     */\n    remove: function remove() {\n      Components.Html.wrapper.style.transition = '';\n    },\n\n\n    /**\n     * Runs callback after animation.\n     *\n     * @param  {Function} callback\n     * @return {Void}\n     */\n    after: function after(callback) {\n      setTimeout(function () {\n        callback();\n      }, this.duration);\n    },\n\n\n    /**\n     * Enable transition.\n     *\n     * @return {Void}\n     */\n    enable: function enable() {\n      disabled = false;\n\n      this.set();\n    },\n\n\n    /**\n     * Disable transition.\n     *\n     * @return {Void}\n     */\n    disable: function disable() {\n      disabled = true;\n\n      this.set();\n    }\n  };\n\n  define(Transition, 'duration', {\n    /**\n     * Gets duration of the transition based\n     * on currently running animation type.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      var settings = Glide.settings;\n\n      if (Glide.isType('slider') && Components.Run.offset) {\n        return settings.rewindDuration;\n      }\n\n      return settings.animationDuration;\n    }\n  });\n\n  /**\n   * Set transition `style` value:\n   * - on each moving, because it may be cleared by offset move\n   */\n  Events.on('move', function () {\n    Transition.set();\n  });\n\n  /**\n   * Disable transition:\n   * - before initial build to avoid transitioning from `0` to `startAt` index\n   * - while resizing window and recalculating dimentions\n   * - on jumping from offset transition at start and end edges in `carousel` type\n   */\n  Events.on(['build.before', 'resize', 'translate.jump'], function () {\n    Transition.disable();\n  });\n\n  /**\n   * Enable transition:\n   * - on each running, because it may be disabled by offset move\n   */\n  Events.on('run', function () {\n    Transition.enable();\n  });\n\n  /**\n   * Remove transition:\n   * - on destroying to bring markup to its inital state\n   */\n  Events.on('destroy', function () {\n    Transition.remove();\n  });\n\n  return Transition;\n}\n\n/**\n * Test via a getter in the options object to see\n * if the passive property is accessed.\n *\n * @see https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md#feature-detection\n */\n\nvar supportsPassive = false;\n\ntry {\n  var opts = Object.defineProperty({}, 'passive', {\n    get: function get() {\n      supportsPassive = true;\n    }\n  });\n\n  window.addEventListener('testPassive', null, opts);\n  window.removeEventListener('testPassive', null, opts);\n} catch (e) {}\n\nvar supportsPassive$1 = supportsPassive;\n\nvar START_EVENTS = ['touchstart', 'mousedown'];\nvar MOVE_EVENTS = ['touchmove', 'mousemove'];\nvar END_EVENTS = ['touchend', 'touchcancel', 'mouseup', 'mouseleave'];\nvar MOUSE_EVENTS = ['mousedown', 'mousemove', 'mouseup', 'mouseleave'];\n\nfunction Swipe (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  var swipeSin = 0;\n  var swipeStartX = 0;\n  var swipeStartY = 0;\n  var disabled = false;\n  var capture = supportsPassive$1 ? { passive: true } : false;\n\n  var Swipe = {\n    /**\n     * Initializes swipe bindings.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      this.bindSwipeStart();\n    },\n\n\n    /**\n     * Handler for `swipestart` event. Calculates entry points of the user's tap.\n     *\n     * @param {Object} event\n     * @return {Void}\n     */\n    start: function start(event) {\n      if (!disabled && !Glide.disabled) {\n        this.disable();\n\n        var swipe = this.touches(event);\n\n        swipeSin = null;\n        swipeStartX = toInt(swipe.pageX);\n        swipeStartY = toInt(swipe.pageY);\n\n        this.bindSwipeMove();\n        this.bindSwipeEnd();\n\n        Events.emit('swipe.start');\n      }\n    },\n\n\n    /**\n     * Handler for `swipemove` event. Calculates user's tap angle and distance.\n     *\n     * @param {Object} event\n     */\n    move: function move(event) {\n      if (!Glide.disabled) {\n        var _Glide$settings = Glide.settings,\n            touchAngle = _Glide$settings.touchAngle,\n            touchRatio = _Glide$settings.touchRatio,\n            classes = _Glide$settings.classes;\n\n\n        var swipe = this.touches(event);\n\n        var subExSx = toInt(swipe.pageX) - swipeStartX;\n        var subEySy = toInt(swipe.pageY) - swipeStartY;\n        var powEX = Math.abs(subExSx << 2);\n        var powEY = Math.abs(subEySy << 2);\n        var swipeHypotenuse = Math.sqrt(powEX + powEY);\n        var swipeCathetus = Math.sqrt(powEY);\n\n        swipeSin = Math.asin(swipeCathetus / swipeHypotenuse);\n\n        if (swipeSin * 180 / Math.PI < touchAngle) {\n          event.stopPropagation();\n\n          Components.Move.make(subExSx * toFloat(touchRatio));\n\n          Components.Html.root.classList.add(classes.dragging);\n\n          Events.emit('swipe.move');\n        } else {\n          return false;\n        }\n      }\n    },\n\n\n    /**\n     * Handler for `swipeend` event. Finitializes user's tap and decides about glide move.\n     *\n     * @param {Object} event\n     * @return {Void}\n     */\n    end: function end(event) {\n      if (!Glide.disabled) {\n        var settings = Glide.settings;\n\n        var swipe = this.touches(event);\n        var threshold = this.threshold(event);\n\n        var swipeDistance = swipe.pageX - swipeStartX;\n        var swipeDeg = swipeSin * 180 / Math.PI;\n        var steps = Math.round(swipeDistance / Components.Sizes.slideWidth);\n\n        this.enable();\n\n        if (swipeDistance > threshold && swipeDeg < settings.touchAngle) {\n          // While swipe is positive and greater than threshold move backward.\n          if (settings.perTouch) {\n            steps = Math.min(steps, toInt(settings.perTouch));\n          }\n\n          if (Components.Direction.is('rtl')) {\n            steps = -steps;\n          }\n\n          Components.Run.make(Components.Direction.resolve('<' + steps));\n        } else if (swipeDistance < -threshold && swipeDeg < settings.touchAngle) {\n          // While swipe is negative and lower than negative threshold move forward.\n          if (settings.perTouch) {\n            steps = Math.max(steps, -toInt(settings.perTouch));\n          }\n\n          if (Components.Direction.is('rtl')) {\n            steps = -steps;\n          }\n\n          Components.Run.make(Components.Direction.resolve('>' + steps));\n        } else {\n          // While swipe don't reach distance apply previous transform.\n          Components.Move.make();\n        }\n\n        Components.Html.root.classList.remove(settings.classes.dragging);\n\n        this.unbindSwipeMove();\n        this.unbindSwipeEnd();\n\n        Events.emit('swipe.end');\n      }\n    },\n\n\n    /**\n     * Binds swipe's starting event.\n     *\n     * @return {Void}\n     */\n    bindSwipeStart: function bindSwipeStart() {\n      var _this = this;\n\n      var settings = Glide.settings;\n\n      if (settings.swipeThreshold) {\n        Binder.on(START_EVENTS[0], Components.Html.wrapper, function (event) {\n          _this.start(event);\n        }, capture);\n      }\n\n      if (settings.dragThreshold) {\n        Binder.on(START_EVENTS[1], Components.Html.wrapper, function (event) {\n          _this.start(event);\n        }, capture);\n      }\n    },\n\n\n    /**\n     * Unbinds swipe's starting event.\n     *\n     * @return {Void}\n     */\n    unbindSwipeStart: function unbindSwipeStart() {\n      Binder.off(START_EVENTS[0], Components.Html.wrapper, capture);\n      Binder.off(START_EVENTS[1], Components.Html.wrapper, capture);\n    },\n\n\n    /**\n     * Binds swipe's moving event.\n     *\n     * @return {Void}\n     */\n    bindSwipeMove: function bindSwipeMove() {\n      var _this2 = this;\n\n      Binder.on(MOVE_EVENTS, Components.Html.wrapper, throttle(function (event) {\n        _this2.move(event);\n      }, Glide.settings.throttle), capture);\n    },\n\n\n    /**\n     * Unbinds swipe's moving event.\n     *\n     * @return {Void}\n     */\n    unbindSwipeMove: function unbindSwipeMove() {\n      Binder.off(MOVE_EVENTS, Components.Html.wrapper, capture);\n    },\n\n\n    /**\n     * Binds swipe's ending event.\n     *\n     * @return {Void}\n     */\n    bindSwipeEnd: function bindSwipeEnd() {\n      var _this3 = this;\n\n      Binder.on(END_EVENTS, Components.Html.wrapper, function (event) {\n        _this3.end(event);\n      });\n    },\n\n\n    /**\n     * Unbinds swipe's ending event.\n     *\n     * @return {Void}\n     */\n    unbindSwipeEnd: function unbindSwipeEnd() {\n      Binder.off(END_EVENTS, Components.Html.wrapper);\n    },\n\n\n    /**\n     * Normalizes event touches points accorting to different types.\n     *\n     * @param {Object} event\n     */\n    touches: function touches(event) {\n      if (MOUSE_EVENTS.indexOf(event.type) > -1) {\n        return event;\n      }\n\n      return event.touches[0] || event.changedTouches[0];\n    },\n\n\n    /**\n     * Gets value of minimum swipe distance settings based on event type.\n     *\n     * @return {Number}\n     */\n    threshold: function threshold(event) {\n      var settings = Glide.settings;\n\n      if (MOUSE_EVENTS.indexOf(event.type) > -1) {\n        return settings.dragThreshold;\n      }\n\n      return settings.swipeThreshold;\n    },\n\n\n    /**\n     * Enables swipe event.\n     *\n     * @return {self}\n     */\n    enable: function enable() {\n      disabled = false;\n\n      Components.Transition.enable();\n\n      return this;\n    },\n\n\n    /**\n     * Disables swipe event.\n     *\n     * @return {self}\n     */\n    disable: function disable() {\n      disabled = true;\n\n      Components.Transition.disable();\n\n      return this;\n    }\n  };\n\n  /**\n   * Add component class:\n   * - after initial building\n   */\n  Events.on('build.after', function () {\n    Components.Html.root.classList.add(Glide.settings.classes.swipeable);\n  });\n\n  /**\n   * Remove swiping bindings:\n   * - on destroying, to remove added EventListeners\n   */\n  Events.on('destroy', function () {\n    Swipe.unbindSwipeStart();\n    Swipe.unbindSwipeMove();\n    Swipe.unbindSwipeEnd();\n    Binder.destroy();\n  });\n\n  return Swipe;\n}\n\nfunction Images (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  var Images = {\n    /**\n     * Binds listener to glide wrapper.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      this.bind();\n    },\n\n\n    /**\n     * Binds `dragstart` event on wrapper to prevent dragging images.\n     *\n     * @return {Void}\n     */\n    bind: function bind() {\n      Binder.on('dragstart', Components.Html.wrapper, this.dragstart);\n    },\n\n\n    /**\n     * Unbinds `dragstart` event on wrapper.\n     *\n     * @return {Void}\n     */\n    unbind: function unbind() {\n      Binder.off('dragstart', Components.Html.wrapper);\n    },\n\n\n    /**\n     * Event handler. Prevents dragging.\n     *\n     * @return {Void}\n     */\n    dragstart: function dragstart(event) {\n      event.preventDefault();\n    }\n  };\n\n  /**\n   * Remove bindings from images:\n   * - on destroying, to remove added EventListeners\n   */\n  Events.on('destroy', function () {\n    Images.unbind();\n    Binder.destroy();\n  });\n\n  return Images;\n}\n\nfunction Anchors (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  /**\n   * Holds detaching status of anchors.\n   * Prevents detaching of already detached anchors.\n   *\n   * @private\n   * @type {Boolean}\n   */\n  var detached = false;\n\n  /**\n   * Holds preventing status of anchors.\n   * If `true` redirection after click will be disabled.\n   *\n   * @private\n   * @type {Boolean}\n   */\n  var prevented = false;\n\n  var Anchors = {\n    /**\n     * Setups a initial state of anchors component.\n     *\n     * @returns {Void}\n     */\n    mount: function mount() {\n      /**\n       * Holds collection of anchors elements.\n       *\n       * @private\n       * @type {HTMLCollection}\n       */\n      this._a = Components.Html.wrapper.querySelectorAll('a');\n\n      this.bind();\n    },\n\n\n    /**\n     * Binds events to anchors inside a track.\n     *\n     * @return {Void}\n     */\n    bind: function bind() {\n      Binder.on('click', Components.Html.wrapper, this.click);\n    },\n\n\n    /**\n     * Unbinds events attached to anchors inside a track.\n     *\n     * @return {Void}\n     */\n    unbind: function unbind() {\n      Binder.off('click', Components.Html.wrapper);\n    },\n\n\n    /**\n     * Handler for click event. Prevents clicks when glide is in `prevent` status.\n     *\n     * @param  {Object} event\n     * @return {Void}\n     */\n    click: function click(event) {\n      if (prevented) {\n        event.stopPropagation();\n        event.preventDefault();\n      }\n    },\n\n\n    /**\n     * Detaches anchors click event inside glide.\n     *\n     * @return {self}\n     */\n    detach: function detach() {\n      prevented = true;\n\n      if (!detached) {\n        for (var i = 0; i < this.items.length; i++) {\n          this.items[i].draggable = false;\n\n          this.items[i].setAttribute('data-href', this.items[i].getAttribute('href'));\n\n          this.items[i].removeAttribute('href');\n        }\n\n        detached = true;\n      }\n\n      return this;\n    },\n\n\n    /**\n     * Attaches anchors click events inside glide.\n     *\n     * @return {self}\n     */\n    attach: function attach() {\n      prevented = false;\n\n      if (detached) {\n        for (var i = 0; i < this.items.length; i++) {\n          this.items[i].draggable = true;\n\n          this.items[i].setAttribute('href', this.items[i].getAttribute('data-href'));\n        }\n\n        detached = false;\n      }\n\n      return this;\n    }\n  };\n\n  define(Anchors, 'items', {\n    /**\n     * Gets collection of the arrows HTML elements.\n     *\n     * @return {HTMLElement[]}\n     */\n    get: function get() {\n      return Anchors._a;\n    }\n  });\n\n  /**\n   * Detach anchors inside slides:\n   * - on swiping, so they won't redirect to its `href` attributes\n   */\n  Events.on('swipe.move', function () {\n    Anchors.detach();\n  });\n\n  /**\n   * Attach anchors inside slides:\n   * - after swiping and transitions ends, so they can redirect after click again\n   */\n  Events.on('swipe.end', function () {\n    Components.Transition.after(function () {\n      Anchors.attach();\n    });\n  });\n\n  /**\n   * Unbind anchors inside slides:\n   * - on destroying, to bring anchors to its initial state\n   */\n  Events.on('destroy', function () {\n    Anchors.attach();\n    Anchors.unbind();\n    Binder.destroy();\n  });\n\n  return Anchors;\n}\n\nvar NAV_SELECTOR = '[data-glide-el=\"controls[nav]\"]';\nvar CONTROLS_SELECTOR = '[data-glide-el^=\"controls\"]';\n\nfunction Controls (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  var capture = supportsPassive$1 ? { passive: true } : false;\n\n  var Controls = {\n    /**\n     * Inits arrows. Binds events listeners\n     * to the arrows HTML elements.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      /**\n       * Collection of navigation HTML elements.\n       *\n       * @private\n       * @type {HTMLCollection}\n       */\n      this._n = Components.Html.root.querySelectorAll(NAV_SELECTOR);\n\n      /**\n       * Collection of controls HTML elements.\n       *\n       * @private\n       * @type {HTMLCollection}\n       */\n      this._c = Components.Html.root.querySelectorAll(CONTROLS_SELECTOR);\n\n      this.addBindings();\n    },\n\n\n    /**\n     * Sets active class to current slide.\n     *\n     * @return {Void}\n     */\n    setActive: function setActive() {\n      for (var i = 0; i < this._n.length; i++) {\n        this.addClass(this._n[i].children);\n      }\n    },\n\n\n    /**\n     * Removes active class to current slide.\n     *\n     * @return {Void}\n     */\n    removeActive: function removeActive() {\n      for (var i = 0; i < this._n.length; i++) {\n        this.removeClass(this._n[i].children);\n      }\n    },\n\n\n    /**\n     * Toggles active class on items inside navigation.\n     *\n     * @param  {HTMLElement} controls\n     * @return {Void}\n     */\n    addClass: function addClass(controls) {\n      var settings = Glide.settings;\n      var item = controls[Glide.index];\n\n      if (item) {\n        item.classList.add(settings.classes.activeNav);\n\n        siblings(item).forEach(function (sibling) {\n          sibling.classList.remove(settings.classes.activeNav);\n        });\n      }\n    },\n\n\n    /**\n     * Removes active class from active control.\n     *\n     * @param  {HTMLElement} controls\n     * @return {Void}\n     */\n    removeClass: function removeClass(controls) {\n      var item = controls[Glide.index];\n\n      if (item) {\n        item.classList.remove(Glide.settings.classes.activeNav);\n      }\n    },\n\n\n    /**\n     * Adds handles to the each group of controls.\n     *\n     * @return {Void}\n     */\n    addBindings: function addBindings() {\n      for (var i = 0; i < this._c.length; i++) {\n        this.bind(this._c[i].children);\n      }\n    },\n\n\n    /**\n     * Removes handles from the each group of controls.\n     *\n     * @return {Void}\n     */\n    removeBindings: function removeBindings() {\n      for (var i = 0; i < this._c.length; i++) {\n        this.unbind(this._c[i].children);\n      }\n    },\n\n\n    /**\n     * Binds events to arrows HTML elements.\n     *\n     * @param {HTMLCollection} elements\n     * @return {Void}\n     */\n    bind: function bind(elements) {\n      for (var i = 0; i < elements.length; i++) {\n        Binder.on('click', elements[i], this.click);\n        Binder.on('touchstart', elements[i], this.click, capture);\n      }\n    },\n\n\n    /**\n     * Unbinds events binded to the arrows HTML elements.\n     *\n     * @param {HTMLCollection} elements\n     * @return {Void}\n     */\n    unbind: function unbind(elements) {\n      for (var i = 0; i < elements.length; i++) {\n        Binder.off(['click', 'touchstart'], elements[i]);\n      }\n    },\n\n\n    /**\n     * Handles `click` event on the arrows HTML elements.\n     * Moves slider in driection precised in\n     * `data-glide-dir` attribute.\n     *\n     * @param {Object} event\n     * @return {Void}\n     */\n    click: function click(event) {\n      event.preventDefault();\n\n      Components.Run.make(Components.Direction.resolve(event.currentTarget.getAttribute('data-glide-dir')));\n    }\n  };\n\n  define(Controls, 'items', {\n    /**\n     * Gets collection of the controls HTML elements.\n     *\n     * @return {HTMLElement[]}\n     */\n    get: function get() {\n      return Controls._c;\n    }\n  });\n\n  /**\n   * Swap active class of current navigation item:\n   * - after mounting to set it to initial index\n   * - after each move to the new index\n   */\n  Events.on(['mount.after', 'move.after'], function () {\n    Controls.setActive();\n  });\n\n  /**\n   * Remove bindings and HTML Classes:\n   * - on destroying, to bring markup to its initial state\n   */\n  Events.on('destroy', function () {\n    Controls.removeBindings();\n    Controls.removeActive();\n    Binder.destroy();\n  });\n\n  return Controls;\n}\n\nfunction Keyboard (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  var Keyboard = {\n    /**\n     * Binds keyboard events on component mount.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      if (Glide.settings.keyboard) {\n        this.bind();\n      }\n    },\n\n\n    /**\n     * Adds keyboard press events.\n     *\n     * @return {Void}\n     */\n    bind: function bind() {\n      Binder.on('keyup', document, this.press);\n    },\n\n\n    /**\n     * Removes keyboard press events.\n     *\n     * @return {Void}\n     */\n    unbind: function unbind() {\n      Binder.off('keyup', document);\n    },\n\n\n    /**\n     * Handles keyboard's arrows press and moving glide foward and backward.\n     *\n     * @param  {Object} event\n     * @return {Void}\n     */\n    press: function press(event) {\n      if (event.keyCode === 39) {\n        Components.Run.make(Components.Direction.resolve('>'));\n      }\n\n      if (event.keyCode === 37) {\n        Components.Run.make(Components.Direction.resolve('<'));\n      }\n    }\n  };\n\n  /**\n   * Remove bindings from keyboard:\n   * - on destroying to remove added events\n   * - on updating to remove events before remounting\n   */\n  Events.on(['destroy', 'update'], function () {\n    Keyboard.unbind();\n  });\n\n  /**\n   * Remount component\n   * - on updating to reflect potential changes in settings\n   */\n  Events.on('update', function () {\n    Keyboard.mount();\n  });\n\n  /**\n   * Destroy binder:\n   * - on destroying to remove listeners\n   */\n  Events.on('destroy', function () {\n    Binder.destroy();\n  });\n\n  return Keyboard;\n}\n\nfunction Autoplay (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  var Autoplay = {\n    /**\n     * Initializes autoplaying and events.\n     *\n     * @return {Void}\n     */\n    mount: function mount() {\n      this.start();\n\n      if (Glide.settings.hoverpause) {\n        this.bind();\n      }\n    },\n\n\n    /**\n     * Starts autoplaying in configured interval.\n     *\n     * @param {Boolean|Number} force Run autoplaying with passed interval regardless of `autoplay` settings\n     * @return {Void}\n     */\n    start: function start() {\n      var _this = this;\n\n      if (Glide.settings.autoplay) {\n        if (isUndefined(this._i)) {\n          this._i = setInterval(function () {\n            _this.stop();\n\n            Components.Run.make('>');\n\n            _this.start();\n          }, this.time);\n        }\n      }\n    },\n\n\n    /**\n     * Stops autorunning of the glide.\n     *\n     * @return {Void}\n     */\n    stop: function stop() {\n      this._i = clearInterval(this._i);\n    },\n\n\n    /**\n     * Stops autoplaying while mouse is over glide's area.\n     *\n     * @return {Void}\n     */\n    bind: function bind() {\n      var _this2 = this;\n\n      Binder.on('mouseover', Components.Html.root, function () {\n        _this2.stop();\n      });\n\n      Binder.on('mouseout', Components.Html.root, function () {\n        _this2.start();\n      });\n    },\n\n\n    /**\n     * Unbind mouseover events.\n     *\n     * @returns {Void}\n     */\n    unbind: function unbind() {\n      Binder.off(['mouseover', 'mouseout'], Components.Html.root);\n    }\n  };\n\n  define(Autoplay, 'time', {\n    /**\n     * Gets time period value for the autoplay interval. Prioritizes\n     * times in `data-glide-autoplay` attrubutes over options.\n     *\n     * @return {Number}\n     */\n    get: function get() {\n      var autoplay = Components.Html.slides[Glide.index].getAttribute('data-glide-autoplay');\n\n      if (autoplay) {\n        return toInt(autoplay);\n      }\n\n      return toInt(Glide.settings.autoplay);\n    }\n  });\n\n  /**\n   * Stop autoplaying and unbind events:\n   * - on destroying, to clear defined interval\n   * - on updating via API to reset interval that may changed\n   */\n  Events.on(['destroy', 'update'], function () {\n    Autoplay.unbind();\n  });\n\n  /**\n   * Stop autoplaying:\n   * - before each run, to restart autoplaying\n   * - on pausing via API\n   * - on destroying, to clear defined interval\n   * - while starting a swipe\n   * - on updating via API to reset interval that may changed\n   */\n  Events.on(['run.before', 'pause', 'destroy', 'swipe.start', 'update'], function () {\n    Autoplay.stop();\n  });\n\n  /**\n   * Start autoplaying:\n   * - after each run, to restart autoplaying\n   * - on playing via API\n   * - while ending a swipe\n   */\n  Events.on(['run.after', 'play', 'swipe.end'], function () {\n    Autoplay.start();\n  });\n\n  /**\n   * Remount autoplaying:\n   * - on updating via API to reset interval that may changed\n   */\n  Events.on('update', function () {\n    Autoplay.mount();\n  });\n\n  /**\n   * Destroy a binder:\n   * - on destroying glide instance to clearup listeners\n   */\n  Events.on('destroy', function () {\n    Binder.destroy();\n  });\n\n  return Autoplay;\n}\n\n/**\n * Sorts keys of breakpoint object so they will be ordered from lower to bigger.\n *\n * @param {Object} points\n * @returns {Object}\n */\nfunction sortBreakpoints(points) {\n  if (isObject(points)) {\n    return sortKeys(points);\n  } else {\n    warn('Breakpoints option must be an object');\n  }\n\n  return {};\n}\n\nfunction Breakpoints (Glide, Components, Events) {\n  /**\n   * Instance of the binder for DOM Events.\n   *\n   * @type {EventsBinder}\n   */\n  var Binder = new EventsBinder();\n\n  /**\n   * Holds reference to settings.\n   *\n   * @type {Object}\n   */\n  var settings = Glide.settings;\n\n  /**\n   * Holds reference to breakpoints object in settings. Sorts breakpoints\n   * from smaller to larger. It is required in order to proper\n   * matching currently active breakpoint settings.\n   *\n   * @type {Object}\n   */\n  var points = sortBreakpoints(settings.breakpoints);\n\n  /**\n   * Cache initial settings before overwritting.\n   *\n   * @type {Object}\n   */\n  var defaults = _extends({}, settings);\n\n  var Breakpoints = {\n    /**\n     * Matches settings for currectly matching media breakpoint.\n     *\n     * @param {Object} points\n     * @returns {Object}\n     */\n    match: function match(points) {\n      if (typeof window.matchMedia !== 'undefined') {\n        for (var point in points) {\n          if (points.hasOwnProperty(point)) {\n            if (window.matchMedia('(max-width: ' + point + 'px)').matches) {\n              return points[point];\n            }\n          }\n        }\n      }\n\n      return defaults;\n    }\n  };\n\n  /**\n   * Overwrite instance settings with currently matching breakpoint settings.\n   * This happens right after component initialization.\n   */\n  _extends(settings, Breakpoints.match(points));\n\n  /**\n   * Update glide with settings of matched brekpoint:\n   * - window resize to update slider\n   */\n  Binder.on('resize', window, throttle(function () {\n    Glide.settings = mergeOptions(settings, Breakpoints.match(points));\n  }, Glide.settings.throttle));\n\n  /**\n   * Resort and update default settings:\n   * - on reinit via API, so breakpoint matching will be performed with options\n   */\n  Events.on('update', function () {\n    points = sortBreakpoints(points);\n\n    defaults = _extends({}, settings);\n  });\n\n  /**\n   * Unbind resize listener:\n   * - on destroying, to bring markup to its initial state\n   */\n  Events.on('destroy', function () {\n    Binder.off('resize', window);\n  });\n\n  return Breakpoints;\n}\n\nvar COMPONENTS = {\n  // Required\n  Html: Html,\n  Translate: Translate,\n  Transition: Transition,\n  Direction: Direction,\n  Peek: Peek,\n  Sizes: Sizes,\n  Gaps: Gaps,\n  Move: Move,\n  Clones: Clones,\n  Resize: Resize,\n  Build: Build,\n  Run: Run,\n\n  // Optional\n  Swipe: Swipe,\n  Images: Images,\n  Anchors: Anchors,\n  Controls: Controls,\n  Keyboard: Keyboard,\n  Autoplay: Autoplay,\n  Breakpoints: Breakpoints\n};\n\nvar Glide$1 = function (_Core) {\n  inherits(Glide$$1, _Core);\n\n  function Glide$$1() {\n    classCallCheck(this, Glide$$1);\n    return possibleConstructorReturn(this, (Glide$$1.__proto__ || Object.getPrototypeOf(Glide$$1)).apply(this, arguments));\n  }\n\n  createClass(Glide$$1, [{\n    key: 'mount',\n    value: function mount() {\n      var extensions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      return get(Glide$$1.prototype.__proto__ || Object.getPrototypeOf(Glide$$1.prototype), 'mount', this).call(this, _extends({}, COMPONENTS, extensions));\n    }\n  }]);\n  return Glide$$1;\n}(Glide);\n\nexport default Glide$1;\n","/*!\n * baguetteBox.js\n * @author  feimosi\n * @version 1.11.0\n * @url https://github.com/feimosi/baguetteBox.js\n */\n!function(e,t){\"use strict\";\"function\"==typeof define&&define.amd?define(t):\"object\"==typeof exports?module.exports=t():e.baguetteBox=t()}(this,function(){\"use strict\";var s,l,u,c,d,f='<svg width=\"44\" height=\"60\"><polyline points=\"30 10 10 30 30 50\" stroke=\"rgba(255,255,255,0.5)\" stroke-width=\"4\"stroke-linecap=\"butt\" fill=\"none\" stroke-linejoin=\"round\"/></svg>',g='<svg width=\"44\" height=\"60\"><polyline points=\"14 10 34 30 14 50\" stroke=\"rgba(255,255,255,0.5)\" stroke-width=\"4\"stroke-linecap=\"butt\" fill=\"none\" stroke-linejoin=\"round\"/></svg>',p='<svg width=\"30\" height=\"30\"><g stroke=\"rgb(160,160,160)\" stroke-width=\"4\"><line x1=\"5\" y1=\"5\" x2=\"25\" y2=\"25\"/><line x1=\"5\" y1=\"25\" x2=\"25\" y2=\"5\"/></g></svg>',b={},m={captions:!0,buttons:\"auto\",fullScreen:!1,noScrollbars:!1,bodyClass:\"baguetteBox-open\",titleTag:!1,async:!1,preload:2,animation:\"slideIn\",afterShow:null,afterHide:null,onChange:null,overlayBackgroundColor:\"rgba(0,0,0,.8)\"},v={},h=[],o=0,n=!1,i={},a=!1,y=/.+\\.(gif|jpe?g|png|webp)/i,w={},k=[],r=null,x=function(e){-1!==e.target.id.indexOf(\"baguette-img\")&&j()},C=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,D()},E=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,X()},B=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,j()},T=function(e){i.count++,1<i.count&&(i.multitouch=!0),i.startX=e.changedTouches[0].pageX,i.startY=e.changedTouches[0].pageY},N=function(e){if(!a&&!i.multitouch){e.preventDefault?e.preventDefault():e.returnValue=!1;var t=e.touches[0]||e.changedTouches[0];40<t.pageX-i.startX?(a=!0,D()):t.pageX-i.startX<-40?(a=!0,X()):100<i.startY-t.pageY&&j()}},L=function(){i.count--,i.count<=0&&(i.multitouch=!1),a=!1},A=function(){L()},P=function(e){\"block\"===s.style.display&&s.contains&&!s.contains(e.target)&&(e.stopPropagation(),Y())};function S(e){if(w.hasOwnProperty(e)){var t=w[e].galleries;[].forEach.call(t,function(e){[].forEach.call(e,function(e){W(e.imageElement,\"click\",e.eventHandler)}),h===e&&(h=[])}),delete w[e]}}function F(e){switch(e.keyCode){case 37:D();break;case 39:X();break;case 27:j();break;case 36:!function t(e){e&&e.preventDefault();return M(0)}(e);break;case 35:!function n(e){e&&e.preventDefault();return M(h.length-1)}(e)}}function H(e,t){if(h!==e){for(h=e,function r(e){e||(e={});for(var t in m)b[t]=m[t],\"undefined\"!=typeof e[t]&&(b[t]=e[t]);l.style.transition=l.style.webkitTransition=\"fadeIn\"===b.animation?\"opacity .4s ease\":\"slideIn\"===b.animation?\"\":\"none\",\"auto\"===b.buttons&&(\"ontouchstart\"in window||1===h.length)&&(b.buttons=!1);u.style.display=c.style.display=b.buttons?\"\":\"none\";try{s.style.backgroundColor=b.overlayBackgroundColor}catch(n){}}(t);l.firstChild;)l.removeChild(l.firstChild);for(var n,o=[],i=[],a=k.length=0;a<e.length;a++)(n=J(\"div\")).className=\"full-image\",n.id=\"baguette-img-\"+a,k.push(n),o.push(\"baguetteBox-figure-\"+a),i.push(\"baguetteBox-figcaption-\"+a),l.appendChild(k[a]);s.setAttribute(\"aria-labelledby\",o.join(\" \")),s.setAttribute(\"aria-describedby\",i.join(\" \"))}}function I(e){b.noScrollbars&&(document.documentElement.style.overflowY=\"hidden\",document.body.style.overflowY=\"scroll\"),\"block\"!==s.style.display&&(U(document,\"keydown\",F),i={count:0,startX:null,startY:null},q(o=e,function(){z(o),V(o)}),R(),s.style.display=\"block\",b.fullScreen&&function t(){s.requestFullscreen?s.requestFullscreen():s.webkitRequestFullscreen?s.webkitRequestFullscreen():s.mozRequestFullScreen&&s.mozRequestFullScreen()}(),setTimeout(function(){s.className=\"visible\",b.bodyClass&&document.body.classList&&document.body.classList.add(b.bodyClass),b.afterShow&&b.afterShow()},50),b.onChange&&b.onChange(o,k.length),r=document.activeElement,Y(),n=!0)}function Y(){b.buttons?u.focus():d.focus()}function j(){b.noScrollbars&&(document.documentElement.style.overflowY=\"auto\",document.body.style.overflowY=\"auto\"),\"none\"!==s.style.display&&(W(document,\"keydown\",F),s.className=\"\",setTimeout(function(){s.style.display=\"none\",document.fullscreen&&function e(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}(),b.bodyClass&&document.body.classList&&document.body.classList.remove(b.bodyClass),b.afterHide&&b.afterHide(),r&&r.focus(),n=!1},500))}function q(t,n){var e=k[t],o=h[t];if(void 0!==e&&void 0!==o)if(e.getElementsByTagName(\"img\")[0])n&&n();else{var i=o.imageElement,a=i.getElementsByTagName(\"img\")[0],r=\"function\"==typeof b.captions?b.captions.call(h,i):i.getAttribute(\"data-caption\")||i.title,s=function d(e){var t=e.href;if(e.dataset){var n=[];for(var o in e.dataset)\"at-\"!==o.substring(0,3)||isNaN(o.substring(3))||(n[o.replace(\"at-\",\"\")]=e.dataset[o]);for(var i=Object.keys(n).sort(function(e,t){return parseInt(e,10)<parseInt(t,10)?-1:1}),a=window.innerWidth*window.devicePixelRatio,r=0;r<i.length-1&&i[r]<a;)r++;t=n[i[r]]||t}return t}(i),l=J(\"figure\");if(l.id=\"baguetteBox-figure-\"+t,l.innerHTML='<div class=\"baguetteBox-spinner\"><div class=\"baguetteBox-double-bounce1\"></div><div class=\"baguetteBox-double-bounce2\"></div></div>',b.captions&&r){var u=J(\"figcaption\");u.id=\"baguetteBox-figcaption-\"+t,u.innerHTML=r,l.appendChild(u)}e.appendChild(l);var c=J(\"img\");c.onload=function(){var e=document.querySelector(\"#baguette-img-\"+t+\" .baguetteBox-spinner\");l.removeChild(e),!b.async&&n&&n()},c.setAttribute(\"src\",s),c.alt=a&&a.alt||\"\",b.titleTag&&r&&(c.title=r),l.appendChild(c),b.async&&n&&n()}}function X(){return M(o+1)}function D(){return M(o-1)}function M(e,t){return!n&&0<=e&&e<t.length?(H(t,b),I(e),!0):e<0?(b.animation&&O(\"left\"),!1):e>=k.length?(b.animation&&O(\"right\"),!1):(q(o=e,function(){z(o),V(o)}),R(),b.onChange&&b.onChange(o,k.length),!0)}function O(e){l.className=\"bounce-from-\"+e,setTimeout(function(){l.className=\"\"},400)}function R(){var e=100*-o+\"%\";\"fadeIn\"===b.animation?(l.style.opacity=0,setTimeout(function(){v.transforms?l.style.transform=l.style.webkitTransform=\"translate3d(\"+e+\",0,0)\":l.style.left=e,l.style.opacity=1},400)):v.transforms?l.style.transform=l.style.webkitTransform=\"translate3d(\"+e+\",0,0)\":l.style.left=e}function z(e){e-o>=b.preload||q(e+1,function(){z(e+1)})}function V(e){o-e>=b.preload||q(e-1,function(){V(e-1)})}function U(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent(\"on\"+t,function(e){(e=e||window.event).target=e.target||e.srcElement,n(e)})}function W(e,t,n,o){e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent(\"on\"+t,n)}function G(e){return document.getElementById(e)}function J(e){return document.createElement(e)}return[].forEach||(Array.prototype.forEach=function(e,t){for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)}),[].filter||(Array.prototype.filter=function(e,t,n,o,i){for(n=this,o=[],i=0;i<n.length;i++)e.call(t,n[i],i,n)&&o.push(n[i]);return o}),{run:function K(e,t){return v.transforms=function n(){var e=J(\"div\");return\"undefined\"!=typeof e.style.perspective||\"undefined\"!=typeof e.style.webkitPerspective}(),v.svg=function o(){var e=J(\"div\");return e.innerHTML=\"<svg/>\",\"http://www.w3.org/2000/svg\"===(e.firstChild&&e.firstChild.namespaceURI)}(),v.passiveEvents=function i(){var e=!1;try{var t=Object.defineProperty({},\"passive\",{get:function(){e=!0}});window.addEventListener(\"test\",null,t)}catch(n){}return e}(),function a(){if(s=G(\"baguetteBox-overlay\"))return l=G(\"baguetteBox-slider\"),u=G(\"previous-button\"),c=G(\"next-button\"),void(d=G(\"close-button\"));(s=J(\"div\")).setAttribute(\"role\",\"dialog\"),s.id=\"baguetteBox-overlay\",document.getElementsByTagName(\"body\")[0].appendChild(s),(l=J(\"div\")).id=\"baguetteBox-slider\",s.appendChild(l),(u=J(\"button\")).setAttribute(\"type\",\"button\"),u.id=\"previous-button\",u.setAttribute(\"aria-label\",\"Previous\"),u.innerHTML=v.svg?f:\"&lt;\",s.appendChild(u),(c=J(\"button\")).setAttribute(\"type\",\"button\"),c.id=\"next-button\",c.setAttribute(\"aria-label\",\"Next\"),c.innerHTML=v.svg?g:\"&gt;\",s.appendChild(c),(d=J(\"button\")).setAttribute(\"type\",\"button\"),d.id=\"close-button\",d.setAttribute(\"aria-label\",\"Close\"),d.innerHTML=v.svg?p:\"&times;\",s.appendChild(d),u.className=c.className=d.className=\"baguetteBox-button\",function t(){var e=v.passiveEvents?{passive:!0}:null;U(s,\"click\",x),U(u,\"click\",C),U(c,\"click\",E),U(d,\"click\",B),U(l,\"contextmenu\",A),U(s,\"touchstart\",T,e),U(s,\"touchmove\",N,e),U(s,\"touchend\",L),U(document,\"focus\",P,!0)}()}(),S(e),function r(e,a){var t=document.querySelectorAll(e),n={galleries:[],nodeList:t};return w[e]=n,[].forEach.call(t,function(e){a&&a.filter&&(y=a.filter);var t=[];if(t=\"A\"===e.tagName?[e]:e.getElementsByTagName(\"a\"),0!==(t=[].filter.call(t,function(e){if(-1===e.className.indexOf(a&&a.ignoreClass))return y.test(e.href)})).length){var i=[];[].forEach.call(t,function(e,t){var n=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,H(i,a),I(t)},o={eventHandler:n,imageElement:e};U(e,\"click\",n),i.push(o)}),n.galleries.push(i)}}),n.galleries}(e,t)},show:M,showNext:X,showPrevious:D,hide:j,destroy:function e(){!function t(){var e=v.passiveEvents?{passive:!0}:null;W(s,\"click\",x),W(u,\"click\",C),W(c,\"click\",E),W(d,\"click\",B),W(l,\"contextmenu\",A),W(s,\"touchstart\",T,e),W(s,\"touchmove\",N,e),W(s,\"touchend\",L),W(document,\"focus\",P,!0)}(),function n(){for(var e in w)w.hasOwnProperty(e)&&S(e)}(),W(document,\"keydown\",F),document.getElementsByTagName(\"body\")[0].removeChild(document.getElementById(\"baguetteBox-overlay\")),w={},h=[],o=0}}});","import {g} from './core/utils.js';\r\n\r\nimport InputMask from './controls/input.js';\r\n\r\nimport Masked from './masked/base.js';\r\nimport MaskedPattern from './masked/pattern.js';\r\nimport MaskedEnum from './masked/enum.js';\r\nimport MaskedRange from './masked/range.js';\r\nimport MaskedNumber from './masked/number.js';\r\nimport MaskedDate from './masked/date.js';\r\nimport MaskedRegExp from './masked/regexp.js';\r\nimport MaskedFunction from './masked/function.js';\r\nimport MaskedDynamic from './masked/dynamic.js';\r\nimport createMask from './masked/factory.js';\r\nimport MaskElement from './controls/mask-element.js';\r\nimport HTMLMaskElement from './controls/html-mask-element.js';\r\n\r\n\r\n/**\r\n * Applies mask on element.\r\n * @constructor\r\n * @param {HTMLInputElement|HTMLTextAreaElement|MaskElement} el - Element to apply mask\r\n * @param {Object} opts - Custom mask options\r\n * @return {InputMask}\r\n */\r\nfunction IMask (el, opts={}) {\r\n\t// currently available only for input-like elements\r\n  return new InputMask(el, opts);\r\n}\r\n\r\n/** {@link InputMask} */\r\nIMask.InputMask = InputMask;\r\n\r\n/** {@link Masked} */\r\nIMask.Masked = Masked;\r\n/** {@link MaskedPattern} */\r\nIMask.MaskedPattern = MaskedPattern;\r\n/** {@link MaskedEnum} */\r\nIMask.MaskedEnum = MaskedEnum;\r\n/** {@link MaskedRange} */\r\nIMask.MaskedRange = MaskedRange;\r\n/** {@link MaskedNumber} */\r\nIMask.MaskedNumber = MaskedNumber;\r\n/** {@link MaskedDate} */\r\nIMask.MaskedDate = MaskedDate;\r\n/** {@link MaskedRegExp} */\r\nIMask.MaskedRegExp = MaskedRegExp;\r\n/** {@link MaskedFunction} */\r\nIMask.MaskedFunction = MaskedFunction;\r\n/** {@link MaskedDynamic} */\r\nIMask.MaskedDynamic = MaskedDynamic;\r\n/** {@link createMask} */\r\nIMask.createMask = createMask;\r\n/** {@link MaskElement} */\r\nIMask.MaskElement = MaskElement;\r\n/** {@link HTMLMaskElement} */\r\nIMask.HTMLMaskElement = HTMLMaskElement;\r\n\r\ng.IMask = IMask;\r\n\r\nexport default IMask;\r\nexport {\r\n  InputMask,\r\n  Masked,\r\n  MaskedPattern,\r\n  MaskedEnum,\r\n  MaskedRange,\r\n  MaskedNumber,\r\n  MaskedDate,\r\n  MaskedRegExp,\r\n  MaskedFunction,\r\n  MaskedDynamic,\r\n  createMask,\r\n  MaskElement,\r\n  HTMLMaskElement,\r\n};\r\n","// @flow\r\n\r\n\r\n/** Checks if value is string */\r\nexport\r\nfunction isString (str: mixed): boolean %checks {\r\n  return typeof str === 'string' || str instanceof String;\r\n}\r\n\r\n/**\r\n  Direction\r\n  @prop {string} NONE\r\n  @prop {string} LEFT\r\n  @prop {string} FORCE_LEFT\r\n  @prop {string} RIGHT\r\n  @prop {string} FORCE_RIGHT\r\n*/\r\nexport\r\nconst DIRECTION = {\r\n  NONE: 'NONE',\r\n  LEFT: 'LEFT',\r\n  FORCE_LEFT: 'FORCE_LEFT',\r\n  RIGHT: 'RIGHT',\r\n  FORCE_RIGHT: 'FORCE_RIGHT',\r\n}\r\n/**\r\n  Direction\r\n  @enum {string}\r\n*/\r\nexport\r\ntype Direction = $Values<typeof DIRECTION>;\r\n\r\n/** Returns next char index in direction */\r\nexport\r\nfunction indexInDirection (pos: number, direction: Direction): number {\r\n  if (direction === DIRECTION.LEFT) --pos;\r\n  return pos;\r\n}\r\n\r\n/** Returns next char position in direction */\r\nexport\r\nfunction posInDirection (pos: number, direction: Direction): number {\r\n  switch (direction) {\r\n    case DIRECTION.LEFT:\r\n    case DIRECTION.FORCE_LEFT:\r\n      return --pos;\r\n    case DIRECTION.RIGHT:\r\n    case DIRECTION.FORCE_RIGHT:\r\n      return ++pos;\r\n    default:\r\n      return pos;\r\n  }\r\n}\r\n\r\n/** */\r\nexport\r\nfunction forceDirection (direction: Direction): Direction {\r\n  switch (direction) {\r\n    case DIRECTION.LEFT:\r\n      return DIRECTION.FORCE_LEFT;\r\n    case DIRECTION.RIGHT:\r\n      return DIRECTION.FORCE_RIGHT;\r\n    default:\r\n      return direction;\r\n  }\r\n}\r\n\r\n/** Escapes regular expression control chars */\r\nexport\r\nfunction escapeRegExp (str: string): string {\r\n  return str.replace(/([.*+?^=!:${}()|[\\]/\\\\])/g, '\\\\$1');\r\n}\r\n\r\n\r\n// cloned from https://github.com/epoberezkin/fast-deep-equal with small changes\r\nexport\r\nfunction objectIncludes (b: any, a: any): boolean {\r\n  if (a === b) return true;\r\n\r\n  var arrA = Array.isArray(a)\r\n    , arrB = Array.isArray(b)\r\n    , i;\r\n\r\n  if (arrA && arrB) {\r\n    if (a.length != b.length) return false;\r\n    for (i = 0; i < a.length; i++)\r\n      if (!objectIncludes(a[i], b[i])) return false;\r\n    return true;\r\n  }\r\n\r\n  if (arrA != arrB) return false;\r\n\r\n  if (a && b && typeof a === 'object' && typeof b === 'object') {\r\n    var dateA = a instanceof Date\r\n      , dateB = b instanceof Date;\r\n    if (dateA && dateB) return a.getTime() == b.getTime();\r\n    if (dateA != dateB) return false;\r\n\r\n    var regexpA = a instanceof RegExp\r\n      , regexpB = b instanceof RegExp;\r\n    if (regexpA && regexpB) return a.toString() == b.toString();\r\n    if (regexpA != regexpB) return false;\r\n\r\n    var keys = Object.keys(a);\r\n    // if (keys.length !== Object.keys(b).length) return false;\r\n\r\n    for (i = 0; i < keys.length; i++)\r\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\r\n\r\n    for (i = 0; i < keys.length; i++)\r\n      if(!objectIncludes(b[keys[i]], a[keys[i]])) return false;\r\n\r\n    return true;\r\n  } else if (a && b && typeof a === 'function' && typeof b === 'function') {\r\n      return a.toString() === b.toString()\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n/* eslint-disable no-undef */\r\nexport\r\nconst g: any = typeof window !== 'undefined' && window ||\r\n  typeof global !== 'undefined' && global.global === global && global ||\r\n  typeof self !== 'undefined' && self.self === self && self ||\r\n  {};\r\n/* eslint-enable no-undef */\r\n\r\n/** Selection range */\r\nexport\r\ntype Selection = {\r\n  start: number;\r\n  end: number;\r\n};\r\n","// @flow\r\nimport {type Direction, type Selection, DIRECTION} from './utils.js';\r\n\r\n\r\n/** Provides details of changing input */\r\nexport default\r\nclass ActionDetails {\r\n  /** Current input value */\r\n  value: string;\r\n  /** Current cursor position */\r\n  cursorPos: number;\r\n  /** Old input value */\r\n  oldValue: string;\r\n  /** Old selection */\r\n  oldSelection: Selection;\r\n\r\n  constructor (\r\n    value: string,\r\n    cursorPos: number,\r\n    oldValue: string,\r\n    oldSelection: Selection\r\n  ) {\r\n    this.value = value;\r\n    this.cursorPos = cursorPos;\r\n    this.oldValue = oldValue;\r\n    this.oldSelection = oldSelection;\r\n\r\n    // double check if left part was changed (autofilling, other non-standard input triggers)\r\n    while (this.value.slice(0, this.startChangePos) !== this.oldValue.slice(0, this.startChangePos)) {\r\n      --this.oldSelection.start;\r\n    }\r\n  }\r\n\r\n  /**\r\n    Start changing position\r\n    @readonly\r\n  */\r\n  get startChangePos (): number {\r\n    return Math.min(this.cursorPos, this.oldSelection.start);\r\n  }\r\n\r\n  /**\r\n    Inserted symbols count\r\n    @readonly\r\n  */\r\n  get insertedCount (): number {\r\n    return this.cursorPos - this.startChangePos;\r\n  }\r\n\r\n  /**\r\n    Inserted symbols\r\n    @readonly\r\n  */\r\n  get inserted (): string {\r\n    return this.value.substr(this.startChangePos, this.insertedCount);\r\n  }\r\n\r\n  /**\r\n    Removed symbols count\r\n    @readonly\r\n  */\r\n  get removedCount (): number {\r\n    // Math.max for opposite operation\r\n    return Math.max((this.oldSelection.end - this.startChangePos) ||\r\n      // for Delete\r\n      this.oldValue.length - this.value.length, 0);\r\n  }\r\n\r\n  /**\r\n    Removed symbols\r\n    @readonly\r\n  */\r\n  get removed (): string {\r\n    return this.oldValue.substr(this.startChangePos, this.removedCount);\r\n  }\r\n\r\n  /**\r\n    Unchanged head symbols\r\n    @readonly\r\n  */\r\n  get head (): string {\r\n    return this.value.substring(0, this.startChangePos);\r\n  }\r\n\r\n  /**\r\n    Unchanged tail symbols\r\n    @readonly\r\n  */\r\n  get tail (): string {\r\n    return this.value.substring(this.startChangePos + this.insertedCount);\r\n  }\r\n\r\n  /**\r\n    Remove direction\r\n    @readonly\r\n  */\r\n  get removeDirection (): Direction {\r\n    if (!this.removedCount || this.insertedCount) return DIRECTION.NONE;\r\n\r\n    // align right if delete at right or if range removed (event with backspace)\r\n    return (this.oldSelection.end === this.cursorPos || this.oldSelection.start === this.cursorPos) ?\r\n      DIRECTION.RIGHT :\r\n      DIRECTION.LEFT;\r\n  }\r\n}\r\n","// @flow\r\n\r\n\r\n/**\r\n  Provides details of changing model value\r\n  @param {Object} [details]\r\n  @param {string} [details.inserted] - Inserted symbols\r\n  @param {boolean} [details.skip] - Can skip chars\r\n  @param {number} [details.removeCount] - Removed symbols count\r\n  @param {number} [details.tailShift] - Additional offset if any changes occurred before tail\r\n*/\r\nexport default\r\nclass ChangeDetails {\r\n  /** Inserted symbols */\r\n  inserted: string;\r\n  /** Can skip chars */\r\n  skip: boolean;\r\n  /** Additional offset if any changes occurred before tail */\r\n  tailShift: number;\r\n  /** Raw inserted is used by dynamic mask */\r\n  rawInserted: string;\r\n\r\n  constructor (details?: {\r\n    inserted?: $PropertyType<ChangeDetails, 'inserted'>,\r\n    rawInserted?: $PropertyType<ChangeDetails, 'rawInserted'>,\r\n    skip?: $PropertyType<ChangeDetails, 'skip'>,\r\n    tailShift?: $PropertyType<ChangeDetails, 'tailShift'>,\r\n  }) {\r\n    Object.assign(this, {\r\n      inserted: '',\r\n      rawInserted: '',\r\n      skip: false,\r\n      tailShift: 0,\r\n    }, details);\r\n  }\r\n\r\n  /**\r\n    Aggregate changes\r\n    @returns {ChangeDetails} `this`\r\n  */\r\n  aggregate (details: ChangeDetails): ChangeDetails {\r\n    this.rawInserted += details.rawInserted;\r\n    this.skip = this.skip || details.skip;\r\n    this.inserted += details.inserted;\r\n    this.tailShift += details.tailShift;\r\n    return this;\r\n  }\r\n\r\n  /** Total offset considering all changes */\r\n  get offset (): number {\r\n    return this.tailShift + this.inserted.length;\r\n  }\r\n}\r\n","// @flow\r\nimport type { TailDetails, AppendTail } from './tail-details.js';\r\nimport type ChangeDetails from './change-details.js';\r\n\r\n\r\ntype ContinuousTailState = {\r\n  value: $PropertyType<ContinuousTailDetails, 'value'>,\r\n  from: $PropertyType<ContinuousTailDetails, 'from'>,\r\n  stop?: $PropertyType<ContinuousTailDetails, 'stop'>,\r\n};\r\n\r\n/** Provides details of continuous extracted tail */\r\nexport default\r\nclass ContinuousTailDetails implements TailDetails {\r\n  /** Tail value as string */\r\n  value: string;\r\n  /** Tail start position */\r\n  from: number;\r\n  /** Start position */\r\n  stop: ?number;\r\n\r\n  constructor (value?: string='', from?: number=0, stop?: number) {\r\n    this.value = value;\r\n    this.from = from;\r\n    this.stop = stop;\r\n  }\r\n\r\n  toString (): string { return this.value; }\r\n\r\n  extend (tail: string | TailDetails): void {\r\n    this.value += String(tail);\r\n  }\r\n\r\n  appendTo (masked: AppendTail): ChangeDetails {\r\n    return masked.append(this.toString(), { tail: true })\r\n      .aggregate(masked._appendPlaceholder());\r\n  }\r\n\r\n  get state (): ContinuousTailState {\r\n    return {\r\n      value: this.value,\r\n      from: this.from,\r\n      stop: this.stop,\r\n    };\r\n  }\r\n\r\n  set state (state: ContinuousTailState) {\r\n    Object.assign(this, state);\r\n  }\r\n\r\n  shiftBefore (pos: number): string {\r\n    if (this.from >= pos || !this.value.length) return '';\r\n\r\n    const shiftChar = this.value[0];\r\n    this.value = this.value.slice(1);\r\n    return shiftChar;\r\n  }\r\n}\r\n","// @flow\r\nimport ChangeDetails from '../core/change-details.js';\r\nimport ContinuousTailDetails from '../core/continuous-tail-details.js';\r\nimport { type Direction, DIRECTION, isString } from '../core/utils.js';\r\nimport { type TailDetails } from '../core/tail-details.js';\r\n\r\n\r\n/** Supported mask type */\r\nexport\r\ntype Mask =\r\n  string |\r\n  String |\r\n  RegExp |\r\n  Class<Number> |\r\n  Class<Date> |\r\n  Array<any> |\r\n  $PropertyType<Masked<*>, 'validate'> |\r\n  Masked<*> |\r\n  Class<Masked<*>>;\r\n\r\nexport\r\ntype MaskedState = {|\r\n  _value: string,\r\n|};\r\n\r\n/** Append flags */\r\nexport\r\ntype AppendFlags = {\r\n  input?: boolean,\r\n  tail?: boolean,\r\n  raw?: boolean,\r\n  _beforeTailState?: any,  // TODO types...\r\n};\r\n\r\n/** Extract flags */\r\nexport\r\ntype ExtractFlags = {\r\n  raw?: boolean\r\n};\r\n\r\nexport\r\ntype MaskedOptions<MaskType> = {\r\n  mask: $PropertyType<Masked<MaskType>, 'mask'>,\r\n  parent?: $PropertyType<Masked<*>, 'parent'>,\r\n  prepare?: $PropertyType<Masked<MaskType>, 'prepare'>,\r\n  validate?: $PropertyType<Masked<MaskType>, 'validate'>,\r\n  commit?: $PropertyType<Masked<MaskType>, 'commit'>,\r\n  overwrite?: $PropertyType<Masked<MaskType>, 'overwrite'>,\r\n};\r\n\r\n\r\n/** Provides common masking stuff */\r\nexport default\r\nclass Masked<MaskType> {\r\n  static DEFAULTS: any; // $Shape<MaskedOptions>; TODO after fix https://github.com/facebook/flow/issues/4773\r\n\r\n  /** @type {Mask} */\r\n  mask: MaskType;\r\n  /** */ // $FlowFixMe no ideas\r\n  parent: ?Masked<*>;\r\n  /** Transforms value before mask processing */\r\n  prepare: (string, Masked<MaskType>, AppendFlags) => string;\r\n  /** Validates if value is acceptable */\r\n  validate: (string, Masked<MaskType>, AppendFlags) => boolean;\r\n  /** Does additional processing in the end of editing */\r\n  commit: (string, Masked<MaskType>) => void;\r\n  /** Enable characters overwriting */\r\n  overwrite: ?boolean;\r\n  /** */\r\n  isInitialized: boolean;\r\n  _value: string;\r\n  _refreshing: boolean;\r\n\r\n  constructor (opts: {[string]: any}) {\r\n    this._value = '';\r\n    this._update(opts);\r\n    this.isInitialized = true;\r\n  }\r\n\r\n  /** Sets and applies new options */\r\n  updateOptions (opts: {[string]: any}) {\r\n    if (!Object.keys(opts).length) return;\r\n    this.withValueRefresh(this._update.bind(this, opts));\r\n  }\r\n\r\n  /**\r\n    Sets new options\r\n    @protected\r\n  */\r\n  _update (opts: {[string]: any}) {\r\n    Object.assign(this, opts);\r\n  }\r\n\r\n  /** Mask state */\r\n  get state (): any {\r\n    return {\r\n      _value: this.value,\r\n    };\r\n  }\r\n\r\n  set state (state: any) {\r\n    this._value = state._value;\r\n  }\r\n\r\n  /** Resets value */\r\n  reset () {\r\n    this._value = '';\r\n  }\r\n\r\n  /** */\r\n  get value (): string {\r\n    return this._value;\r\n  }\r\n\r\n  set value (value: string) {\r\n    this.resolve(value);\r\n  }\r\n\r\n  /** Resolve new value */\r\n  resolve (value: string): string {\r\n    this.reset();\r\n    this.append(value, {input: true}, '');\r\n    this.doCommit();\r\n    return this.value;\r\n  }\r\n\r\n  /** */\r\n  get unmaskedValue (): string {\r\n    return this.value;\r\n  }\r\n\r\n  set unmaskedValue (value: string) {\r\n    this.reset();\r\n    this.append(value, {}, '');\r\n    this.doCommit();\r\n  }\r\n\r\n  /** */\r\n  get typedValue (): any {\r\n    return this.unmaskedValue;\r\n  }\r\n\r\n  set typedValue (value: any) {\r\n    this.unmaskedValue = value;\r\n  }\r\n\r\n  /** Value that includes raw user input */\r\n  get rawInputValue (): string {\r\n    return this.extractInput(0, this.value.length, {raw: true});\r\n  }\r\n\r\n  set rawInputValue (value: string) {\r\n    this.reset();\r\n    this.append(value, {raw: true}, '');\r\n    this.doCommit();\r\n  }\r\n\r\n  /** */\r\n  get isComplete (): boolean {\r\n    return true;\r\n  }\r\n\r\n  /** Finds nearest input position in direction */\r\n  nearestInputPos (cursorPos: number, direction?: Direction): number {\r\n    return cursorPos;\r\n  }\r\n\r\n  /** Extracts value in range considering flags */\r\n  extractInput (fromPos?: number=0, toPos?: number=this.value.length, flags?: ExtractFlags): string {\r\n    return this.value.slice(fromPos, toPos);\r\n  }\r\n\r\n  /** Extracts tail in range */\r\n  extractTail (fromPos?: number=0, toPos?: number=this.value.length): TailDetails {\r\n    return new ContinuousTailDetails(this.extractInput(fromPos, toPos), fromPos);\r\n  }\r\n\r\n  /** Appends tail */\r\n  // $FlowFixMe no ideas\r\n  appendTail (tail: string | TailDetails): ChangeDetails {\r\n    if (isString(tail)) tail = new ContinuousTailDetails(String(tail));\r\n\r\n    return tail.appendTo(this);\r\n  }\r\n\r\n  /** Appends char */\r\n  _appendCharRaw (ch: string, flags: AppendFlags={}): ChangeDetails {\r\n    ch = this.doPrepare(ch, flags);\r\n    if (!ch) return new ChangeDetails();\r\n\r\n    this._value += ch;\r\n    return new ChangeDetails({\r\n      inserted: ch,\r\n      rawInserted: ch,\r\n    });\r\n  }\r\n\r\n  /** Appends char */\r\n  _appendChar (ch: string, flags: AppendFlags={}, checkTail?: TailDetails): ChangeDetails {\r\n    const consistentState: MaskedState = this.state;\r\n    const details: ChangeDetails = this._appendCharRaw(ch, flags);\r\n\r\n    if (details.inserted) {\r\n      let consistentTail;\r\n      let appended = this.doValidate(flags) !== false;\r\n\r\n      if (appended && checkTail != null) {\r\n        // validation ok, check tail\r\n        const beforeTailState = this.state;\r\n        if (this.overwrite) {\r\n          consistentTail = checkTail.state;\r\n          checkTail.shiftBefore(this.value.length);\r\n        }\r\n\r\n        const tailDetails = this.appendTail(checkTail);\r\n\r\n        appended = tailDetails.rawInserted === checkTail.toString();\r\n\r\n        // if ok, rollback state after tail\r\n        if (appended && tailDetails.inserted) this.state = beforeTailState;\r\n      }\r\n\r\n      // revert all if something went wrong\r\n      if (!appended) {\r\n        details.rawInserted = details.inserted = '';\r\n        this.state = consistentState;\r\n        if (checkTail && consistentTail) checkTail.state = consistentTail;\r\n      }\r\n    }\r\n    return details;\r\n  }\r\n\r\n  /** Appends optional placeholder at end */\r\n  _appendPlaceholder (): ChangeDetails {\r\n    return new ChangeDetails();\r\n  }\r\n\r\n  /** Appends symbols considering flags */\r\n  // $FlowFixMe no ideas\r\n  append (str: string, flags?: AppendFlags, tail?: string | TailDetails): ChangeDetails {\r\n    if (!isString(str)) throw new Error('value should be string');\r\n    const details = new ChangeDetails();\r\n    const checkTail = isString(tail) ? new ContinuousTailDetails(String(tail)) : tail;\r\n    if (flags.tail) flags._beforeTailState = this.state;\r\n\r\n    for (let ci=0; ci<str.length; ++ci) {\r\n      details.aggregate(this._appendChar(str[ci], flags, checkTail));\r\n    }\r\n\r\n    // append tail but aggregate only tailShift\r\n    if (checkTail != null) {\r\n      details.tailShift += this.appendTail(checkTail).tailShift;\r\n      // TODO it's a good idea to clear state after appending ends\r\n      // but it causes bugs when one append calls another (when dynamic dispatch set rawInputValue)\r\n      // this._resetBeforeTailState();\r\n    }\r\n\r\n    return details;\r\n  }\r\n\r\n  /** */\r\n  remove (fromPos?: number=0, toPos?: number=this.value.length): ChangeDetails {\r\n    this._value = this.value.slice(0, fromPos) + this.value.slice(toPos);\r\n    return new ChangeDetails();\r\n  }\r\n\r\n  /** Calls function and reapplies current value */\r\n  withValueRefresh<T>(fn: () => T): T {\r\n    if (this._refreshing || !this.isInitialized) return fn();\r\n    this._refreshing = true;\r\n\r\n    const unmasked = this.unmaskedValue;\r\n    const value = this.value;\r\n\r\n    const ret = fn();\r\n\r\n    // try to update with raw value first to keep fixed chars\r\n    if (this.resolve(value) !== value) {\r\n      // or fallback to unmasked\r\n      this.unmaskedValue = unmasked;\r\n    }\r\n\r\n    delete this._refreshing;\r\n    return ret;\r\n  }\r\n\r\n  /**\r\n    Prepares string before mask processing\r\n    @protected\r\n  */\r\n  doPrepare (str: string, flags: AppendFlags={}): string {\r\n    return this.prepare ?\r\n      this.prepare(str, this, flags) :\r\n      str;\r\n  }\r\n\r\n  /**\r\n    Validates if value is acceptable\r\n    @protected\r\n  */\r\n  doValidate (flags: AppendFlags): boolean {\r\n    return (!this.validate || this.validate(this.value, this, flags)) &&\r\n      (!this.parent || this.parent.doValidate(flags));\r\n  }\r\n\r\n  /**\r\n    Does additional processing in the end of editing\r\n    @protected\r\n  */\r\n  doCommit () {\r\n    if (this.commit) this.commit(this.value, this);\r\n  }\r\n\r\n  /** */\r\n  splice (start: number, deleteCount: number, inserted: string, removeDirection: Direction): ChangeDetails {\r\n    const tailPos: number = start + deleteCount;\r\n    const tail: TailDetails = this.extractTail(tailPos);\r\n\r\n    let startChangePos: number = this.nearestInputPos(start, removeDirection);\r\n    const changeDetails: ChangeDetails = new ChangeDetails({\r\n      tailShift: startChangePos - start  // adjust tailShift if start was aligned\r\n    }).aggregate(this.remove(startChangePos))\r\n      .aggregate(this.append(inserted, {input: true}, tail));\r\n\r\n    return changeDetails;\r\n  }\r\n}\r\n","// @flow\r\nimport {g, isString} from '../core/utils.js';\r\nimport type Masked from './base.js';\r\nimport {type Mask} from './base.js';\r\n\r\n\r\n/** Get Masked class by mask type */\r\nexport\r\nfunction maskedClass (mask: Mask): Class<Masked<*>> {\r\n  if (mask == null) {\r\n    throw new Error('mask property should be defined');\r\n  }\r\n\r\n  if (mask instanceof RegExp) return g.IMask.MaskedRegExp;\r\n  if (isString(mask)) return g.IMask.MaskedPattern;\r\n  if (mask instanceof Date || mask === Date) return g.IMask.MaskedDate;\r\n  if (mask instanceof Number || typeof mask === 'number' || mask === Number) return g.IMask.MaskedNumber;\r\n  if (Array.isArray(mask) || mask === Array) return g.IMask.MaskedDynamic;\r\n  // $FlowFixMe\r\n  if (mask.prototype instanceof g.IMask.Masked) return mask;\r\n  // $FlowFixMe\r\n  if (mask instanceof Function) return g.IMask.MaskedFunction;\r\n\r\n  console.warn('Mask not found for mask', mask);  // eslint-disable-line no-console\r\n  return g.IMask.Masked;\r\n}\r\n\r\n/** Creates new {@link Masked} depending on mask type */\r\nexport default\r\nfunction createMask (opts: {mask: Mask}): Masked<*> {\r\n  opts = {...opts};\r\n  const mask = opts.mask;\r\n\r\n  if (mask instanceof g.IMask.Masked) return mask;\r\n\r\n  const MaskedClass = maskedClass(mask);\r\n  return new MaskedClass(opts);\r\n}\r\n","// @flow\r\nimport createMask from '../factory.js';\r\nimport type Masked from '../base.js';\r\nimport type MaskedPattern from '../pattern.js';\r\nimport {type TailDetails} from '../../core/tail-details.js';\r\nimport {type Mask, type ExtractFlags, type AppendFlags} from '../base.js';\r\nimport ChangeDetails from '../../core/change-details.js';\r\nimport {DIRECTION, type Direction} from '../../core/utils.js';\r\nimport {type PatternBlock} from './block.js';\r\n\r\n\r\nexport\r\ntype Definitions = {[string]: Mask};\r\n\r\n/** */\r\ntype PatternInputDefinitionOptions = {\r\n  parent: $PropertyType<PatternInputDefinition, 'parent'>,\r\n  mask: Mask,\r\n  isOptional: $PropertyType<PatternInputDefinition, 'isOptional'>,\r\n  lazy: $PropertyType<PatternInputDefinition, 'lazy'>,\r\n  placeholderChar: $PropertyType<PatternInputDefinition, 'placeholderChar'>,\r\n};\r\n\r\ntype PatternInputDefinitionState = {\r\n  masked: *,\r\n  _isFilled: boolean,\r\n};\r\n\r\nexport\r\nconst DEFAULT_INPUT_DEFINITIONS = {\r\n  '0': /\\d/,\r\n  'a': /[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]/,  // http://stackoverflow.com/a/22075070\r\n  '*': /./\r\n};\r\n\r\n\r\n/** */\r\nexport default\r\nclass PatternInputDefinition implements PatternBlock {\r\n  /** */\r\n  +masked: Masked<*>;\r\n  /** */\r\n  parent: Masked<*>;\r\n  /** */\r\n  isOptional: boolean;\r\n  /** */\r\n  _isFilled: boolean;\r\n  /** */\r\n  lazy: $PropertyType<MaskedPattern, 'lazy'>;\r\n  /** */\r\n  placeholderChar: $PropertyType<MaskedPattern, 'placeholderChar'>;\r\n\r\n\r\n  constructor(opts: PatternInputDefinitionOptions) {\r\n    const {mask, ...blockOpts} = opts;\r\n\r\n    this.masked = createMask({mask});\r\n    Object.assign(this, blockOpts);\r\n  }\r\n\r\n  reset () {\r\n    this._isFilled = false;\r\n    this.masked.reset();\r\n  }\r\n\r\n  remove (fromPos?: number=0, toPos?: number=this.value.length): ChangeDetails {\r\n    if (fromPos === 0 && toPos >= 1) {\r\n      this._isFilled = false;\r\n      return this.masked.remove(fromPos, toPos);\r\n    }\r\n\r\n    return new ChangeDetails();\r\n  }\r\n\r\n  get value (): string {\r\n    return this.masked.value ||\r\n      (this._isFilled && !this.isOptional ?\r\n        this.placeholderChar :\r\n        '');\r\n  }\r\n\r\n  get unmaskedValue (): string {\r\n    return this.masked.unmaskedValue;\r\n  }\r\n\r\n  get isComplete (): boolean {\r\n    return Boolean(this.masked.value) || this.isOptional;\r\n  }\r\n\r\n  _appendChar (str: string, flags: AppendFlags={}): ChangeDetails {\r\n    if (this._isFilled) return new ChangeDetails();\r\n\r\n    const state = this.masked.state;\r\n    // simulate input\r\n    const details = this.masked._appendChar(str, flags);\r\n\r\n    if (details.inserted && this.doValidate(flags) === false) {\r\n      details.inserted = details.rawInserted = '';\r\n      this.masked.state = state;\r\n    }\r\n\r\n    if (!details.inserted && !this.isOptional && !this.lazy && !flags.input) {\r\n      details.inserted = this.placeholderChar;\r\n    }\r\n    details.skip = !details.inserted && !this.isOptional;\r\n    this._isFilled = Boolean(details.inserted);\r\n\r\n    return details;\r\n  }\r\n\r\n  append (...args: *): ChangeDetails {\r\n    return this.masked.append(...args);\r\n  }\r\n\r\n  _appendPlaceholder (): ChangeDetails {\r\n    const details = new ChangeDetails();\r\n\r\n    if (this._isFilled || this.isOptional) return details;\r\n\r\n    this._isFilled = true;\r\n    details.inserted = this.placeholderChar;\r\n    return details;\r\n  }\r\n\r\n  extractTail (...args: *): TailDetails {\r\n    return this.masked.extractTail(...args);\r\n  }\r\n\r\n  appendTail (...args: *): ChangeDetails {\r\n    return this.masked.appendTail(...args);\r\n  }\r\n\r\n  extractInput (fromPos?: number=0, toPos?: number=this.value.length, flags?: ExtractFlags): string {\r\n    return this.masked.extractInput(fromPos, toPos, flags);\r\n  }\r\n\r\n  nearestInputPos (cursorPos: number, direction: Direction=DIRECTION.NONE): number {\r\n    const minPos = 0;\r\n    const maxPos = this.value.length;\r\n    const boundPos = Math.min(Math.max(cursorPos, minPos), maxPos);\r\n\r\n    switch (direction) {\r\n      case DIRECTION.LEFT:\r\n      case DIRECTION.FORCE_LEFT:\r\n        return this.isComplete ? boundPos : minPos;\r\n      case DIRECTION.RIGHT:\r\n      case DIRECTION.FORCE_RIGHT:\r\n        return this.isComplete ? boundPos : maxPos;\r\n      case DIRECTION.NONE:\r\n      default: return boundPos;\r\n    }\r\n  }\r\n\r\n  doValidate (...args: *) {\r\n    return this.masked.doValidate(...args) && (\r\n      !this.parent || this.parent.doValidate(...args));\r\n  }\r\n\r\n  doCommit () {\r\n    this.masked.doCommit();\r\n  }\r\n\r\n  get state (): PatternInputDefinitionState {\r\n    return {\r\n      masked: this.masked.state,\r\n      _isFilled: this._isFilled,\r\n    };\r\n  }\r\n\r\n  set state (state: PatternInputDefinitionState) {\r\n    this.masked.state = state.masked;\r\n    this._isFilled = state._isFilled;\r\n  }\r\n}\r\n","// @flow\r\nimport ChangeDetails from '../../core/change-details.js';\r\nimport { DIRECTION, type Direction, isString } from '../../core/utils.js';\r\nimport { type TailDetails } from '../../core/tail-details.js';\r\nimport ContinuousTailDetails from '../../core/continuous-tail-details.js';\r\nimport { type ExtractFlags, type AppendFlags, type MaskedState } from '../base.js';\r\nimport { type PatternBlock } from './block.js';\r\n\r\n\r\n/** */\r\ntype PatternFixedDefinitionOptions = {\r\n  char: $PropertyType<PatternFixedDefinition, 'char'>,\r\n  isUnmasking?: $PropertyType<PatternFixedDefinition, 'isUnmasking'>,\r\n};\r\n\r\ntype PatternFixedDefinitionState = {|\r\n  ...MaskedState,\r\n  _isRawInput: ?boolean,\r\n|};\r\n\r\nexport default\r\nclass PatternFixedDefinition implements PatternBlock {\r\n  /** */\r\n  _value: string;\r\n  /** */\r\n  char: string;\r\n  /** */\r\n  isUnmasking: ?boolean;\r\n  /** */\r\n  _isRawInput: ?boolean;\r\n\r\n  constructor(opts: PatternFixedDefinitionOptions) {\r\n    Object.assign(this, opts);\r\n    this._value = '';\r\n  }\r\n\r\n  get value (): string {\r\n    return this._value;\r\n  }\r\n\r\n  get unmaskedValue (): string {\r\n    return this.isUnmasking ? this.value : '';\r\n  }\r\n\r\n  reset () {\r\n    this._isRawInput = false;\r\n    this._value = '';\r\n  }\r\n\r\n  remove (fromPos?: number=0, toPos?: number=this._value.length): ChangeDetails {\r\n    this._value = this._value.slice(0, fromPos) + this._value.slice(toPos);\r\n    if (!this._value) this._isRawInput = false;\r\n\r\n    return new ChangeDetails();\r\n  }\r\n\r\n  nearestInputPos (cursorPos: number, direction: Direction=DIRECTION.NONE): number {\r\n    const minPos = 0;\r\n    const maxPos = this._value.length;\r\n\r\n    switch (direction) {\r\n      case DIRECTION.LEFT:\r\n      case DIRECTION.FORCE_LEFT:\r\n        return minPos;\r\n      case DIRECTION.NONE:\r\n      case DIRECTION.RIGHT:\r\n      case DIRECTION.FORCE_RIGHT:\r\n      default: return maxPos;\r\n    }\r\n  }\r\n\r\n  extractInput (fromPos?: number=0, toPos?: number=this._value.length, flags?: ExtractFlags={}) {\r\n    return flags.raw && this._isRawInput && this._value.slice(fromPos, toPos) || '';\r\n  }\r\n\r\n  get isComplete (): boolean {\r\n    return true;\r\n  }\r\n\r\n  _appendChar (str: string, flags?: AppendFlags={}) {\r\n    const details = new ChangeDetails();\r\n\r\n    if (this._value) return details;\r\n\r\n    const appended = this.char === str[0];\r\n    const isResolved = appended && (this.isUnmasking || flags.input || flags.raw) && !flags.tail;\r\n    if (isResolved) details.rawInserted = this.char;\r\n    this._value = details.inserted = this.char;\r\n    this._isRawInput = isResolved && (flags.raw || flags.input);\r\n\r\n    return details;\r\n  }\r\n\r\n  _appendPlaceholder (): ChangeDetails {\r\n    const details = new ChangeDetails();\r\n    if (this._value) return details;\r\n\r\n    this._value = details.inserted = this.char;\r\n    return details;\r\n  }\r\n\r\n  extractTail (fromPos?: number=0, toPos?: number=this.value.length): TailDetails {\r\n    return new ContinuousTailDetails('');\r\n  }\r\n\r\n  // $FlowFixMe no ideas\r\n  appendTail (tail: string | TailDetails): ChangeDetails {\r\n    if (isString(tail)) tail = new ContinuousTailDetails(String(tail));\r\n\r\n    return tail.appendTo(this);\r\n  }\r\n\r\n  append (str: string, flags?: AppendFlags, tail?: TailDetails): ChangeDetails {\r\n    const details = this._appendChar(str, flags);\r\n\r\n    if (tail != null) {\r\n      details.tailShift += this.appendTail(tail).tailShift;\r\n    }\r\n\r\n    return details;\r\n  }\r\n\r\n  doCommit () {}\r\n\r\n  get state (): PatternFixedDefinitionState {\r\n    return {\r\n      _value: this._value,\r\n      _isRawInput: this._isRawInput,\r\n    };\r\n  }\r\n\r\n  set state (state: PatternFixedDefinitionState) {\r\n    Object.assign(this, state);\r\n  }\r\n}\r\n","// @flow\r\nimport { g } from '../../core/utils.js';\r\nimport type { TailDetails, AppendTail } from '../../core/tail-details.js';\r\nimport ChangeDetails from '../../core/change-details.js';\r\nimport { isString } from '../../core/utils.js';\r\nimport ContinuousTailDetails from '../../core/continuous-tail-details.js';\r\n\r\n\r\ntype ChunksTailState = {\r\n  chunks: $PropertyType<ChunksTailDetails, 'chunks'>,\r\n  from: $PropertyType<ChunksTailDetails, 'from'>,\r\n  stop?: $PropertyType<ChunksTailDetails, 'stop'>,\r\n  blockIndex?: $PropertyType<ChunksTailDetails, 'blockIndex'>,\r\n};\r\n\r\nexport default\r\nclass ChunksTailDetails implements TailDetails {\r\n  chunks: Array<TailDetails>;\r\n  from: number;\r\n  stop: ?number;\r\n  /** */\r\n  blockIndex: ?number;\r\n\r\n  constructor (chunks?: Array<TailDetails>=[], from?: number=0) {\r\n    this.chunks = chunks;\r\n    this.from = from;\r\n  }\r\n\r\n  toString (): string {\r\n    return this.chunks.map(String).join('');\r\n  }\r\n\r\n  // $FlowFixMe no ideas\r\n  extend (tailChunk: string | TailDetails): void {\r\n    if (!String(tailChunk)) return;\r\n    if (isString(tailChunk)) tailChunk = new ContinuousTailDetails(String(tailChunk));\r\n\r\n    const lastChunk = this.chunks[this.chunks.length-1];\r\n    const extendLast = lastChunk &&\r\n      // if stops are same or tail has no stop\r\n      (lastChunk.stop === tailChunk.stop || tailChunk.stop == null) &&\r\n      // if tail chunk goes just after last chunk\r\n      tailChunk.from === (lastChunk.from + lastChunk.toString().length);\r\n\r\n    if (tailChunk instanceof ContinuousTailDetails) {\r\n      // check the ability to extend previous chunk\r\n      if (extendLast) {\r\n        // extend previous chunk\r\n        lastChunk.extend(tailChunk.toString());\r\n      } else {\r\n        // append new chunk\r\n        this.chunks.push(tailChunk);\r\n      }\r\n    } else if (tailChunk instanceof ChunksTailDetails) {\r\n      if (tailChunk.stop == null) {\r\n        // unwrap floating chunks to parent, keeping `from` pos\r\n        let firstTailChunk;\r\n        while (tailChunk.chunks.length && tailChunk.chunks[0].stop == null) {\r\n          firstTailChunk = tailChunk.chunks.shift();\r\n          firstTailChunk.from += tailChunk.from;\r\n          this.extend(firstTailChunk);\r\n        }\r\n      }\r\n\r\n      // if tail chunk still has value\r\n      if (tailChunk.toString()) {\r\n        // if chunks contains stops, then popup stop to container\r\n        tailChunk.stop = tailChunk.blockIndex;\r\n        this.chunks.push(tailChunk);\r\n      }\r\n    }\r\n  }\r\n\r\n  appendTo (masked: AppendTail): ChangeDetails {\r\n    if (!(masked instanceof g.IMask.MaskedPattern)) {\r\n      const tail = new ContinuousTailDetails(this.toString());\r\n      return tail.appendTo(masked);\r\n    }\r\n\r\n    const details = new ChangeDetails();\r\n\r\n    for (let ci=0; ci < this.chunks.length && !details.skip; ++ci) {\r\n      const chunk = this.chunks[ci];\r\n\r\n      const lastBlockIter = masked._mapPosToBlock(masked.value.length);\r\n      const stop = chunk.stop;\r\n      let chunkBlock;\r\n      if (stop &&\r\n        // if block not found or stop is behind lastBlock\r\n        (!lastBlockIter || lastBlockIter.index <= stop)\r\n      ) {\r\n        if (\r\n          chunk instanceof ChunksTailDetails ||\r\n          // for continuous block also check if stop is exist\r\n          masked._stops.indexOf(stop) >= 0\r\n        ) {\r\n          details.aggregate(masked._appendPlaceholder(stop));\r\n        }\r\n        chunkBlock = chunk instanceof ChunksTailDetails && masked._blocks[stop];\r\n      }\r\n\r\n      if (chunkBlock) {\r\n        const tailDetails = chunkBlock.appendTail(chunk);\r\n        tailDetails.skip = false; // always ignore skip, it will be set on last\r\n        details.aggregate(tailDetails);\r\n        masked._value += tailDetails.inserted;\r\n\r\n        // get not inserted chars\r\n        const remainChars = chunk.toString().slice(tailDetails.rawInserted.length);\r\n        if (remainChars) details.aggregate(masked.append(remainChars, { tail: true }));\r\n      } else {\r\n        details.aggregate(masked.append(chunk.toString(), { tail: true }));\r\n      }\r\n    };\r\n\r\n    return details;\r\n  }\r\n\r\n  get state (): ChunksTailState {\r\n    return {\r\n      chunks: this.chunks.map(c => c.state),\r\n      from: this.from,\r\n      stop: this.stop,\r\n      blockIndex: this.blockIndex,\r\n    };\r\n  }\r\n\r\n  set state (state: ChunksTailState) {\r\n    const { chunks, ...props } = state;\r\n    Object.assign(this, props);\r\n    this.chunks = chunks.map(cstate => {\r\n      const chunk = \"chunks\" in cstate ?\r\n        new ChunksTailDetails() :\r\n        new ContinuousTailDetails();\r\n      // $FlowFixMe already checked above\r\n      chunk.state = cstate;\r\n      return chunk;\r\n    });\r\n  }\r\n\r\n  shiftBefore (pos: number): string {\r\n    if (this.from >= pos || !this.chunks.length) return '';\r\n\r\n    const chunkShiftPos = pos - this.from;\r\n    let ci=0;\r\n    while (ci < this.chunks.length) {\r\n      const chunk = this.chunks[ci];\r\n      const shiftChar = chunk.shiftBefore(chunkShiftPos);\r\n\r\n      if (chunk.toString()) {\r\n        // chunk still contains value\r\n        // but not shifted - means no more available chars to shift\r\n        if (!shiftChar) break;\r\n        ++ci;\r\n      } else {\r\n        // clean if chunk has no value\r\n        this.chunks.splice(ci, 1);\r\n      }\r\n\r\n      if (shiftChar) return shiftChar;\r\n    }\r\n\r\n    return '';\r\n  }\r\n}\r\n","// @flow\r\nimport {DIRECTION, type Direction, forceDirection} from '../core/utils.js';\r\nimport ChangeDetails from '../core/change-details.js';\r\nimport Masked, {type AppendFlags, type ExtractFlags, type MaskedOptions, type MaskedState} from './base.js';\r\nimport PatternInputDefinition, {DEFAULT_INPUT_DEFINITIONS, type Definitions} from './pattern/input-definition.js';\r\nimport PatternFixedDefinition from './pattern/fixed-definition.js';\r\nimport { type TailDetails } from '../core/tail-details.js';\r\nimport ChunksTailDetails from './pattern/chunk-tail-details.js';\r\nimport ContinuousTailDetails from '../core/continuous-tail-details.js';\r\nimport {type PatternBlock} from './pattern/block.js';\r\nimport createMask from './factory.js';\r\n\r\n\r\ntype MaskedPatternOptions = {\r\n  ...MaskedOptions<string>,\r\n  definitions?: $PropertyType<MaskedPattern, 'definitions'>,\r\n  blocks?: $PropertyType<MaskedPattern, 'blocks'>,\r\n  placeholderChar?: $PropertyType<MaskedPattern, 'placeholderChar'>,\r\n  lazy?: $PropertyType<MaskedPattern, 'lazy'>,\r\n};\r\n\r\ntype MaskedPatternState = {|\r\n  ...MaskedState,\r\n  _blocks: Array<*>,\r\n|};\r\n\r\ntype BlockPosData = {\r\n  index: number,\r\n  offset: number,\r\n};\r\n\r\n/**\r\n  Pattern mask\r\n  @param {Object} opts\r\n  @param {Object} opts.blocks\r\n  @param {Object} opts.definitions\r\n  @param {string} opts.placeholderChar\r\n  @param {boolean} opts.lazy\r\n*/\r\nexport default\r\nclass MaskedPattern extends Masked<string> {\r\n  static DEFAULTS: any;\r\n  static STOP_CHAR: string;\r\n  static ESCAPE_CHAR: string;\r\n  static InputDefinition: Class<PatternInputDefinition>;\r\n  static FixedDefinition: Class<PatternFixedDefinition>;\r\n\r\n  /** */\r\n  blocks: {[string]: Masked<*>};\r\n  /** */\r\n  definitions: Definitions;\r\n  /** Single char for empty input */\r\n  placeholderChar: string;\r\n  /** Show placeholder only when needed */\r\n  lazy: boolean;\r\n  _blocks: Array<PatternBlock>;\r\n  _maskedBlocks: {[string]: Array<number>};\r\n  _stops: Array<number>;\r\n\r\n  constructor (opts: any={}) {  // TODO type $Shape<MaskedPatternOptions>={} does not work\r\n    opts.definitions = Object.assign({}, DEFAULT_INPUT_DEFINITIONS, opts.definitions);\r\n    super({\r\n      ...MaskedPattern.DEFAULTS,\r\n      ...opts,\r\n    });\r\n  }\r\n\r\n  /**\r\n    @override\r\n    @param {Object} opts\r\n  */\r\n  _update (opts: $Shape<MaskedPatternOptions>={}) {\r\n    opts.definitions = Object.assign({}, this.definitions, opts.definitions);\r\n    super._update(opts);\r\n    this._rebuildMask();\r\n  }\r\n\r\n  /** */\r\n  _rebuildMask () {\r\n    const defs = this.definitions;\r\n    this._blocks = [];\r\n    this._stops = [];\r\n    this._maskedBlocks = {};\r\n\r\n    let pattern = this.mask;\r\n    if (!pattern || !defs) return;\r\n\r\n    let unmaskingBlock = false;\r\n    let optionalBlock = false;\r\n\r\n    for (let i=0; i<pattern.length; ++i) {\r\n      if (this.blocks) {\r\n        const p = pattern.slice(i);\r\n        const bNames = Object.keys(this.blocks).filter(bName => p.indexOf(bName) === 0);\r\n        // order by key length\r\n        bNames.sort((a, b) => b.length - a.length);\r\n        // use block name with max length\r\n        const bName = bNames[0];\r\n        if (bName) {\r\n          const maskedBlock = createMask({\r\n            parent: this,\r\n            lazy: this.lazy,\r\n            placeholderChar: this.placeholderChar,\r\n            overwrite: this.overwrite,\r\n            ...this.blocks[bName]\r\n          });\r\n\r\n          if (maskedBlock) {\r\n            this._blocks.push(maskedBlock);\r\n\r\n            // store block index\r\n            if (!this._maskedBlocks[bName]) this._maskedBlocks[bName] = [];\r\n            this._maskedBlocks[bName].push(this._blocks.length - 1);\r\n          }\r\n\r\n          i += bName.length - 1;\r\n          continue;\r\n        }\r\n      }\r\n\r\n      let char = pattern[i];\r\n      let isInput = char in defs;\r\n\r\n      if (char === MaskedPattern.STOP_CHAR) {\r\n        this._stops.push(this._blocks.length);\r\n        continue;\r\n      }\r\n\r\n      if (char === '{' || char === '}') {\r\n        unmaskingBlock = !unmaskingBlock;\r\n        continue;\r\n      }\r\n\r\n      if (char === '[' || char === ']') {\r\n        optionalBlock = !optionalBlock;\r\n        continue;\r\n      }\r\n\r\n      if (char === MaskedPattern.ESCAPE_CHAR) {\r\n        ++i;\r\n        char = pattern[i];\r\n        if (!char) break;\r\n        isInput = false;\r\n      }\r\n\r\n      const def = isInput ?\r\n        new PatternInputDefinition({\r\n          parent: this,\r\n          lazy: this.lazy,\r\n          placeholderChar: this.placeholderChar,\r\n          mask: defs[char],\r\n          isOptional: optionalBlock,\r\n        }) :\r\n        new PatternFixedDefinition({\r\n          char,\r\n          isUnmasking: unmaskingBlock,\r\n        });\r\n\r\n      this._blocks.push(def);\r\n    }\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  get state (): MaskedPatternState {\r\n    return {\r\n      ...super.state,\r\n      _blocks: this._blocks.map(b => b.state),\r\n    };\r\n  }\r\n\r\n  set state (state: MaskedPatternState) {\r\n    const {_blocks, ...maskedState} = state;\r\n    this._blocks.forEach((b, bi) => b.state = _blocks[bi]);\r\n    super.state = maskedState;\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  reset () {\r\n    super.reset();\r\n    this._blocks.forEach(b => b.reset());\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  get isComplete (): boolean {\r\n    return this._blocks.every(b => b.isComplete);\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  doCommit () {\r\n    this._blocks.forEach(b => b.doCommit());\r\n    super.doCommit();\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  get unmaskedValue (): string {\r\n    return this._blocks.reduce((str, b) => str += b.unmaskedValue, '');\r\n  }\r\n\r\n  set unmaskedValue (unmaskedValue: string) {\r\n    super.unmaskedValue = unmaskedValue;\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  get value (): string {\r\n    // TODO return _value when not in change?\r\n    return this._blocks.reduce((str, b) => str += b.value, '');\r\n  }\r\n\r\n  set value (value: string) {\r\n    super.value = value;\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  appendTail (tail: string | TailDetails): ChangeDetails {\r\n    return super.appendTail(tail).aggregate(this._appendPlaceholder());\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  _appendCharRaw (ch: string, flags: AppendFlags={}): ChangeDetails {\r\n    ch = this.doPrepare(ch, flags);\r\n    const blockIter = this._mapPosToBlock(this.value.length);\r\n    const details = new ChangeDetails();\r\n    if (!blockIter) return details;\r\n\r\n    for (let bi=blockIter.index; ; ++bi) {\r\n      const block = this._blocks[bi];\r\n      if (!block) break;\r\n\r\n      const blockDetails = block._appendChar(ch, flags);\r\n\r\n      const skip = blockDetails.skip;\r\n      details.aggregate(blockDetails);\r\n\r\n      if (skip || blockDetails.rawInserted) break; // go next char\r\n    }\r\n\r\n    return details;\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  extractTail (fromPos?: number=0, toPos?: number=this.value.length): ChunksTailDetails {\r\n    const chunkTail = new ChunksTailDetails();\r\n    if (fromPos === toPos) return chunkTail;\r\n\r\n    this._forEachBlocksInRange(fromPos, toPos, (b, bi, bFromPos, bToPos) => {\r\n      const blockChunk = b.extractTail(bFromPos, bToPos);\r\n      blockChunk.stop = this._findStopBefore(bi);\r\n      blockChunk.from = this._blockStartPos(bi);\r\n      if (blockChunk instanceof ChunksTailDetails) blockChunk.blockIndex = bi;\r\n\r\n      chunkTail.extend(blockChunk);\r\n    });\r\n\r\n    return chunkTail;\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  extractInput (fromPos?: number=0, toPos?: number=this.value.length, flags: ExtractFlags={}): string {\r\n    if (fromPos === toPos) return '';\r\n\r\n    let input = '';\r\n\r\n    this._forEachBlocksInRange(fromPos, toPos, (b, _, fromPos, toPos) => {\r\n      input += b.extractInput(fromPos, toPos, flags);\r\n    });\r\n\r\n    return input;\r\n  }\r\n\r\n  _findStopBefore (blockIndex: number): ?number {\r\n    let stopBefore;\r\n    for (let si=0; si<this._stops.length; ++si) {\r\n      const stop = this._stops[si];\r\n      if (stop <= blockIndex) stopBefore = stop;\r\n      else break;\r\n    }\r\n    return stopBefore;\r\n  }\r\n\r\n  /** Appends placeholder depending on laziness */\r\n  _appendPlaceholder (toBlockIndex: ?number): ChangeDetails {\r\n    const details = new ChangeDetails();\r\n    if (this.lazy && toBlockIndex == null) return details;\r\n\r\n    const startBlockIter = this._mapPosToBlock(this.value.length);\r\n    if (!startBlockIter) return details;\r\n\r\n    const startBlockIndex = startBlockIter.index;\r\n    const endBlockIndex = toBlockIndex != null ? toBlockIndex : this._blocks.length;\r\n\r\n    this._blocks.slice(startBlockIndex, endBlockIndex)\r\n      .forEach(b => {\r\n        if (!b.lazy || toBlockIndex != null) {\r\n          // $FlowFixMe `_blocks` may not be present\r\n          const args = b._blocks != null ? [b._blocks.length] : [];\r\n          const bDetails = b._appendPlaceholder(...args);\r\n          this._value += bDetails.inserted;\r\n          details.aggregate(bDetails);\r\n        }\r\n      });\r\n\r\n    return details;\r\n  }\r\n\r\n  /** Finds block in pos */\r\n  _mapPosToBlock (pos: number): ?BlockPosData {\r\n    let accVal = '';\r\n    for (let bi=0; bi<this._blocks.length; ++bi) {\r\n      const block = this._blocks[bi];\r\n      const blockStartPos = accVal.length;\r\n\r\n      accVal += block.value;\r\n\r\n      if (pos <= accVal.length) {\r\n        return {\r\n          index: bi,\r\n          offset: pos - blockStartPos,\r\n        };\r\n      }\r\n    }\r\n  }\r\n\r\n  /** */\r\n  _blockStartPos (blockIndex: number): number {\r\n    return this._blocks\r\n      .slice(0, blockIndex)\r\n      .reduce((pos, b) => pos += b.value.length, 0);\r\n  }\r\n\r\n  /** */\r\n  _forEachBlocksInRange (fromPos: number, toPos: number=this.value.length, fn: (block: PatternBlock, blockIndex: number, fromPos: number, toPos: number) => void) {\r\n    const fromBlockIter = this._mapPosToBlock(fromPos);\r\n\r\n    if (fromBlockIter) {\r\n      const toBlockIter = this._mapPosToBlock(toPos);\r\n      // process first block\r\n      const isSameBlock = toBlockIter && fromBlockIter.index === toBlockIter.index;\r\n      const fromBlockStartPos = fromBlockIter.offset;\r\n      const fromBlockEndPos = toBlockIter && isSameBlock ?\r\n        toBlockIter.offset :\r\n        this._blocks[fromBlockIter.index].value.length;\r\n      fn(this._blocks[fromBlockIter.index], fromBlockIter.index, fromBlockStartPos, fromBlockEndPos);\r\n\r\n      if (toBlockIter && !isSameBlock) {\r\n        // process intermediate blocks\r\n        for (let bi=fromBlockIter.index+1; bi<toBlockIter.index; ++bi) {\r\n          fn(this._blocks[bi], bi, 0, this._blocks[bi].value.length);\r\n        }\r\n\r\n        // process last block\r\n        fn(this._blocks[toBlockIter.index], toBlockIter.index, 0, toBlockIter.offset);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  remove (fromPos: number=0, toPos: number=this.value.length): ChangeDetails {\r\n    const removeDetails = super.remove(fromPos, toPos);\r\n    this._forEachBlocksInRange(fromPos, toPos, (b, _, bFromPos, bToPos) => {\r\n      removeDetails.aggregate(b.remove(bFromPos, bToPos));\r\n    });\r\n    return removeDetails;\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  nearestInputPos (cursorPos: number, direction: Direction=DIRECTION.NONE): number {\r\n    // TODO refactor - extract alignblock\r\n\r\n    const beginBlockData = this._mapPosToBlock(cursorPos) || {index: 0, offset: 0};\r\n    const {\r\n      offset: beginBlockOffset,\r\n      index: beginBlockIndex,\r\n    } = beginBlockData;\r\n    const beginBlock = this._blocks[beginBlockIndex];\r\n\r\n    if (!beginBlock) return cursorPos;\r\n\r\n    let beginBlockCursorPos = beginBlockOffset;\r\n    // if position inside block - try to adjust it\r\n    if (beginBlockCursorPos !== 0 && beginBlockCursorPos < beginBlock.value.length) {\r\n      beginBlockCursorPos = beginBlock.nearestInputPos(beginBlockOffset, forceDirection(direction));\r\n    }\r\n\r\n    const cursorAtRight = beginBlockCursorPos === beginBlock.value.length;\r\n    const cursorAtLeft = beginBlockCursorPos === 0;\r\n\r\n    //  cursor is INSIDE first block (not at bounds)\r\n    if (!cursorAtLeft && !cursorAtRight) return this._blockStartPos(beginBlockIndex) + beginBlockCursorPos;\r\n\r\n    const searchBlockIndex = cursorAtRight ? beginBlockIndex + 1 : beginBlockIndex;\r\n\r\n    if (direction === DIRECTION.NONE) {\r\n      // NONE direction used to calculate start input position if no chars were removed\r\n      // FOR NONE:\r\n      // -\r\n      // input|any\r\n      // ->\r\n      //  any|input\r\n      // <-\r\n      //  filled-input|any\r\n\r\n      // check if first block at left is input\r\n      if (searchBlockIndex > 0) {\r\n        const blockIndexAtLeft = searchBlockIndex-1;\r\n        const blockAtLeft = this._blocks[blockIndexAtLeft];\r\n        const blockInputPos = blockAtLeft.nearestInputPos(0, DIRECTION.NONE);\r\n        // is input\r\n        if (!blockAtLeft.value.length || blockInputPos !== blockAtLeft.value.length) {\r\n          return this._blockStartPos(searchBlockIndex);\r\n        }\r\n      }\r\n\r\n      // ->\r\n      let firstInputAtRight = searchBlockIndex;\r\n      for (let bi=firstInputAtRight; bi < this._blocks.length; ++bi) {\r\n        const blockAtRight = this._blocks[bi];\r\n        const blockInputPos = blockAtRight.nearestInputPos(0, DIRECTION.NONE);\r\n        if (!blockAtRight.value.length || blockInputPos !== blockAtRight.value.length) {\r\n          return this._blockStartPos(bi) + blockInputPos;\r\n        }\r\n      }\r\n\r\n      // <-\r\n      // find first non-fixed symbol\r\n      for (let bi=searchBlockIndex-1; bi >= 0; --bi) {\r\n        const block = this._blocks[bi];\r\n        const blockInputPos = block.nearestInputPos(0, DIRECTION.NONE);\r\n        // is input\r\n        if (!block.value.length || blockInputPos !== block.value.length) {\r\n          return this._blockStartPos(bi) + block.value.length;\r\n        }\r\n      }\r\n\r\n      return cursorPos;\r\n    }\r\n\r\n    if (direction === DIRECTION.LEFT || direction === DIRECTION.FORCE_LEFT) {\r\n      // -\r\n      //  any|filled-input\r\n      // <-\r\n      //  any|first not empty is not-len-aligned\r\n      //  not-0-aligned|any\r\n      // ->\r\n      //  any|not-len-aligned or end\r\n\r\n      // check if first block at right is filled input\r\n      let firstFilledBlockIndexAtRight;\r\n      for (let bi=searchBlockIndex; bi < this._blocks.length; ++bi) {\r\n        if (this._blocks[bi].value) {\r\n          firstFilledBlockIndexAtRight = bi;\r\n          break;\r\n        }\r\n      }\r\n      if (firstFilledBlockIndexAtRight != null) {\r\n        const filledBlock = this._blocks[firstFilledBlockIndexAtRight];\r\n        const blockInputPos = filledBlock.nearestInputPos(0, DIRECTION.RIGHT);\r\n        if (blockInputPos === 0 && filledBlock.unmaskedValue.length) {\r\n          // filled block is input\r\n          return this._blockStartPos(firstFilledBlockIndexAtRight) + blockInputPos;\r\n        }\r\n      }\r\n\r\n      // <-\r\n      // find this vars\r\n      let firstFilledInputBlockIndex = -1;\r\n      let firstEmptyInputBlockIndex;  // TODO consider nested empty inputs\r\n      for (let bi=searchBlockIndex-1; bi >= 0; --bi) {\r\n        const block = this._blocks[bi];\r\n        const blockInputPos = block.nearestInputPos(block.value.length, DIRECTION.FORCE_LEFT);\r\n        if (!block.value || blockInputPos !== 0) firstEmptyInputBlockIndex = bi;\r\n        if (blockInputPos !== 0) {\r\n          if (blockInputPos !== block.value.length) {\r\n            // aligned inside block - return immediately\r\n            return this._blockStartPos(bi) + blockInputPos;\r\n          } else {\r\n            // found filled\r\n            firstFilledInputBlockIndex = bi;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (direction === DIRECTION.LEFT) {\r\n        // try find first empty input before start searching position only when not forced\r\n        for (let bi=firstFilledInputBlockIndex+1; bi <= Math.min(searchBlockIndex, this._blocks.length-1); ++bi) {\r\n          const block = this._blocks[bi];\r\n          const blockInputPos = block.nearestInputPos(0, DIRECTION.NONE);\r\n          const blockAlignedPos = this._blockStartPos(bi) + blockInputPos;\r\n\r\n          if (blockAlignedPos > cursorPos) break;\r\n          // if block is not lazy input\r\n          if (blockInputPos !== block.value.length) return blockAlignedPos;\r\n        }\r\n      }\r\n\r\n      // process overflow\r\n      if (firstFilledInputBlockIndex >= 0) {\r\n        return this._blockStartPos(firstFilledInputBlockIndex) + this._blocks[firstFilledInputBlockIndex].value.length;\r\n      }\r\n\r\n      // for lazy if has aligned left inside fixed and has came to the start - use start position\r\n      if (\r\n        direction === DIRECTION.FORCE_LEFT ||\r\n        this.lazy && !this.extractInput() && !isInput(this._blocks[searchBlockIndex])\r\n      ) {\r\n        return 0;\r\n      }\r\n\r\n      if (firstEmptyInputBlockIndex != null) {\r\n        return this._blockStartPos(firstEmptyInputBlockIndex);\r\n      }\r\n\r\n      // find first input\r\n      for (let bi=searchBlockIndex; bi < this._blocks.length; ++bi) {\r\n        const block = this._blocks[bi];\r\n        const blockInputPos = block.nearestInputPos(0, DIRECTION.NONE);\r\n        // is input\r\n        if (!block.value.length || blockInputPos !== block.value.length) {\r\n          return this._blockStartPos(bi) + blockInputPos;\r\n        }\r\n      }\r\n\r\n      return 0;\r\n    }\r\n\r\n    if (direction === DIRECTION.RIGHT || direction === DIRECTION.FORCE_RIGHT) {\r\n      // ->\r\n      //  any|not-len-aligned and filled\r\n      //  any|not-len-aligned\r\n      // <-\r\n      //  not-0-aligned or start|any\r\n      let firstInputBlockAlignedIndex: ?number;\r\n      let firstInputBlockAlignedPos: ?number;\r\n      for (let bi=searchBlockIndex; bi < this._blocks.length; ++bi) {\r\n        const block = this._blocks[bi];\r\n        const blockInputPos = block.nearestInputPos(0, DIRECTION.NONE);\r\n        if (blockInputPos !== block.value.length) {\r\n          firstInputBlockAlignedPos = this._blockStartPos(bi) + blockInputPos;\r\n          firstInputBlockAlignedIndex = bi;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (firstInputBlockAlignedIndex != null && firstInputBlockAlignedPos != null) {\r\n        for (let bi=firstInputBlockAlignedIndex; bi < this._blocks.length; ++bi) {\r\n          const block = this._blocks[bi];\r\n          const blockInputPos = block.nearestInputPos(0, DIRECTION.FORCE_RIGHT);\r\n          if (blockInputPos !== block.value.length) {\r\n            return this._blockStartPos(bi) + blockInputPos;\r\n          }\r\n        }\r\n        return direction === DIRECTION.FORCE_RIGHT ?\r\n          this.value.length :\r\n          firstInputBlockAlignedPos;\r\n      }\r\n\r\n      for (let bi=Math.min(searchBlockIndex, this._blocks.length-1); bi >= 0; --bi) {\r\n        const block = this._blocks[bi];\r\n        const blockInputPos = block.nearestInputPos(block.value.length, DIRECTION.LEFT);\r\n        if (blockInputPos !== 0) {\r\n          const alignedPos = this._blockStartPos(bi) + blockInputPos;\r\n          if (alignedPos >= cursorPos) return alignedPos;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    return cursorPos;\r\n  }\r\n\r\n  /** Get block by name */\r\n  maskedBlock (name: string): ?PatternBlock {\r\n    return this.maskedBlocks(name)[0];\r\n  }\r\n\r\n  /** Get all blocks by name */\r\n  maskedBlocks (name: string): Array<PatternBlock> {\r\n    const indices = this._maskedBlocks[name];\r\n    if (!indices) return [];\r\n    return indices.map(gi => this._blocks[gi]);\r\n  }\r\n}\r\nMaskedPattern.DEFAULTS = {\r\n  lazy: true,\r\n  placeholderChar: '_'\r\n};\r\nMaskedPattern.STOP_CHAR = '`';\r\nMaskedPattern.ESCAPE_CHAR = '\\\\';\r\nMaskedPattern.InputDefinition = PatternInputDefinition;\r\nMaskedPattern.FixedDefinition = PatternFixedDefinition;\r\n\r\nfunction isInput (block: PatternBlock): boolean {\r\n  if (!block) return false;\r\n\r\n  const value = block.value;\r\n  return !value || block.nearestInputPos(0, DIRECTION.NONE) !== value.length;\r\n}\r\n","// @flow\r\nimport MaskedPattern from './pattern.js';\r\nimport { type AppendFlags } from './base.js';\r\n\r\n\r\n/** Pattern which accepts ranges */\r\nexport default\r\nclass MaskedRange extends MaskedPattern {\r\n  /**\r\n    Optionally sets max length of pattern.\r\n    Used when pattern length is longer then `to` param length. Pads zeros at start in this case.\r\n  */\r\n  maxLength: number;\r\n  /** Min bound */\r\n  from: number;\r\n  /** Max bound */\r\n  to: number;\r\n  /** */\r\n  autofix: boolean;\r\n\r\n  get _matchFrom (): number {\r\n    return this.maxLength - String(this.from).length;\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  _update (opts: any) {  // TODO type\r\n    opts = {\r\n      to: this.to || 0,\r\n      from: this.from || 0,\r\n      ...opts,\r\n    };\r\n\r\n    let maxLength = String(opts.to).length;\r\n    if (opts.maxLength != null) maxLength = Math.max(maxLength, opts.maxLength);\r\n    opts.maxLength = maxLength;\r\n\r\n    const fromStr = String(opts.from).padStart(maxLength, '0');\r\n    const toStr = String(opts.to).padStart(maxLength, '0');\r\n    let sameCharsCount = 0;\r\n    while (sameCharsCount < toStr.length && toStr[sameCharsCount] === fromStr[sameCharsCount]) ++sameCharsCount;\r\n    opts.mask = toStr.slice(0, sameCharsCount).replace(/0/g, '\\\\0') + '0'.repeat(maxLength - sameCharsCount);\r\n\r\n    super._update(opts);\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  get isComplete (): boolean {\r\n    return super.isComplete && Boolean(this.value);\r\n  }\r\n\r\n  boundaries (str: string): [string, string] {\r\n    let minstr = '';\r\n    let maxstr = '';\r\n\r\n    const [, placeholder, num] = str.match(/^(\\D*)(\\d*)(\\D*)/) || [];\r\n    if (num) {\r\n      minstr = '0'.repeat(placeholder.length) + num;\r\n      maxstr = '9'.repeat(placeholder.length) + num;\r\n    }\r\n    minstr = minstr.padEnd(this.maxLength, '0');\r\n    maxstr = maxstr.padEnd(this.maxLength, '9');\r\n\r\n    return [minstr, maxstr];\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  doPrepare (str: string, flags: AppendFlags={}): string {\r\n    str = super.doPrepare(str, flags).replace(/\\D/g, '');\r\n    if (!this.autofix) return str;\r\n\r\n    const fromStr = String(this.from).padStart(this.maxLength, '0');\r\n    const toStr = String(this.to).padStart(this.maxLength, '0');\r\n\r\n    const val = this.value;\r\n    let prepStr = '';\r\n    for (let ci=0; ci<str.length; ++ci) {\r\n      const nextVal = val + prepStr + str[ci];\r\n      const [minstr, maxstr] = this.boundaries(nextVal);\r\n\r\n      if (Number(maxstr) < this.from) prepStr += fromStr[nextVal.length - 1];\r\n      else if (Number(minstr) > this.to) prepStr += toStr[nextVal.length - 1];\r\n      else prepStr += str[ci];\r\n    }\r\n\r\n    return prepStr;\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  doValidate (...args: *): boolean {\r\n    const str = this.value;\r\n\r\n    const firstNonZero = str.search(/[^0]/);\r\n    if (firstNonZero === -1 && str.length <= this._matchFrom) return true;\r\n\r\n    const [minstr, maxstr] = this.boundaries(str);\r\n\r\n    return this.from <= Number(maxstr) && Number(minstr) <= this.to &&\r\n      super.doValidate(...args);\r\n  }\r\n}\r\n","// @flow\r\nimport MaskedPattern from './pattern.js';\r\nimport MaskedRange from './range.js';\r\n\r\n\r\n/** Date mask */\r\nexport default\r\nclass MaskedDate extends MaskedPattern {\r\n  static GET_DEFAULT_BLOCKS: () => {[string]: any};\r\n  static DEFAULTS: any;\r\n\r\n  /** Parse string to Date */\r\n  parse: (string) => Date;\r\n  /** Format Date to string */\r\n  format: (Date) => string;\r\n  /** Pattern mask for date according to {@link MaskedDate#format} */\r\n  pattern: string;\r\n  /** Start date */\r\n  min: ?Date;\r\n  /** End date */\r\n  max: ?Date;\r\n  /** */\r\n  autofix: boolean;\r\n\r\n  /**\r\n    @param {Object} opts\r\n  */\r\n  constructor (opts: any) {\r\n    super({\r\n      ...MaskedDate.DEFAULTS,\r\n      ...opts\r\n    });\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  _update (opts: any) {\r\n    if (opts.mask === Date) delete opts.mask;\r\n    if (opts.pattern) opts.mask = opts.pattern;\r\n\r\n    const blocks = opts.blocks;\r\n    opts.blocks = Object.assign({}, MaskedDate.GET_DEFAULT_BLOCKS());\r\n    // adjust year block\r\n    if (opts.min) opts.blocks.Y.from = opts.min.getFullYear();\r\n    if (opts.max) opts.blocks.Y.to = opts.max.getFullYear();\r\n    if (opts.min && opts.max && opts.blocks.Y.from === opts.blocks.Y.to\r\n    ) {\r\n      opts.blocks.m.from = opts.min.getMonth() + 1;\r\n      opts.blocks.m.to = opts.max.getMonth() + 1;\r\n\r\n      if (opts.blocks.m.from === opts.blocks.m.to) {\r\n        opts.blocks.d.from = opts.min.getDate();\r\n        opts.blocks.d.to = opts.max.getDate();\r\n      }\r\n    }\r\n    Object.assign(opts.blocks, blocks);\r\n\r\n    // add autofix\r\n    Object.keys(opts.blocks).forEach(bk => {\r\n      const b = opts.blocks[bk];\r\n      if (!('autofix' in b)) b.autofix = opts.autofix;\r\n    });\r\n\r\n    super._update(opts);\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  doValidate (...args: *): boolean {\r\n    const date = this.date;\r\n\r\n    return super.doValidate(...args) &&\r\n      (!this.isComplete ||\r\n        this.isDateExist(this.value) && date != null &&\r\n        (this.min == null || this.min <= date) &&\r\n        (this.max == null || date <= this.max));\r\n  }\r\n\r\n  /** Checks if date is exists */\r\n  isDateExist (str: string): boolean {\r\n    return this.format(this.parse(str)) === str;\r\n  }\r\n\r\n  /** Parsed Date */\r\n  get date (): ?Date {\r\n    return this.isComplete ?\r\n      this.parse(this.value) :\r\n      null;\r\n  }\r\n  set date (date: Date) {\r\n    this.value = this.format(date);\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  get typedValue (): ?Date {\r\n    return this.date;\r\n  }\r\n  set typedValue (value: Date) {\r\n    this.date = value;\r\n  }\r\n}\r\nMaskedDate.DEFAULTS = {\r\n  pattern: 'd{.}`m{.}`Y',\r\n  format: date => {\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const year = date.getFullYear();\r\n\r\n    return [day, month, year].join('.');\r\n  },\r\n  parse: str => {\r\n    const [day, month, year] = str.split('.');\r\n    return new Date(year, month - 1, day);\r\n  },\r\n};\r\nMaskedDate.GET_DEFAULT_BLOCKS = () => ({\r\n  d: {\r\n    mask: MaskedRange,\r\n    from: 1,\r\n    to: 31,\r\n    maxLength: 2,\r\n  },\r\n  m: {\r\n    mask: MaskedRange,\r\n    from: 1,\r\n    to: 12,\r\n    maxLength: 2,\r\n  },\r\n  Y: {\r\n    mask: MaskedRange,\r\n    from: 1900,\r\n    to: 9999,\r\n  }\r\n});\r\n","// @flow\r\n\r\nexport\r\ntype ElementEvent =\r\n  'selectionChange' |\r\n  'input' |\r\n  'drop' |\r\n  'click' |\r\n  'focus' |\r\n  'commit';\r\n\r\n/**\r\n  Generic element API to use with mask\r\n  @interface\r\n*/\r\nexport default\r\nclass MaskElement {\r\n  /** */\r\n  +_unsafeSelectionStart: number;\r\n  /** */\r\n  +_unsafeSelectionEnd: number;\r\n  /** */\r\n  value: string;\r\n\r\n  /** Safely returns selection start */\r\n  get selectionStart (): number {\r\n    let start;\r\n    try {\r\n      start = this._unsafeSelectionStart;\r\n    } catch (e) {}\r\n\r\n    return start != null ?\r\n      start :\r\n      this.value.length;\r\n  }\r\n\r\n  /** Safely returns selection end */\r\n  get selectionEnd (): number {\r\n    let end;\r\n    try {\r\n      end = this._unsafeSelectionEnd;\r\n    } catch (e) {}\r\n\r\n    return end != null ?\r\n      end :\r\n      this.value.length;\r\n  }\r\n\r\n  /** Safely sets element selection */\r\n  select (start: number, end: number) {\r\n    if (start == null || end == null ||\r\n      start === this.selectionStart && end === this.selectionEnd) return;\r\n\r\n    try {\r\n      this._unsafeSelect(start, end);\r\n    } catch (e) {}\r\n  }\r\n\r\n  /** Should be overriden in subclasses */\r\n  _unsafeSelect (start: number, end: number): void {}\r\n  /** Should be overriden in subclasses */\r\n  get isActive (): boolean { return false; }\r\n  /** Should be overriden in subclasses */\r\n  bindEvents (handlers: {[ElementEvent]: Function}) {}\r\n  /** Should be overriden in subclasses */\r\n  unbindEvents (): void {}\r\n}\r\n","// @flow\r\nimport MaskElement, {type ElementEvent} from './mask-element.js';\r\n\r\n\r\n/** Bridge between HTMLElement and {@link Masked} */\r\nexport default\r\nclass HTMLMaskElement extends MaskElement {\r\n  /** Mapping between HTMLElement events and mask internal events */\r\n  static EVENTS_MAP: {[ElementEvent]: string};\r\n  /** HTMLElement to use mask on */\r\n  input: HTMLTextAreaElement | HTMLInputElement;\r\n  _handlers: {[string]: Function};\r\n\r\n  /**\r\n    @param {HTMLInputElement|HTMLTextAreaElement} input\r\n  */\r\n  constructor (input: HTMLTextAreaElement | HTMLInputElement) {\r\n    super();\r\n    this.input = input;\r\n    this._handlers = {};\r\n  }\r\n\r\n  /**\r\n    Is element in focus\r\n    @readonly\r\n  */\r\n  get isActive (): boolean {\r\n    return this.input === document.activeElement;\r\n  }\r\n\r\n  /**\r\n    Returns HTMLElement selection start\r\n    @override\r\n  */\r\n  get _unsafeSelectionStart (): number {\r\n    return this.input.selectionStart;\r\n  }\r\n\r\n  /**\r\n    Returns HTMLElement selection end\r\n    @override\r\n  */\r\n  get _unsafeSelectionEnd (): number {\r\n    return this.input.selectionEnd;\r\n  }\r\n\r\n  /**\r\n    Sets HTMLElement selection\r\n    @override\r\n  */\r\n  _unsafeSelect (start: number, end: number) {\r\n    this.input.setSelectionRange(start, end);\r\n  }\r\n\r\n  /**\r\n    HTMLElement value\r\n    @override\r\n  */\r\n  get value (): string {\r\n    return this.input.value;\r\n  }\r\n  set value (value: string) {\r\n    this.input.value = value;\r\n  }\r\n\r\n  /**\r\n    Binds HTMLElement events to mask internal events\r\n    @override\r\n  */\r\n  bindEvents (handlers: {[ElementEvent]: Function}) {\r\n    Object.keys(handlers)\r\n      .forEach(event => this._toggleEventHandler(HTMLMaskElement.EVENTS_MAP[event], handlers[event]));\r\n  }\r\n\r\n  /**\r\n    Unbinds HTMLElement events to mask internal events\r\n    @override\r\n  */\r\n  unbindEvents () {\r\n    Object.keys(this._handlers)\r\n      .forEach(event => this._toggleEventHandler(event));\r\n  }\r\n\r\n  /** */\r\n  _toggleEventHandler (event: string, handler?: Function): void {\r\n    if (this._handlers[event]) {\r\n      this.input.removeEventListener(event, this._handlers[event]);\r\n      delete this._handlers[event];\r\n    }\r\n\r\n    if (handler) {\r\n      this.input.addEventListener(event, handler);\r\n      this._handlers[event] = handler;\r\n    }\r\n  }\r\n}\r\nHTMLMaskElement.EVENTS_MAP = {\r\n  selectionChange: 'keydown',\r\n  input: 'input',\r\n  drop: 'drop',\r\n  click: 'click',\r\n  focus: 'focus',\r\n  commit: 'blur',\r\n};\r\n","// @flow\r\nimport {objectIncludes, DIRECTION, type Selection} from '../core/utils.js';\r\nimport ActionDetails from '../core/action-details.js';\r\nimport MaskedDate from '../masked/date.js';\r\nimport createMask, {maskedClass} from '../masked/factory.js';\r\nimport type Masked from '../masked/base.js';\r\nimport {type Mask} from '../masked/base.js';\r\nimport MaskElement from './mask-element.js';\r\nimport HTMLMaskElement from './html-mask-element.js';\r\n\r\n\r\n/** Listens to element events and controls changes between element and {@link Masked} */\r\nexport default\r\nclass InputMask {\r\n  /**\r\n    View element\r\n    @readonly\r\n  */\r\n  el: MaskElement;\r\n\r\n  /**\r\n    Internal {@link Masked} model\r\n    @readonly\r\n  */\r\n  masked: Masked<*>;\r\n  alignCursor: () => void;\r\n  alignCursorFriendly: () => void;\r\n\r\n  _listeners: {[string]: Array<Function>};\r\n  _value: string;\r\n  _changingCursorPos: number;\r\n  _unmaskedValue: string;\r\n  _saveSelection: (?Event) => void;\r\n  _selection: Selection;\r\n  _onInput: () => void;\r\n  _onChange: () => void;\r\n  _onDrop: (Event) => void;\r\n  _onFocus: (Event) => void;\r\n  _cursorChanging: TimeoutID;\r\n\r\n  /**\r\n    @param {MaskElement|HTMLInputElement|HTMLTextAreaElement} el\r\n    @param {Object} opts\r\n  */\r\n  constructor (el: MaskElement | HTMLTextAreaElement | HTMLInputElement, opts: {[string]: any}) {\r\n    this.el = (el instanceof MaskElement) ?\r\n      el :\r\n      new HTMLMaskElement(el);\r\n    this.masked = createMask(opts);\r\n\r\n    this._listeners = {};\r\n    this._value = '';\r\n    this._unmaskedValue = '';\r\n\r\n    this._saveSelection = this._saveSelection.bind(this);\r\n    this._onInput = this._onInput.bind(this);\r\n    this._onChange = this._onChange.bind(this);\r\n    this._onDrop = this._onDrop.bind(this);\r\n    this._onFocus = this._onFocus.bind(this);\r\n    this.alignCursor = this.alignCursor.bind(this);\r\n    this.alignCursorFriendly = this.alignCursorFriendly.bind(this);\r\n\r\n    this._bindEvents();\r\n\r\n    // refresh\r\n    this.updateValue();\r\n    this._onChange();\r\n  }\r\n\r\n  /** Read or update mask */\r\n  get mask (): Mask {\r\n    return this.masked.mask;\r\n  }\r\n\r\n  maskEquals (mask: Mask) {\r\n    return mask == null ||\r\n      mask === this.masked.mask ||\r\n      mask === Date && this.masked instanceof MaskedDate;\r\n  }\r\n\r\n  set mask (mask: Mask) {\r\n    if (this.maskEquals(mask)) return;\r\n\r\n    if (this.masked.constructor === maskedClass(mask)) {\r\n      this.masked.updateOptions({mask});\r\n      return;\r\n    }\r\n\r\n    const masked = createMask({mask});\r\n    masked.unmaskedValue = this.masked.unmaskedValue;\r\n    this.masked = masked;\r\n  }\r\n\r\n  /** Raw value */\r\n  get value (): string {\r\n    return this._value;\r\n  }\r\n\r\n  set value (str: string) {\r\n    this.masked.value = str;\r\n    this.updateControl();\r\n    this.alignCursor();\r\n  }\r\n\r\n  /** Unmasked value */\r\n  get unmaskedValue (): string {\r\n    return this._unmaskedValue;\r\n  }\r\n\r\n  set unmaskedValue (str: string) {\r\n    this.masked.unmaskedValue = str;\r\n    this.updateControl();\r\n    this.alignCursor();\r\n  }\r\n\r\n  /** Typed unmasked value */\r\n  get typedValue (): any {\r\n    return this.masked.typedValue;\r\n  }\r\n\r\n  set typedValue (val: any) {\r\n    this.masked.typedValue = val;\r\n    this.updateControl();\r\n    this.alignCursor();\r\n  }\r\n\r\n  /**\r\n    Starts listening to element events\r\n    @protected\r\n  */\r\n  _bindEvents () {\r\n    this.el.bindEvents({\r\n      selectionChange: this._saveSelection,\r\n      input: this._onInput,\r\n      drop: this._onDrop,\r\n      click: this.alignCursorFriendly,\r\n      focus: this._onFocus,\r\n      commit: this._onChange,\r\n    });\r\n  }\r\n\r\n  /**\r\n    Stops listening to element events\r\n    @protected\r\n   */\r\n  _unbindEvents () {\r\n    this.el.unbindEvents();\r\n  }\r\n\r\n  /**\r\n    Fires custom event\r\n    @protected\r\n   */\r\n  _fireEvent (ev: string) {\r\n    const listeners = this._listeners[ev];\r\n    if (!listeners) return;\r\n\r\n    listeners.forEach(l => l());\r\n  }\r\n\r\n  /**\r\n    Current selection start\r\n    @readonly\r\n  */\r\n  get selectionStart (): number {\r\n    return this._cursorChanging ?\r\n      this._changingCursorPos :\r\n\r\n      this.el.selectionStart;\r\n  }\r\n\r\n  /** Current cursor position */\r\n  get cursorPos (): number {\r\n    return this._cursorChanging ?\r\n      this._changingCursorPos :\r\n\r\n      this.el.selectionEnd;\r\n  }\r\n  set cursorPos (pos: number) {\r\n    if (!this.el.isActive) return;\r\n\r\n    this.el.select(pos, pos);\r\n    this._saveSelection();\r\n  }\r\n\r\n  /**\r\n    Stores current selection\r\n    @protected\r\n  */\r\n  _saveSelection (/* ev */) {\r\n    if (this.value !== this.el.value) {\r\n      console.warn('Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly.'); // eslint-disable-line no-console\r\n    }\r\n    this._selection = {\r\n      start: this.selectionStart,\r\n      end: this.cursorPos\r\n    };\r\n  }\r\n\r\n  /** Syncronizes model value from view */\r\n  updateValue () {\r\n    this.masked.value = this.el.value;\r\n    this._value = this.masked.value;\r\n  }\r\n\r\n  /** Syncronizes view from model value, fires change events */\r\n  updateControl () {\r\n    const newUnmaskedValue = this.masked.unmaskedValue;\r\n    const newValue = this.masked.value;\r\n    const isChanged = (this.unmaskedValue !== newUnmaskedValue ||\r\n      this.value !== newValue);\r\n\r\n    this._unmaskedValue = newUnmaskedValue;\r\n    this._value = newValue;\r\n\r\n    if (this.el.value !== newValue) this.el.value = newValue;\r\n    if (isChanged) this._fireChangeEvents();\r\n  }\r\n\r\n  /** Updates options with deep equal check, recreates @{link Masked} model if mask type changes */\r\n  updateOptions (opts: {[string]: any}) {\r\n    const { mask, ...restOpts } = opts;\r\n\r\n    const updateMask = !this.maskEquals(mask);\r\n    const updateOpts = !objectIncludes(this.masked, restOpts);\r\n\r\n    if (updateMask) this.mask = mask;\r\n    if (updateOpts) this.masked.updateOptions(restOpts);\r\n\r\n    if (updateMask || updateOpts) this.updateControl();\r\n  }\r\n\r\n  /** Updates cursor */\r\n  updateCursor (cursorPos: number) {\r\n    if (cursorPos == null) return;\r\n    this.cursorPos = cursorPos;\r\n\r\n    // also queue change cursor for mobile browsers\r\n    this._delayUpdateCursor(cursorPos);\r\n  }\r\n\r\n  /**\r\n    Delays cursor update to support mobile browsers\r\n    @private\r\n  */\r\n  _delayUpdateCursor (cursorPos: number) {\r\n    this._abortUpdateCursor();\r\n    this._changingCursorPos = cursorPos;\r\n    this._cursorChanging = setTimeout(() => {\r\n      if (!this.el) return; // if was destroyed\r\n      this.cursorPos = this._changingCursorPos;\r\n      this._abortUpdateCursor();\r\n    }, 10);\r\n  }\r\n\r\n  /**\r\n    Fires custom events\r\n    @protected\r\n  */\r\n  _fireChangeEvents () {\r\n    this._fireEvent('accept');\r\n    if (this.masked.isComplete) this._fireEvent('complete');\r\n  }\r\n\r\n  /**\r\n    Aborts delayed cursor update\r\n    @private\r\n  */\r\n  _abortUpdateCursor () {\r\n    if (this._cursorChanging) {\r\n      clearTimeout(this._cursorChanging);\r\n      delete this._cursorChanging;\r\n    }\r\n  }\r\n\r\n  /** Aligns cursor to nearest available position */\r\n  alignCursor () {\r\n    this.cursorPos = this.masked.nearestInputPos(this.cursorPos, DIRECTION.LEFT);\r\n  }\r\n\r\n  /** Aligns cursor only if selection is empty */\r\n  alignCursorFriendly () {\r\n    if (this.selectionStart !== this.cursorPos) return;  // skip if range is selected\r\n    this.alignCursor();\r\n  }\r\n\r\n  /** Adds listener on custom event */\r\n  on (ev: string, handler: Function) {\r\n    if (!this._listeners[ev]) this._listeners[ev] = [];\r\n    this._listeners[ev].push(handler);\r\n    return this;\r\n  }\r\n\r\n  /** Removes custom event listener */\r\n  off (ev: string, handler: Function) {\r\n    if (!this._listeners[ev]) return this;\r\n    if (!handler) {\r\n      delete this._listeners[ev];\r\n      return this;\r\n    }\r\n    const hIndex = this._listeners[ev].indexOf(handler);\r\n    if (hIndex >= 0) this._listeners[ev].splice(hIndex, 1);\r\n    return this;\r\n  }\r\n\r\n  /** Handles view input event */\r\n  _onInput () {\r\n    this._abortUpdateCursor();\r\n\r\n    // fix strange IE behavior\r\n    if (!this._selection) return this.updateValue();\r\n\r\n    const details = new ActionDetails(\r\n      // new state\r\n      this.el.value, this.cursorPos,\r\n      // old state\r\n      this.value, this._selection);\r\n\r\n    const oldRawValue = this.masked.rawInputValue;\r\n\r\n    const offset = this.masked.splice(\r\n      details.startChangePos,\r\n      details.removed.length,\r\n      details.inserted,\r\n      details.removeDirection).offset;\r\n\r\n    // force align in remove direction only if no input chars were removed\r\n    // otherwise we still need to align with NONE (to get out from fixed symbols for instance)\r\n    const removeDirection = oldRawValue === this.masked.rawInputValue ?\r\n      details.removeDirection :\r\n      DIRECTION.NONE;\r\n\r\n    const cursorPos = this.masked.nearestInputPos(\r\n      details.startChangePos + offset,\r\n      removeDirection,\r\n    );\r\n\r\n    this.updateControl();\r\n    this.updateCursor(cursorPos);\r\n  }\r\n\r\n  /** Handles view change event and commits model value */\r\n  _onChange () {\r\n    if (this.value !== this.el.value) {\r\n      this.updateValue();\r\n    }\r\n    this.masked.doCommit();\r\n    this.updateControl();\r\n    this._saveSelection();\r\n  }\r\n\r\n  /** Handles view drop event, prevents by default */\r\n  _onDrop (ev: Event) {\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n  }\r\n\r\n  /** Restore last selection on focus */\r\n  _onFocus (ev: Event) {\r\n    if (this.selectionStart !== this.cursorPos) return;  // skip if range is selected\r\n    if (this._selection) this.cursorPos = this._selection.end;\r\n    this.alignCursorFriendly();\r\n  }\r\n\r\n  /** Unbind view events and removes element reference */\r\n  destroy () {\r\n    this._unbindEvents();\r\n    // $FlowFixMe why not do so?\r\n    this._listeners.length = 0;\r\n    delete this.el;\r\n  }\r\n}\r\n","// @flow\r\nimport MaskedPattern from './pattern.js';\r\n\r\n\r\n/** Pattern which validates enum values */\r\nexport default\r\nclass MaskedEnum extends MaskedPattern {\r\n  enum: Array<string>;\r\n\r\n  /**\r\n    @override\r\n    @param {Object} opts\r\n  */\r\n  _update (opts: any) {  // TODO type\r\n    if (opts.enum) opts.mask = '*'.repeat(opts.enum[0].length);\r\n\r\n    super._update(opts);\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  doValidate (...args: *): boolean {\r\n    return this.enum.some(e => e.indexOf(this.unmaskedValue) >= 0) &&\r\n      super.doValidate(...args);\r\n  }\r\n}\r\n","// @flow\r\nimport {escapeRegExp, indexInDirection, posInDirection, type Direction, DIRECTION} from '../core/utils.js';\r\nimport ChangeDetails from '../core/change-details.js';\r\n\r\nimport Masked, {type MaskedOptions, type ExtractFlags, type AppendFlags} from './base.js';\r\n\r\n\r\ntype MaskedNumberOptions = {\r\n  ...MaskedOptions<Number>,\r\n  radix: $PropertyType<MaskedNumber, 'radix'>,\r\n  thousandsSeparator: $PropertyType<MaskedNumber, 'thousandsSeparator'>,\r\n  mapToRadix: $PropertyType<MaskedNumber, 'mapToRadix'>,\r\n  scale: $PropertyType<MaskedNumber, 'scale'>,\r\n  signed: $PropertyType<MaskedNumber, 'signed'>,\r\n  normalizeZeros: $PropertyType<MaskedNumber, 'normalizeZeros'>,\r\n  padFractionalZeros: $PropertyType<MaskedNumber, 'padFractionalZeros'>,\r\n};\r\n\r\n/**\r\n  Number mask\r\n  @param {Object} opts\r\n  @param {string} opts.radix - Single char\r\n  @param {string} opts.thousandsSeparator - Single char\r\n  @param {Array<string>} opts.mapToRadix - Array of single chars\r\n  @param {number} opts.min\r\n  @param {number} opts.max\r\n  @param {number} opts.scale - Digits after point\r\n  @param {boolean} opts.signed - Allow negative\r\n  @param {boolean} opts.normalizeZeros - Flag to remove leading and trailing zeros in the end of editing\r\n  @param {boolean} opts.padFractionalZeros - Flag to pad trailing zeros after point in the end of editing\r\n*/\r\nexport default\r\nclass MaskedNumber extends Masked<Class<Number>> {\r\n  static DEFAULTS: $Shape<MaskedNumberOptions>;\r\n\r\n  /** Single char */\r\n  radix: string;\r\n  /** Single char */\r\n  thousandsSeparator: string;\r\n  /** Array of single chars */\r\n  mapToRadix: Array<string>;\r\n  /** */\r\n  min: number;\r\n  /** */\r\n  max: number;\r\n  /** Digits after point */\r\n  scale: number;\r\n  /** */\r\n  signed: boolean;\r\n  /** Flag to remove leading and trailing zeros in the end of editing */\r\n  normalizeZeros: boolean;\r\n  /** Flag to pad trailing zeros after point in the end of editing */\r\n  padFractionalZeros: boolean;\r\n  _numberRegExp: RegExp;\r\n  _numberRegExpInput: RegExp;\r\n  _thousandsSeparatorRegExp: RegExp;\r\n  _mapToRadixRegExp: RegExp;\r\n  _separatorsProcessed: boolean;\r\n\r\n  constructor (opts: $Shape<MaskedNumberOptions>) {\r\n    super({\r\n      ...MaskedNumber.DEFAULTS,\r\n      ...opts\r\n    });\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  _update (opts: MaskedNumberOptions) {\r\n    super._update(opts);\r\n    this._updateRegExps();\r\n  }\r\n\r\n  /** */\r\n  _updateRegExps () {\r\n    // use different regexp to process user input (more strict, input suffix) and tail shifting\r\n    let start = '^' + (this.allowNegative ? '[+|\\\\-]?' : '');\r\n    let midInput = '(0|([1-9]+\\\\d*))?';\r\n    let mid = '\\\\d*';\r\n\r\n    let end = (this.scale ?\r\n      '(' + escapeRegExp(this.radix) + '\\\\d{0,' + this.scale + '})?' :\r\n      '') + '$';\r\n\r\n    this._numberRegExpInput = new RegExp(start + midInput + end);\r\n    this._numberRegExp = new RegExp(start + mid + end);\r\n    this._mapToRadixRegExp = new RegExp('[' +\r\n      this.mapToRadix.map(escapeRegExp).join('') +\r\n    ']', 'g');\r\n    this._thousandsSeparatorRegExp = new RegExp(escapeRegExp(this.thousandsSeparator), 'g');\r\n  }\r\n\r\n  /** */\r\n  _removeThousandsSeparators (value: string): string {\r\n    return value.replace(this._thousandsSeparatorRegExp, '');\r\n  }\r\n\r\n  /** */\r\n  _insertThousandsSeparators (value: string): string {\r\n    // https://stackoverflow.com/questions/2901102/how-to-print-a-number-with-commas-as-thousands-separators-in-javascript\r\n    const parts = value.split(this.radix);\r\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, this.thousandsSeparator);\r\n    return parts.join(this.radix);\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  doPrepare (str: string, ...args: *) {\r\n    return super.doPrepare(this._removeThousandsSeparators(str.replace(this._mapToRadixRegExp, this.radix)), ...args);\r\n  }\r\n\r\n  /** */\r\n  _separatorsCount (to: number, extendOnSeparators: boolean=false): number {\r\n    let count = 0;\r\n\r\n    for (let pos = 0; pos < to; ++pos) {\r\n      if (this._value.indexOf(this.thousandsSeparator, pos) === pos) {\r\n        ++count;\r\n        if (extendOnSeparators) to += this.thousandsSeparator.length;\r\n      }\r\n    }\r\n\r\n    return count;\r\n  }\r\n\r\n  /** */\r\n  _separatorsCountFromSlice (slice: string=this._value): number {\r\n    return this._separatorsCount(this._removeThousandsSeparators(slice).length, true);\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  extractInput (fromPos?: number=0, toPos?: number=this.value.length, flags?: ExtractFlags): string {\r\n    [fromPos, toPos] = this._adjustRangeWithSeparators(fromPos, toPos);\r\n\r\n    return this._removeThousandsSeparators(super.extractInput(fromPos, toPos, flags));\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  _appendCharRaw (ch: string, flags: AppendFlags={}): ChangeDetails {\r\n    if (!this.thousandsSeparator) return super._appendCharRaw(ch, flags);\r\n\r\n    const prevBeforeTailValue = flags.tail && flags._beforeTailState ?\r\n      flags._beforeTailState._value :\r\n      this._value;\r\n    const prevBeforeTailSeparatorsCount = this._separatorsCountFromSlice(prevBeforeTailValue);\r\n    this._value = this._removeThousandsSeparators(this.value);\r\n\r\n    const appendDetails = super._appendCharRaw(ch, flags);\r\n\r\n    this._value = this._insertThousandsSeparators(this._value);\r\n    const beforeTailValue = flags.tail && flags._beforeTailState ?\r\n      flags._beforeTailState._value :\r\n      this._value;\r\n    const beforeTailSeparatorsCount = this._separatorsCountFromSlice(beforeTailValue);\r\n\r\n    appendDetails.tailShift += (beforeTailSeparatorsCount - prevBeforeTailSeparatorsCount) * this.thousandsSeparator.length;\r\n    return appendDetails;\r\n  }\r\n\r\n  /** */\r\n  _findSeparatorAround (pos: number): number {\r\n    if (this.thousandsSeparator) {\r\n      const searchFrom = pos - this.thousandsSeparator.length + 1;\r\n      const separatorPos = this.value.indexOf(this.thousandsSeparator, searchFrom);\r\n      if (separatorPos <= pos) return separatorPos;\r\n    }\r\n\r\n    return -1;\r\n  }\r\n\r\n  _adjustRangeWithSeparators (from: number, to: number): [number, number] {\r\n    const separatorAroundFromPos = this._findSeparatorAround(from);\r\n    if (separatorAroundFromPos >= 0) from = separatorAroundFromPos;\r\n\r\n    const separatorAroundToPos = this._findSeparatorAround(to);\r\n    if (separatorAroundToPos >= 0) to = separatorAroundToPos + this.thousandsSeparator.length;\r\n    return [from, to];\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  remove (fromPos?: number=0, toPos?: number=this.value.length): ChangeDetails {\r\n    [fromPos, toPos] = this._adjustRangeWithSeparators(fromPos, toPos);\r\n\r\n    const valueBeforePos = this.value.slice(0, fromPos);\r\n    const valueAfterPos = this.value.slice(toPos);\r\n\r\n    const prevBeforeTailSeparatorsCount = this._separatorsCount(valueBeforePos.length);\r\n    this._value = this._insertThousandsSeparators(this._removeThousandsSeparators(valueBeforePos + valueAfterPos));\r\n    const beforeTailSeparatorsCount = this._separatorsCountFromSlice(valueBeforePos);\r\n\r\n    return new ChangeDetails({\r\n      tailShift: (beforeTailSeparatorsCount - prevBeforeTailSeparatorsCount) * this.thousandsSeparator.length,\r\n    });\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  nearestInputPos (cursorPos: number, direction?: Direction): number {\r\n    if (!this.thousandsSeparator) return cursorPos;\r\n\r\n    switch (direction) {\r\n      case DIRECTION.NONE:\r\n      case DIRECTION.LEFT:\r\n      case DIRECTION.FORCE_LEFT: {\r\n        const separatorAtLeftPos = this._findSeparatorAround(cursorPos - 1);\r\n        if (separatorAtLeftPos >= 0) {\r\n          const separatorAtLeftEndPos = separatorAtLeftPos + this.thousandsSeparator.length;\r\n          if (cursorPos < separatorAtLeftEndPos ||\r\n            this.value.length <= separatorAtLeftEndPos ||\r\n            direction === DIRECTION.FORCE_LEFT\r\n          ) {\r\n            return separatorAtLeftPos;\r\n          }\r\n        }\r\n        break;\r\n      }\r\n      case DIRECTION.RIGHT:\r\n      case DIRECTION.FORCE_RIGHT: {\r\n        const separatorAtRightPos = this._findSeparatorAround(cursorPos);\r\n        if (separatorAtRightPos >= 0) {\r\n          return separatorAtRightPos + this.thousandsSeparator.length;\r\n        }\r\n      }\r\n    }\r\n\r\n    return cursorPos;\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  doValidate (flags: AppendFlags) {\r\n    const regexp = flags.input ? this._numberRegExpInput : this._numberRegExp;\r\n\r\n    // validate as string\r\n    let valid = regexp.test(this._removeThousandsSeparators(this.value));\r\n\r\n    if (valid) {\r\n      // validate as number\r\n      const number = this.number;\r\n      valid = valid && !isNaN(number) &&\r\n        // check min bound for negative values\r\n        (this.min == null || this.min >= 0 || this.min <= this.number) &&\r\n        // check max bound for positive values\r\n        (this.max == null || this.max <= 0 || this.number <= this.max);\r\n    }\r\n\r\n    return valid && super.doValidate(flags);\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  doCommit () {\r\n    if (this.value) {\r\n      const number = this.number;\r\n      let validnum = number;\r\n\r\n      // check bounds\r\n      if (this.min != null) validnum = Math.max(validnum, this.min);\r\n      if (this.max != null) validnum = Math.min(validnum, this.max);\r\n\r\n      if (validnum !== number) this.unmaskedValue = String(validnum);\r\n\r\n      let formatted = this.value;\r\n\r\n      if (this.normalizeZeros) formatted = this._normalizeZeros(formatted);\r\n      if (this.padFractionalZeros) formatted = this._padFractionalZeros(formatted);\r\n\r\n      this._value = formatted;\r\n    }\r\n\r\n    super.doCommit();\r\n  }\r\n\r\n  /** */\r\n  _normalizeZeros (value: string): string {\r\n    const parts = this._removeThousandsSeparators(value).split(this.radix);\r\n\r\n    // remove leading zeros\r\n    parts[0] = parts[0].replace(/^(\\D*)(0*)(\\d*)/, (match, sign, zeros, num) => sign + num);\r\n    // add leading zero\r\n    if (value.length && !/\\d$/.test(parts[0])) parts[0] = parts[0] + '0';\r\n\r\n    if (parts.length > 1) {\r\n      parts[1] = parts[1].replace(/0*$/, '');  // remove trailing zeros\r\n      if (!parts[1].length) parts.length = 1;  // remove fractional\r\n    }\r\n\r\n    return this._insertThousandsSeparators(parts.join(this.radix));\r\n  }\r\n\r\n  /** */\r\n  _padFractionalZeros (value: string): string {\r\n    if (!value) return value;\r\n\r\n    const parts = value.split(this.radix);\r\n    if (parts.length < 2) parts.push('');\r\n    parts[1] = parts[1].padEnd(this.scale, '0');\r\n    return parts.join(this.radix);\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  get unmaskedValue (): string {\r\n    return this._removeThousandsSeparators(\r\n      this._normalizeZeros(\r\n        this.value))\r\n      .replace(this.radix, '.');\r\n  }\r\n\r\n  set unmaskedValue (unmaskedValue: string) {\r\n    super.unmaskedValue = unmaskedValue.replace('.', this.radix);\r\n  }\r\n\r\n  /** Parsed Number */\r\n  get number (): number {\r\n    return Number(this.unmaskedValue);\r\n  }\r\n\r\n  set number (number: number) {\r\n    this.unmaskedValue = String(number);\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  get typedValue (): number {\r\n    return this.number;\r\n  }\r\n\r\n  set typedValue (value: number) {\r\n    this.number = value;\r\n  }\r\n\r\n  /**\r\n    Is negative allowed\r\n    @readonly\r\n  */\r\n  get allowNegative (): boolean {\r\n    return this.signed ||\r\n      (this.min != null && this.min < 0) ||\r\n      (this.max != null && this.max < 0);\r\n  }\r\n}\r\nMaskedNumber.DEFAULTS = {\r\n  radix: ',',\r\n  thousandsSeparator: '',\r\n  mapToRadix: ['.'],\r\n  scale: 2,\r\n  signed: false,\r\n  normalizeZeros: true,\r\n  padFractionalZeros: false,\r\n};\r\n","// @flow\r\nimport Masked, {type MaskedOptions} from './base.js';\r\n\r\n\r\n/** Masking by RegExp */\r\nexport default\r\nclass MaskedRegExp extends Masked<RegExp> {\r\n  /**\r\n    @override\r\n    @param {Object} opts\r\n  */\r\n  _update (opts: $Shape<MaskedOptions<RegExp>>) {\r\n    if (opts.mask) opts.validate = (value) => value.search(opts.mask) >= 0;\r\n    super._update(opts);\r\n  }\r\n}\r\n","// @flow\r\nimport Masked, {type MaskedOptions} from './base.js';\r\n\r\n\r\n/** Masking by custom Function */\r\nexport default\r\nclass MaskedFunction extends Masked<Function> {\r\n  /**\r\n    @override\r\n    @param {Object} opts\r\n  */\r\n  _update (opts: MaskedOptions<Function>) {\r\n    if (opts.mask) opts.validate = opts.mask;\r\n    super._update(opts);\r\n  }\r\n}\r\n","// @flow\r\nimport ChangeDetails from '../core/change-details.js';\r\nimport createMask from './factory.js';\r\nimport Masked, {type AppendFlags, type MaskedState} from './base.js';\r\nimport { type TailDetails } from '../core/tail-details.js';\r\n\r\n\r\ntype MaskedDynamicState = {|\r\n  ...MaskedState,\r\n  _rawInputValue: string,\r\n  compiledMasks: Array<*>,\r\n  currentMaskRef: ?Masked<*>,\r\n  currentMask: *,\r\n|};\r\n\r\ntype DynamicMaskType = Array<{[string]: any}>;\r\n/** Dynamic mask for choosing apropriate mask in run-time */\r\nexport default\r\nclass MaskedDynamic extends Masked<DynamicMaskType> {\r\n  /** Currently chosen mask */\r\n  currentMask: ?Masked<*>;\r\n  /** Compliled {@link Masked} options */\r\n  compiledMasks: Array<Masked<*>>;\r\n  /** Chooses {@link Masked} depending on input value */\r\n  dispatch: (string, Masked<*>, AppendFlags) => Masked<*>;\r\n\r\n  /**\r\n    @param {Object} opts\r\n  */\r\n  constructor (opts: any) {\r\n    super({\r\n      ...MaskedDynamic.DEFAULTS,\r\n      ...opts\r\n    });\r\n\r\n    this.currentMask = null;\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  _update (opts: any) {\r\n    super._update(opts);\r\n    if ('mask' in opts) {\r\n      // mask could be totally dynamic with only `dispatch` option\r\n      this.compiledMasks = Array.isArray(opts.mask) ?\r\n        opts.mask.map(m => createMask(m)) :\r\n        [];\r\n    }\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  _appendCharRaw (...args: *): ChangeDetails {\r\n    const details = this._applyDispatch(...args);\r\n\r\n    if (this.currentMask) {\r\n      details.aggregate(this.currentMask._appendChar(...args));\r\n    }\r\n\r\n    return details;\r\n  }\r\n\r\n  _applyDispatch (appended: string='', flags: AppendFlags={}) {\r\n    const prevValueBeforeTail = flags.tail && flags._beforeTailState != null ?\r\n      flags._beforeTailState._value :\r\n      this.value;\r\n    const inputValue = this.rawInputValue;\r\n    const insertValue = flags.tail && flags._beforeTailState != null ?\r\n      // $FlowFixMe - tired to fight with type system\r\n      flags._beforeTailState._rawInputValue :\r\n      inputValue;\r\n    const tailValue = inputValue.slice(insertValue.length);\r\n    const prevMask = this.currentMask;\r\n    const details = new ChangeDetails();\r\n\r\n    const prevMaskState = prevMask && prevMask.state;\r\n\r\n    // clone flags to prevent overwriting `_beforeTailState`\r\n    this.currentMask = this.doDispatch(appended, { ...flags });\r\n\r\n    // restore state after dispatch\r\n    if (this.currentMask) {\r\n      if (this.currentMask !== prevMask) {\r\n        // if mask changed reapply input\r\n        this.currentMask.reset();\r\n\r\n        // $FlowFixMe - it's ok, we don't change current mask above\r\n        const d = this.currentMask.append(insertValue, {raw: true});\r\n        details.tailShift = d.inserted.length - prevValueBeforeTail.length;\r\n\r\n        if (tailValue) {\r\n          // $FlowFixMe - it's ok, we don't change current mask above\r\n          details.tailShift += this.currentMask.append(tailValue, {raw: true, tail: true}).tailShift;\r\n        }\r\n      } else {\r\n        // Dispatch can do something bad with state, so\r\n        // restore prev mask state\r\n        this.currentMask.state = prevMaskState;\r\n      }\r\n    }\r\n\r\n    return details;\r\n  }\r\n\r\n  _appendPlaceholder (...args: *) {\r\n    const details = this._applyDispatch(...args);\r\n\r\n    if (this.currentMask) {\r\n      details.aggregate(this.currentMask._appendPlaceholder());\r\n    }\r\n\r\n    return details;\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  doDispatch(appended: string, flags: AppendFlags={}) {\r\n    return this.dispatch(appended, this, flags);\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  doValidate (...args: *): boolean {\r\n    return super.doValidate(...args) && (\r\n      !this.currentMask || this.currentMask.doValidate(...args));\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  reset () {\r\n    if (this.currentMask) this.currentMask.reset();\r\n    this.compiledMasks.forEach(m => m.reset());\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  get value (): string {\r\n    return this.currentMask ? this.currentMask.value : '';\r\n  }\r\n\r\n  set value (value: string) {\r\n    super.value = value;\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  get unmaskedValue (): string {\r\n    return this.currentMask ? this.currentMask.unmaskedValue : '';\r\n  }\r\n\r\n  set unmaskedValue (unmaskedValue: string) {\r\n    super.unmaskedValue = unmaskedValue;\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  get typedValue (): any {\r\n    return this.currentMask ? this.currentMask.typedValue : '';\r\n  }\r\n\r\n  // probably typedValue should not be used with dynamic\r\n  set typedValue (value: any) {\r\n    let unmaskedValue = String(value);\r\n\r\n    // double check it\r\n    if (this.currentMask) {\r\n      this.currentMask.typedValue = value;\r\n      unmaskedValue = this.currentMask.unmaskedValue;\r\n    }\r\n    this.unmaskedValue = unmaskedValue;\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  get isComplete (): boolean {\r\n    return !!this.currentMask && this.currentMask.isComplete;\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  remove (...args: *): ChangeDetails {\r\n    const details: ChangeDetails = new ChangeDetails();\r\n    if (this.currentMask) {\r\n      details.aggregate(this.currentMask.remove(...args))\r\n        // update with dispatch\r\n        .aggregate(this._applyDispatch());\r\n    }\r\n\r\n    return details;\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  get state (): MaskedDynamicState {\r\n    return {\r\n      ...super.state,\r\n      _rawInputValue: this.rawInputValue,\r\n      compiledMasks: this.compiledMasks.map(m => m.state),\r\n      currentMaskRef: this.currentMask,\r\n      currentMask: this.currentMask && this.currentMask.state,\r\n    };\r\n  }\r\n\r\n  set state (state: MaskedDynamicState) {\r\n    const {compiledMasks, currentMaskRef, currentMask, ...maskedState} = state;\r\n    this.compiledMasks.forEach((m, mi) => m.state = compiledMasks[mi]);\r\n    if (currentMaskRef != null) {\r\n      this.currentMask = currentMaskRef;\r\n      this.currentMask.state = currentMask;\r\n    }\r\n    super.state = maskedState;\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  extractInput (...args: *): string {\r\n    return this.currentMask ?\r\n      this.currentMask.extractInput(...args) :\r\n      '';\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  extractTail (...args: *): TailDetails {\r\n    return this.currentMask ?\r\n      this.currentMask.extractTail(...args) :\r\n      super.extractTail(...args);\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  doCommit () {\r\n    if (this.currentMask) this.currentMask.doCommit();\r\n    super.doCommit();\r\n  }\r\n\r\n  /**\r\n    @override\r\n  */\r\n  nearestInputPos(...args: *): number {\r\n    return this.currentMask ?\r\n      this.currentMask.nearestInputPos(...args) :\r\n      super.nearestInputPos(...args);\r\n  }\r\n\r\n  get overwrite () {\r\n    return this.currentMask ?\r\n      this.currentMask.overwrite :\r\n      super.overwrite;\r\n  }\r\n\r\n  set overwrite (overwrite: *) {\r\n    console.warn('\"overwrite\" option is not available in dynamic mask, use this option in siblings');\r\n  }\r\n}\r\n\r\nMaskedDynamic.DEFAULTS = {\r\n  dispatch: (appended, masked, flags) => {\r\n    if (!masked.compiledMasks.length) return;\r\n\r\n    const inputValue = masked.rawInputValue;\r\n\r\n    // simulate input\r\n    const inputs = masked.compiledMasks.map((m, index) => {\r\n      m.reset();\r\n      m.append(inputValue, { raw: true });\r\n      m.append(appended, flags);\r\n      const weight = m.rawInputValue.length;\r\n\r\n      return {weight, index};\r\n    });\r\n\r\n    // pop masks with longer values first\r\n    inputs.sort((i1, i2) => i2.weight - i1.weight);\r\n\r\n    return masked.compiledMasks[inputs[0].index];\r\n  }\r\n};\r\n","import smoothscroll from 'smoothscroll-polyfill'\nimport Glide from '@glidejs/glide'\nimport baguetteBox from 'baguettebox.js'\nimport IMask from 'imask'\n\n// Слайдеры\n\nnew Glide('.glide', {\n  type: 'carousel',\n  perView: 4,\n  focusAt: 'center',\n  autoplay: 4000,\n  animationTimingFunc: 'ease',\n  breakpoints: {\n    640: {\n      perView: 1,\n    },\n    940: {\n      perView: 2,\n    },\n    1300: {\n      perView: 3,\n    },\n  },\n}).mount()\n\nnew Glide('.glide2', {\n  type: 'carousel',\n  perView: 3,\n  focusAt: 'center',\n  autoplay: 4000,\n  animationTimingFunc: 'ease',\n  breakpoints: {\n    850: {\n      perView: 1,\n    },\n    1140: {\n      perView: 2,\n    },\n  },\n}).mount()\n\n// Маска ввода\n\nconst phoneMask = IMask(document.querySelector('.tel-num'), {\n  mask: '+{7}(000)000-00-00',\n})\n\n// lightbox\n\nbaguetteBox.run('.glide__slide')\n\n// Меню\n\nlet toggle = true\n\nconst menuToggle = document.querySelector('.mob-menu-toggle')\nconst menu = document.querySelector('.mob-menu')\nconst backButton = document.querySelector('.mob-menu-back')\n\nconst showMenu = () => {\n  toggle = true\n  menu.classList.remove('closed')\n  setTimeout(() => {\n    const scrollY = window.pageYOffset\n    const body = document.body\n    body.style.position = 'fixed'\n    body.style.top = `-${scrollY}px`\n  }, 500)\n}\n\nconst closeMenu = () => {\n  const body = document.body\n  const scrollY = body.style.top\n  body.style.position = ''\n  body.style.top = ''\n  window.scrollTo(0, parseInt(scrollY || '0') * -1)\n  toggle = false\n  menu.classList.add('closed')\n}\n\nbackButton.addEventListener('click', e => {\n  e.preventDefault()\n\n  if (toggle) closeMenu()\n})\n\nmenuToggle.addEventListener('click', e => {\n  e.preventDefault()\n\n  showMenu()\n})\n\n// Плавный скролл\n\nsmoothscroll.polyfill()\n\nconst smoothScrollTo = anchor => {\n  let el = document.querySelector(anchor)\n\n  const yCoordinate = el.getBoundingClientRect().top + window.pageYOffset\n  const yOffset = -50\n\n  window.scrollTo({\n    top: yCoordinate + yOffset,\n    behavior: 'smooth',\n  })\n}\n\nconst scrollLinks = document.querySelectorAll('.scroll-link')\n\nscrollLinks.forEach(link => {\n  link.addEventListener('click', e => {\n    e.preventDefault()\n\n    if (toggle) {\n      closeMenu()\n    }\n\n    let anchor = e.target.getAttribute('href')\n\n    if (anchor == null || anchor === '#') {\n      window.history.pushState('', '', '/')\n\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth',\n      })\n    } else {\n      window.history.pushState('', '', anchor)\n\n      smoothScrollTo(anchor)\n    }\n  })\n})\n\n// Контактная форма\n\nconst button = document.querySelector('.submit')\n\nconst form = document.querySelector('#form')\n\nconst submit = form.addEventListener('submit', e => {\n  e.preventDefault()\n\n  button.disabled = true\n\n  const { name, tel } = {\n    name: form.name.value,\n    tel: form.tel.value,\n  }\n\n  const data = new FormData()\n\n  data.append('name', name)\n  data.append('tel', tel)\n\n  fetch('mail.php', {\n    method: 'POST',\n    body: data,\n  }).then(res =>\n    res.json().then(json => {\n      if (json.name === name) {\n        alert('Заявка принята!')\n        button.disabled = false\n      }\n    })\n  )\n})\n"]}